[{"content":"Sei que pode parecer estranho esse livro aparecendo num lugar normalmente focado em programa√ß√£o, mas, como talvez voc√™ j√° tenha ouvido falar por a√≠, boa parte do que faz um bom programador √© sua soft skill, ou seja, sua capacidade de comunica√ß√£o e lidar com as pessoas. Esse livro fala justamente sobre isso, comunica√ß√£o.\nT√©cnicas fundamentais para lidar com pessoas Se quiser colher o mel, n√£o chute a colmeia N√£o critique, n√£o condene, n√£o reclame Ao inv√©s de criticar e apontar os defeitos de uma pessoa, devemos tentar ser emp√°ticos, ouvir essa pessoa, entender que, uma cr√≠tica tende a rejei√ß√£o, um elogio tende a ser mais valorizado. Temos mais sucesso recompensando o bom comportamento do que punindo o comportamento ruim O grande segredo para lidar com as pessoas Fa√ßa elogios honestos e sinceros N√£o fa√ßa bajula√ß√µes, a maioria das pessoas reprova isso. Fa√ßa elogios sinceros, se algu√©m te atendeu com uma cordialidade excepcional, fa√ßa um elogio a ela. Todos gostamos de elogios e queremos nos sentir importantes e valorizados, isso √© um anseio t√£o importante quanto a fome Quem consegue isso tem o mundo inteiro a seu lado, quem n√£o consegue trilha um caminho solit√°rio Desperte no outro um desejo ardente O ser humano por natureza √© ego√≠sta, pensamos majoritariamente em n√≥s mesmos e nos nossos desejos. E esse √© justamente o problema quando se quer convencer algu√©m de alguma coisa. O outro se importa mais com o pr√≥prio desejo, se quer convencer ela a fazer algo que te beneficia, voc√™ tem que mostrar como isso beneficia a ela primeiro. Se existe um segredo para o sucesso, ele consiste na capacidade de entender o ponto de vista do outro e enxergar n√£o s√≥ com seus olhos, mas tamb√©m com os olhos dele.\nHenry Ford Seis formas de fazer as pessoas gostarem de voc√™ Fa√ßa isso e voc√™ ser√° bem-vindo em qualquer lugar Desenvolva um interesse genu√≠no pelos outros Para ter o interesse das pessoas, primeiro voc√™ precisa demonstrar interesse por elas. Novamente, o ser humano √© ego√≠sta, queremos falar de n√≥s mesmos, quando temos algu√©m que se interessa por n√≥s, temos imediatamente um certo carinho por aquela pessoa. O interesse n√£o precisa ser sempre sobre conversas, pode ser sobre a√ß√µes. Lembrar do anivers√°rio daquela pessoa, presentear com algo que ela goste ou esteja precisando, entre outras coisas Um jeito simples de causar uma boa primeira impress√£o Sorria √â basicamente isso, um sorriso genu√≠no desperta o melhor dentro de n√≥s. Basicamente, sorria mais, mas um sorriso verdadeiro, nada de sorrisos falsos Se voc√™ n√£o fizer isso, vai arranjar problema Lembre-se de que o nome de algu√©m √©, para a pessoa, o som mais agrad√°vel e mais importante de qualquer idioma Chame as pessoas pelo nome, se esforce para se lembrar do nome delas, isso as faz se sentir importantes Um jeito f√°cil de se tornar bom de papo Seja um bom ouvinte. Encoraje os outros a falar de si mesmos Ou√ßa as pessoas com aten√ß√£o, aten√ß√£o sincera. Ser um ouvinte atencioso vale mais em uma conversa do que saber falar sobre o assunto em quest√£o Como despertar o interesse das pessoas Fale sobre assuntos que interessam ao outro Fale sobre os assuntos que interessam seu interlocutor, n√£o apenas a si mesmo. Voc√™ ficaria impressionado com o que pode conseguir de pessoas falando sobre seus assuntos favoritos Como fazer as pessoas gostarem de voc√™ a primeira vista Fa√ßa o outro se sentir importante - e seja sincero. Tudo se envolve basicamente da mesma coisa, ter interesse pelo outro. Fa√ßa um elogio, se interesse pelo o que o outro faz ou fala Todo homem que encontro √© superior a mim de algum modo. E, nesse particular, aprendo com ele.\nComo fazer as pessoas pensarem como voc√™ √â imposs√≠vel ganhar uma discuss√£o A √∫nica forma de se dar bem numa discuss√£o √© evitando-a Ningu√©m ganha numa discuss√£o, se voc√™ perde a discuss√£o, perde. Se ganha a discuss√£o, tamb√©m perde. Por que perde? Por que voc√™ feriu o orgulho do outro, pode o ter constrangido, \u0026ldquo;Convencido contra a vontade. Um homem ainda acredita na sua verdade.\u0026rdquo;. Atente-se, diverg√™ncias e discuss√µes s√£o coisas diferentes. Diverg√™ncias s√£o naturais, convivendo em sociedade sempre v√£o existir diverg√™ncias. Aqui v√£o algumas sugest√µes para que uma diverg√™ncia n√£o vire uma discuss√£o: Acolha a diverg√™ncia Quando dois s√≥cios concordam o tempo todo, um dos dois n√£o √© necess√°rio Desconfie da sua primeira impress√£o instintiva Controle seu g√™nio Ou√ßa antes Procure pontos em comum Seja sincero Prometa que vai refletir sobre as ideias de seus oponentes e estud√°-los com cuidado Agrade√ßa sinceramente a seus oponentes pelo interesse demonstrado Adie a a√ß√£o para permitir que os dois lados tenham tempo de refletir sobre o problema Aqui vai um exemplo de uma poss√≠vel diverg√™ncia no dia a dia de programa√ß√£o que pode ser resolvida sem virar um discuss√£o, se um colega acredita que devemos seguir a estrutura que o framework utilizado \u0026ldquo;imp√µe\u0026rdquo; (no caso de frameworks opinativos). Primeiro voc√™ pode reconhecer de onde vem esse pensamento, ele pode pensar assim por ser mais f√°cil seguir o que o framework \u0026ldquo;imp√µe\u0026rdquo; do que uma arquitetura de verdade, ele pode estar \u0026ldquo;traumatizado\u0026rdquo; por um sistema legado que n√£o seguia nenhum padr√£o ou arquitetura claro e pode querer se agarrar a op√ß√£o mais \u0026ldquo;confort√°vel\u0026rdquo; de seguir o padr√£o do framework. Depois de fazer esse reconhecimento e criar uma empatia com a outra parte, voc√™ pode passar a introduzir sua ideia. Lembre-se, numa diverg√™ncia saud√°vel, s√£o duas pessoas contra um problema, n√£o uma pessoa contra a outra. Voc√™s tem o mesmo objetivo de tornar algo melhor ou resolver um problema Um jeito infal√≠vel de fazer inimigos e como evit√°-lo Demonstre respeito pela opini√£o alheia. Nunca diga \u0026ldquo;Voc√™ est√° errado\u0026rdquo;. Um jeito f√°cil de fazer inimizades √© dizer \u0026ldquo;voc√™ est√° errado\u0026rdquo; em uma discuss√£o, sem rodeios. Automaticamente a outra pessoa se fecha de tentar entender seu ponto e argumento, voc√™ est√° ferindo o orgulho dela, e ningu√©m quer isso. Come√ßar com frases \u0026ldquo;mansas\u0026rdquo; alivia bastante a tens√£o como \u0026ldquo;Posso estar enganado\u0026rdquo;, \u0026ldquo;Muitas vezes eu me engano\u0026rdquo;. Voc√™ normalmente n√£o arruma problemas ao admitir que pode estar errado Se estiver errado, admita o erro Se estiver errado, admita depressa e de maneira enf√°tica Simples e direto, assuma seus erros o mais r√°pido poss√≠vel e com firmeza. Com frequ√™ncia voc√™ se v√™ diante de uma situa√ß√£o onde a pessoa que deveria te repreender pelo erro acaba te defendendo Brigando voc√™ nunca obt√©m o bastante, mas cedendo voc√™ conquista bem mais do que espera\nUma gota de mel Comece sendo amig√°vel Existe um velho ditado, muito verdadeiro, que diz que \u0026ldquo;uma gota de mel captura mais moscas que um gal√£o de fel\u0026rdquo;. O mesmo ocorre com os homens. Se voc√™ quiser conquistar algu√©m para uma causa, primeiro deve convencer a pessoa de que √© seu amigo sincero. Essa √© a gota de mel que captura o cora√ß√£o dela. A gota que, n√£o importa o que se diga, √© o caminho mais r√°pido para se chegar √† raz√£o. - Abraham Lincoln\nSe abordar algu√©m com agressividade, tenho certeza que essa pessoa vai te abordar com mais agressividade ainda, mas se abordar algu√©m com gentileza e suavidade, vai poder falar sobre as diverg√™ncias que se tem com aquela pessoa\nFa√ßa o outro dizer \u0026ldquo;sim\u0026rdquo; imediatamente Fa√ßa com que o outro diga \u0026ldquo;sim\u0026rdquo; imediatamente Quando for conversar com as pessoas, n√£o comece falando sobre as diverg√™ncias entre voc√™s. Comece enfatizando - e continue a enfatizar - seus pontos em comum. Se poss√≠vel, enfatize que todos est√£o se esfor√ßando para alcan√ßar o mesmo objetivo e que a √∫nica diferen√ßa √© o m√©todo, n√£o o prop√≥sito. Fa√ßa com que o outro diga \u0026ldquo;sim\u0026rdquo; no princ√≠pio. Se poss√≠vel, evite que ele diga \u0026ldquo;n√£o\u0026rdquo;. Um negociador habilidoso consegue uma s√©rie de respostas afirmativas no in√≠cio, desencadeando no outro o processo psicol√≥gico de seguir na dire√ß√£o afirmativa. √â como dar uma tacada numa bola de bilhar em movimento: vai precisar de alguma for√ßa para desvi√°-la de leve, mas essa for√ßa ter√° que ser muito maior para mand√°-la na dire√ß√£o oposta. Nesse caso, muito pode ser lembrado do m√©todo socr√°tico, onde S√≥crates n√£o dizia que as pessoas estavam erradas, fazia v√°rias perguntas onde o interlocutor concordava com ele e levava o interlocutor a mudar de ideia e perceber sozinho o pr√≥prio erro A v√°lvula de seguran√ßa para lidar com reclama√ß√µes Deixe o outro falar durante a maior parte da conversa Como conseguir coopera√ß√£o Deixe a outra pessoa sentir que a ideia √© dela A raz√£o pela qual os rios e mares s√£o homenageados por centenas de riachos das montanhas √© que eles se mant√™m num n√≠vel mais baixo. Assim ele reinam sobre todos os riachos das montanhas. Do mesmo modo, para estar acima dos homens, o s√°bio se coloca abaixo deles; para estar √† frente, se coloca atr√°s. E dessa forma, embora seu lugar seja acima dos homens, eles n√£o sentem seu peso. Embora seu lugar seja √† frente dos homens, eles n√£o consideram isso uma ofensa. - Lao-Ts√©\nPara convencer algu√©m, uma √≥tima forma √© fazer pequenas sugest√µes para fazer com que a pessoa ache que a ideia vem dela mesma\nUma f√≥rmula que vai fazer maravilhas por voc√™ Tente honestamente enxergar as coisas do ponto de vista do outro Empatia, that\u0026rsquo;s it. Ter empatia pelo outro, tentar entender por que o outro pensa daquele jeito, quais os motivos ele tem para agir daquela forma O que todo mundo quer Demonstre compaix√£o e compreens√£o diante das ideias e dos desejos do outro As palavras m√°gicas s√£o: \u0026ldquo;Eu n√£o condeno voc√™ por se sentir assim. No seu lugar, certamente me sentiria do mesmo jeito\u0026rdquo;. Existe uma √°rea da psicologia que diz que somos frutos do nosso ambiente. Ou seja, vivendo no mesmo ambiente e sob a mesmas condi√ß√µes, todos ser√≠amos iguais. or exemplo, se voc√™ tivesse o mesmo corpo, temperamento e mente do Al Capone, vivido no mesmo ambiente e tivesse as mesmas experi√™ncias. Voc√™ seria exatamente quem ele era e estaria no lugar dele. Portanto, antes de retribuir a ignor√¢ncia de algu√©m, pense que, no lugar dela, voc√™ provavelmente se sentiria da mesma forma Um apelo que todos adoram Apele para os motivos mais nobres Jogue para o lado nobre da coisa, por exemplo, John D. Rockefeller Jr. n√£o queria que os fot√≥grafos tirassem fotos dos filhos dele, ele n√£o dizia: \u0026ldquo;N√£o quero que publiquem fotos deles\u0026rdquo;. Ao inv√©s disso ele dizia: \u0026ldquo;Voc√™s entendem, alguns de voc√™s tem filhos e sabem que n√£o √© bom que crian√ßas sejam t√£o expostas\u0026rdquo; O cinema faz. Os anunciantes fazem. Por que voc√™ n√£o faz tamb√©m? Dramatize suas ideias Fa√ßa apresenta√ß√µes visuais, gr√°ficos, atua√ß√£o, analogias, tudo serve pra isso Quando tudo falhar, tente este recurso Lance um desafio Nada melhor para motivar algu√©m do que a frase \u0026ldquo;eu duvido\u0026rdquo;. Uma competi√ß√£o saud√°vel entre colaboradores sempre vai ser motivador e mostrar resultados Seja um l√≠der: como mudar as pessoas sem ofender nem criar ressentimentos Se precisar apontar defeitos, comece desta forma Comece com elogios e reconhecimento sincero \u0026ldquo;Come√ßar a conversa com elogios √© como ir a um dentista que come√ßa com a anestesia. O paciente tamb√©m passa pela broca, mas a anestesia tira a dor.\u0026rdquo; Como fazer cr√≠ticas e n√£o ser odiado Aponte os erros alheios de forma indireta Aqui entra um ponto meio d√∫bio, o autor basicamente diz para fazer \u0026ldquo;indiretas\u0026rdquo;, mas n√£o sei se concordo aqui. Um dos exemplos que ele mostra √© muito bom, por exemplo, de funcion√°rios que estavam fumando numa √°rea que era proibido fumar, o chefe, ao inv√©s de dizer \u0026ldquo;voc√™s n√£o sabem ler? aqui √© proibido fumar\u0026rdquo;, ofereceu charutos aos rapazes e disse \u0026ldquo;por favor, experimentem desse charuto l√° fora\u0026rdquo;. Um ensinamento que da pra tirar desse cap√≠tulo √© de que devemos evitar a palavra \u0026ldquo;mas\u0026rdquo; ao fazer elogios com uma cr√≠tica. Mesmo que o elogio seja sincero, o \u0026ldquo;mas\u0026rdquo; deixa o elogio mais azedo que leite fora da geladeira Fale primeiro sobre seus pr√≥prios erros Fale sobre seus pr√≥prios erros antes de criticar o outro. Simples e direto ao ponto Ningu√©m gosta de receber ordens Fa√ßa perguntas em vez de dar ordens diretas Somos mais suscet√≠veis a receber ordens se elas vierem como sugest√µes N√£o deixe ningu√©m constrangido Preserve a dignidade do outro N√£o tenho o direito de dizer nem fazer nada que diminua um homem diante de seus pr√≥prios olhos. O que importa n√£o √© o que penso dele, mas o que ele pensa de si mesmo. Ferir algu√©m em sua dignidade √© um crime.\nComo estimular as pessoas a alcan√ßar o sucesso Elogie todos os progressos, mesmo o menor deles. Seja \u0026ldquo;caloroso ao demonstrar reconhecimento e pr√≥digo nos elogios\u0026rdquo; Elogie com sinceridade ao ver um progresso, muitas vezes, elogiar um progresso √© melhor do que criticar uma falha, o ponto que tem aten√ß√£o floresce, o que n√£o recebe aten√ß√£o murcha D√™ uma boa reputa√ß√£o ao cachorro D√™ ao outro uma bela reputa√ß√£o para manter Se um jovem √© taxado como pregui√ßoso e problem√°tico, pode apostar que essa pessoa far√° jus a reputa√ß√£o. E por que n√£o? J√° foi condenado e acha que n√£o tem mais nada a perder. Quando damos uma boa reputa√ß√£o a algu√©m, essa pessoa tende a querer manter essa reputa√ß√£o. Se uma pessoa √© taxada como produtiva e √°gil no trabalho em que ela exerce, pode ter certeza que ela vai fazer de tudo para manter essa reputa√ß√£o Fa√ßa com que o erro pare√ßa f√°cil de corrigir Encoraje. Fa√ßa o erro parecer f√°cil de corrigir Somos mais suscet√≠veis a mudar se somos encorajados, elogiados pelas partes boas e pensarmos que o erro √© algo m√≠nimo, um mero detalhe a ser corrigido Fa√ßa o outro se sentir feliz por fazer aquilo que voc√™ quer Fa√ßa o outro se sentir feliz por fazer aquilo que voc√™ sugere Pode ser infantil, mas se funcionou para napole√£o, tamb√©m funcionar√° para voc√™ ","permalink":"https://blog.felpo.dev/posts/como-fazer-amigos-e-influenciar-pessoas/","summary":"\u003cp\u003eSei que pode parecer estranho esse livro aparecendo num lugar normalmente focado em programa√ß√£o, mas, como talvez voc√™ j√° tenha ouvido falar por a√≠, boa parte do que faz um bom programador √© sua \u003cem\u003esoft skill\u003c/em\u003e, ou seja, sua capacidade de comunica√ß√£o e lidar com as pessoas.\nEsse livro fala justamente sobre isso, comunica√ß√£o.\u003c/p\u003e\n\u003ch2 id=\"t√©cnicas-fundamentais-para-lidar-com-pessoas\"\u003eT√©cnicas fundamentais para lidar com pessoas\u003c/h2\u003e\n\u003ch3 id=\"se-quiser-colher-o-mel-n√£o-chute-a-colmeia\"\u003eSe quiser colher o mel, n√£o chute a colmeia\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eN√£o critique, n√£o condene, n√£o reclame\nAo inv√©s de criticar e apontar os defeitos de uma pessoa, devemos tentar ser emp√°ticos, ouvir essa pessoa, entender que, uma cr√≠tica tende a rejei√ß√£o, um elogio tende a ser mais valorizado. Temos mais sucesso recompensando o bom comportamento do que punindo o comportamento ruim\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"o-grande-segredo-para-lidar-com-as-pessoas\"\u003eO grande segredo para lidar com as pessoas\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eFa√ßa elogios honestos e sinceros\nN√£o fa√ßa bajula√ß√µes, a maioria das pessoas reprova isso. Fa√ßa elogios sinceros, se algu√©m te atendeu com uma cordialidade excepcional, fa√ßa um elogio a ela. Todos gostamos de elogios e queremos nos sentir importantes e valorizados, isso √© um anseio t√£o importante quanto a fome\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"quem-consegue-isso-tem-o-mundo-inteiro-a-seu-lado-quem-n√£o-consegue-trilha-um-caminho-solit√°rio\"\u003eQuem consegue isso tem o mundo inteiro a seu lado, quem n√£o consegue trilha um caminho solit√°rio\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eDesperte no outro um desejo ardente\nO ser humano por natureza √© ego√≠sta, pensamos majoritariamente em n√≥s mesmos e nos nossos desejos. E esse √© justamente o problema quando se quer convencer algu√©m de alguma coisa. O outro se importa mais com o pr√≥prio desejo, se quer convencer ela a fazer algo que te beneficia, voc√™ tem que mostrar como isso beneficia a ela primeiro.\n\u003cblockquote\u003e\n\u003cp\u003eSe existe um segredo para o sucesso, ele consiste na capacidade de entender o ponto de vista do outro e enxergar n√£o s√≥ com seus olhos, mas tamb√©m com os olhos dele.\u003c/p\u003e","title":"Como fazer amigos e influenciar pessoas"},{"content":" Cozinhar bem leva tempo. Se fazemos voc√™ esperar √© para servi-lo melhor e deix√°-lo satisfeito\nEste princ√≠pio fundamental da culin√°ria de qualidade se aplica perfeitamente ao desenvolvimento de software. A urg√™ncia do cliente, embora compreens√≠vel, n√£o pode, e nem deve, reger o tempo de conclus√£o real de um projeto. Apressar um chef pode resultar em um omelete cru ou queimado. Apressar um time de desenvolvimento tem consequ√™ncias an√°logas, e geralmente mais custosas.\nM√≠tico Homem M√™s (O cap√≠tulo que da nome ao livro) Por que tantos projetos de software falham mais por falta de tempo no calend√°rio do que por todas as outras causas combinadas? A raiz do problema reside em uma m√©trica de estimativa falha: o Homem-M√™s.\nA Fal√°cia do Homem-M√™s O erro central est√° em tratar o esfor√ßo de software como tarefas de colheita de algod√£o ou debulha de trigo. Em tarefas de for√ßa bruta, homens e meses s√£o, de fato, intercambi√°veis: o custo pode variar com o n√∫mero de pessoas, mas o progresso linearmente sim. Se dez pessoas conseguem debulhar o trigo em um m√™s, espera-se que vinte o fa√ßam em meio m√™s.\nIsso √© categoricamente falso na programa√ß√£o de sistemas.\nEm tarefas complexas que precisam ser divididas, mas que exigem comunica√ß√£o entre as subtarefas, adicionar mais pessoas a um projeto n√£o o acelera; pelo contr√°rio, o atrasa.\nO esfor√ßo de intercomunica√ß√£o √© o fator mais grave. Se cada por√ß√£o da tarefa deve ser coordenada com as demais, o esfor√ßo aumenta exponencialmente. O n√∫mero de canais de comunica√ß√£o aumenta com a f√≥rmula n(n‚àí1)/2.\nTr√™s trabalhadores exigem 3 vezes mais comunica√ß√£o entre pares do que dois. Quatro trabalhadores exigem 6 vezes mais comunica√ß√£o do que dois. Como a constru√ß√£o de software √©, por natureza, um trabalho sistem√°tico e interconectado, o esfor√ßo de comunica√ß√£o rapidamente domina qualquer diminui√ß√£o no tempo de tarefas individuais. A adi√ß√£o de mais homens, paradoxalmente, aumenta, e n√£o diminui, o tempo no cronograma.\nComo um software atrasa um ano? Um dia de cada vez.\nA Equipe Cir√∫rgica Harlan Mills apresenta uma solu√ß√£o para equipes de programa√ß√£o, ao inv√©s de um grupo se organizar como um grupo de matan√ßa de porcos, o ideal seria se organizar como uma equipe cir√∫rgica. Ou seja, ao inv√©s de cada membro sair esfaqueando o problema, apenas um faz os cortes e os demais d√£o a ele todo o suporte que aumenta sua efic√°cia e produtividade.\nO cirurgi√£o Mills o chama de programador chefe. Ele define pessoalmente tudo sobre o sistema, arquiteta o programa, codifica, testa e escreve documenta√ß√£o. Ele precisa ter muito talento, dez anos de experi√™ncia e consider√°vel conhecimento de sistemas.\nO copiloto O alterego do cirurgi√£o, capaz de executar qualquer parte do trabalho, embora seja menos experiente. Sua fun√ß√£o principal √© partilhar o projeto como um pensador, cr√≠tico e avaliador. Ele conhece a fundo todo o c√≥digo do projeto. Seu papel n√£o se limita apenas a um conselheiro. Ele tamb√©m pode codificar, mas o respons√°vel ainda √© o cirurgi√£o.\nO administrador Algu√©m para lidar com pessoal, dinheiro e as m√°quinas. O cirurgi√£o √© o chefe e deve ter a √∫ltima palavra, mas n√£o deve gastar muito tempo com isso\nO editor O cirurgi√£o gera a documenta√ß√£o, o editor pega os rascunhos do cirurgi√£o e os melhora, formata e adiciona refer√™ncias bibliogr√°ficas\nDois secret√°rios O administrador e o editor precisar√£o de cada um, um secret√°rio\nO escritu√°rio da programa√ß√£o Respons√°vel pela manuten√ß√£o de todos os registros t√©cnicos da equipe em uma biblioteca de programa√ß√£o e produto\nO testador O cirurgi√£o precisar√° de um banco de testes apropriado para testar partes de seu trabalho √† medida que escreve, assim com para testar o trabalho completo.\nComo funciona Eles n√£o trabalham como piloto e copiloto, dividindo as responsabilidades, tarefas e decis√µes. O cirurgi√£o decide tudo e o restante do pessoal apenas auxilia.\nO Efeito do Segundo Sistema O segundo sistema que um arquiteto constr√≥i tende a ser o mais perigoso. Tenta ser o oposto do primeiro: ele vai ser hiperprojetado e tentar√° incluir todas as funcionalidades que foram deixadas de lado no primeiro projeto. A tenta√ß√£o de \u0026ldquo;fazer tudo certo desta vez\u0026rdquo; leva ao excesso de complexidade e atrasos.\nN√£o existe bala de prata Muitos buscam a pr√≥xima grande tecnologia ou t√©cnica de gest√£o que ir√°, por si s√≥, multiplicar a produtividade. Fred Brooks nos lembra:\nN√£o h√° um √∫nico desenvolvimento, seja em tecnologia ou em t√©cnica de gest√£o, que, por si s√≥, prometa sequer uma ordem de grandeza de melhoria dentro de uma d√©cada, seja em produtividade, confiabilidade ou simplicidade.\nA parte mais dif√≠cil da constru√ß√£o de software √© o projeto conceitual (a especifica√ß√£o, o design e o teste da ideia), n√£o a codifica√ß√£o em si (a representa√ß√£o e a verifica√ß√£o da fidelidade).\nA maestria em software requer tempo, foco, clareza e organiza√ß√£o estrutural, n√£o atalhos ou aumento indiscriminado de pessoal.\n","permalink":"https://blog.felpo.dev/posts/o-m%C3%ADtico-homem-m%C3%AAs/","summary":"\u003cblockquote\u003e\n\u003cp\u003eCozinhar bem leva tempo. Se fazemos voc√™ esperar √© para servi-lo melhor e deix√°-lo satisfeito\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003eEste princ√≠pio fundamental da culin√°ria de qualidade se aplica perfeitamente ao desenvolvimento de software. A urg√™ncia do cliente, embora compreens√≠vel, n√£o pode, e nem deve, reger o tempo de conclus√£o real de um projeto. Apressar um chef pode resultar em um \u003cstrong\u003eomelete cru ou queimado\u003c/strong\u003e. Apressar um time de desenvolvimento tem consequ√™ncias an√°logas, e geralmente mais custosas.\u003c/p\u003e","title":"O M√≠tico Homem-M√™s"},{"content":"O gato comeu meu c√≥digo fonte Seja respons√°vel pelo c√≥digo que voc√™ escreve, reconhe√ßa quando cometer erros e lide com isso profissionalmente. Se acontecer uma falha e voc√™ n√£o tiver um plano de conting√™ncia, dizer ao seu chefe \u0026ldquo;o gato comeu meu c√≥digo\u0026rdquo; n√£o vai resolver.\nAntes de abordar algu√©m para dizer que algo n√£o pode ser feito, pare e escute a si mesmo. Como sua resposta vai soar para seu chefe?\nEm vez de desculpas, forne√ßa op√ß√µes. N√£o diga que n√£o pode ser feito; explique o que pode ser feito para salvar a situa√ß√£o.\nPense consigo mesmo, como voc√™ reage quando algu√©m como um caixa de banco, um mec√¢nico, ou um balconista, lhe d√° uma desculpa esfarrapada? O que voc√™ acha deles e de sua empresa em decorr√™ncia disso? Por exemplo, quando voc√™ pede um prato do card√°pio, e a cozinha est√° em falta de um ingrediente essencial, voc√™ prefere que o gar√ßom venha apenas te dar a not√≠cia ou te d√™ alternativas para contornar o problema?\nEntropia de Software Em algumas cidades, alguns pr√©dios s√£o belos e limpos, enquanto outros s√£o estruturas deterioradas. Por qu√™? Pesquisadores descobriram um fascinante mecanismo acionador, um mecanismo que torna muito rapidamente um pr√©dio limpo, intacto e habitado em uma constru√ß√£o quebrada e abandonada: uma janela quebrada.\nUma janela quebrada, deixada sem reparos por um certo per√≠odo de tempo, faz brotar nos moradores uma sensa√ß√£o de abandono - uma sensa√ß√£o que os respons√°veis n√£o se preocupam com o pr√©dio. Portanto, outra janela √© quebrada. As pessoas come√ßam a acumular lixo na √°rea externa. Em um curto per√≠odo de tempo, o pr√©dio fica danificado demais para o propriet√°rio querer consert√°-lo e a sensa√ß√£o de abandono se torna realidade.\nN√£o deixe uma \u0026ldquo;janela quebrada\u0026rdquo; no seu c√≥digo. Ao ver uma pequena \u0026ldquo;bagun√ßa\u0026rdquo;, conserte-o, nem que seja com t√°buas de madeira. Se pensar \u0026ldquo;n√£o temos tempo para arrumar todas as janelas quebradas\u0026rdquo;, √© melhor planejar a compra de uma ca√ßamba ou mudar para outra vizinhan√ßa.\nSoftware Satisfat√≥rio N√£o existe software perfeito, ponto. Ficar polindo demais um software faz voc√™ nunca lan√ßar um produto. Os usu√°rios preferem ter algo limitado para usar agora, do que o produto completo da que um ano.\nSua carteira de conhecimentos Trate seu conhecimento como um investidor trata uma carteira de investimentos:\nInvista regularmente, como um h√°bito Diversifica√ß√£o √© a chave para o sucesso a longo prazo Tenha uma carteira equilibrada com investimentos conservadores e investimento de alto risco e remunera√ß√£o Compre barato e venda caro para obter o m√°ximo em retorno A carteira deve ser reexaminada e reestruturada periodicamente Prot√≥tipos Criar prot√≥tipos √© um ato de aprendizado. Um prot√≥tipo pode ser completamente descart√°vel, j√° que o valor n√£o est√° no c√≥digo produzido, mas nas li√ß√µes aprendidas. Essa √© a raz√£o real para a cria√ß√£o de prot√≥tipos.\nCoisas que devem ter um prot√≥tipo Arquitetura Nova funcionalidade em um sistema existente Estrutura ou conte√∫do de dados externos Ferramentas ou componentes de terceiros Quest√µes de desempenho Projeto de interface de usu√°rio Lembre-se: um prot√≥tipo n√£o √© um MVP, s√£o duas coisas diferentes.\nUm MVP √© o que o livro chama de proj√©til luminoso em que voc√™ constr√≥i algo m√≠nimo que funcione e que o c√≥digo pode e muito provavelmente vai ser reutilizado na vers√£o final. Um prot√≥tipo tem de ser algo r√°pido, que pode ser constru√≠do at√© mesmo com outras linguagens de mais alto n√≠vel da que seu projeto utiliza, ou pode at√© n√£o usar linguagem nenhuma!\nExemplo pr√°tico: O marketing quer discutir p√°ginas web com mapas clic√°veis ‚Äî talvez um carro, telefone ou casa. Voc√™ tem 15 minutos para mostrar prot√≥tipos. O que faz mais sentido: tentar montar algo \u0026ldquo;real\u0026rdquo; na stack do projeto ou fazer wireframes no Figma, esbo√ßos no Paint, ou at√© desenhos em um guardanapo?\nEstimando Que n√≠vel de exatid√£o √© suficientemente exato? At√© certo ponto, todas as respostas s√£o estimativas. S√≥ que algumas s√£o mais precisas do que outras. O que precisa ser levado em considera√ß√£o √© se √© necess√°rio um n√≠vel alto de precis√£o ou o que est√£o querendo √© um n√∫mero aproximado.\nPor exemplo, quando sua v√≥ pergunta quando voc√™ vai chegar, ela provavelmente est√° pensando se deve se preparar pra te receber com almo√ßo ou com jantar. Por outro lado, um mergulhador preso debaixo d\u0026rsquo;√°gua ficando sem oxig√™nio vai querer uma resposta expressa em segundos.\nUma coisa interessante das estimativas √© que a unidade usada faz diferen√ßa na percep√ß√£o dos resultados. Por exemplo, se disse que algo levar√° cerca de 130 dias √∫teis, as pessoas ter√£o expectativas de algo mais exato. No entanto, se disse \u0026ldquo;em cerca de 6 meses\u0026rdquo;, elas saber√£o que a margem de erro pode ser maior.\nO livro recomenda a seguinte tabela:\nDura√ß√£o Calcule a estimativa em 1-15 dias dias 3-8 semanas semanas 8-30 semanas meses mais de 30 semanas pense bem antes de dar uma estimativa Programa√ß√£o assertiva Nunca, NUNCA, voc√™ deve pensar:\nIsso nunca vai acontecer\u0026hellip;\n\u0026ldquo;count n√£o pode ser negativo\u0026rdquo;. \u0026ldquo;Esse comando printf nunca vai falhar\u0026rdquo;\nSempre que se pegar pensando \u0026ldquo;isso nunca vai acontecer\u0026rdquo;, adicione c√≥digo para verificar. A maneira mais f√°cil √© com asser√ß√µes. Lembre-se: se algo pode dar errado, eventualmente dar√°.\nOrgulho e preconceito Os artes√£os da antiguidade tinham orgulho em assinar seu trabalho. Voc√™ tamb√©m deveria ter.\nIsso n√£o significa tratar seu c√≥digo como propriedade intoc√°vel. Devemos respeitar o c√≥digo dos outros. \u0026ldquo;Trate os outros como gostaria de ser tratado.\u0026rdquo; Queremos ver orgulho na autoria: \u0026ldquo;Escrevi isso e sou respons√°vel pelo meu trabalho.\u0026rdquo;\nSua assinatura deve ser reconhecida como indicador de qualidade. As pessoas devem ver seu nome em um c√≥digo e esperar consist√™ncia, boa escrita, testes e documenta√ß√£o. Trabalho profissional de verdade. Com certeza, escrito por um programador pragm√°tico.\nDicas que o livro d√° Preocupe-se com seu trabalho Reflita sobre seu trabalho Forne√ßa op√ß√µes, n√£o d√™ desculpas esfarrapadas N√£o tolere janelas quebradas Seja um catalisador da mudan√ßa Lembre-se do cen√°rio em larga escala Torne a qualidade parte dos requisitos Invista regularmente em sua carteira de conhecimentos Analise criticamente o que voc√™ l√™ e ouve √â o que voc√™ diz e a maneira como diz DRY - Don\u0026rsquo;t Repeat Yourself Facilite a reutiliza√ß√£o Elimine efeitos entre elementos n√£o relacionados N√£o h√° decis√µes definitivas Use proj√©teis luminosos para encontrar o alvo Crie prot√≥tipos para aprender Programe em um n√≠vel pr√≥ximo ao dom√≠nio do problema Estime para evitar surpresas Reexamine o cronograma junto ao c√≥digo Mantenha as informa√ß√µes em texto simples Use o poder dos shells de comando Use um √∫nico editor bem Use sempre o controle de c√≥digo fonte Corrija o problema, esque√ßa o culpado N√£o entre em p√¢nico \u0026ldquo;select\u0026rdquo; n√£o est√° com defeito N√£o suponha, teste. Aprenda uma linguagem de manipula√ß√£o de texto Escreva um c√≥digo que crie c√≥digos Voc√™ n√£o conseguir√° criar um software perfeito Projete com contratos Encerre antecipadamente Se n√£o pode acontecer, use asser√ß√µes para assegurar que n√£o aconte√ßa Use exce√ß√µes para problemas excepcionais Acabe o que come√ßou Reduza a vincula√ß√£o entre m√≥dulos Configure, n√£o integre Coloque as abstra√ß√µes no c√≥digo e os detalhes em metadados Analise o fluxo de trabalho para melhorar a concorr√™ncia Projete usando servi√ßos Projete sempre pensando na concorr√™ncia Separe as visualiza√ß√µes dos modelos Use quadros-negros para coordenar o fluxo de trabalho N√£o programe por coincid√™ncia Estime a ordem de seus algoritmos Testes suas estimativas Refatore cedo, refatore sempre Projete para testar Teste seu software ou seus usu√°rios testar√£o N√£o use um c√≥digo de assistente que voc√™ n√£o entender N√£o colete requisitos - cave-os Trabalhe com um usu√°rio para pensar como um usu√°rio Abstra√ß√µes t√™m vida mais longa do que detalhes Use um gloss√°rio do projeto N√£o pense fora da caixa - encontre a caixa S√≥ comece quando estiver pronto Algumas coisas s√£o f√°ceis de fazer, mas n√£o de descrever N√£o seja escravo dos m√©todos formais Ferramentas caras n√£o produzem projetos melhores Organize as equipes com base na funcionalidade N√£o use procedimentos manuais Teste cedo. Teste sempre. Teste automaticamente A codifica√ß√£o s√≥ estar√° conclu√≠da ap√≥s todos os testes serem executados Use sabotadores para testar seus testes Teste a cobertura de estados e n√£o a cobertura de c√≥digo Encontre os erros apenas uma vez Trate o portugu√™s simplesmente como outra linguagem de programa√ß√£o Construa a documenta√ß√£o no c√≥digo, n√£o a acrescente como complemento Exceda gentilmente as expectativas de seus usu√°rios Assine seu trabalho ","permalink":"https://blog.felpo.dev/posts/sendo-um-programador-pragm%C3%A1tico/","summary":"\u003ch2 id=\"o-gato-comeu-meu-c√≥digo-fonte\"\u003eO gato comeu meu c√≥digo fonte\u003c/h2\u003e\n\u003cp\u003eSeja respons√°vel pelo c√≥digo que voc√™ escreve, reconhe√ßa quando cometer erros e lide com isso profissionalmente. Se acontecer uma falha e voc√™ n√£o tiver um plano de conting√™ncia, dizer ao seu chefe \u0026ldquo;o gato comeu meu c√≥digo\u0026rdquo; n√£o vai resolver.\u003c/p\u003e\n\u003cp\u003eAntes de abordar algu√©m para dizer que algo n√£o pode ser feito, pare e escute a si mesmo. Como sua resposta vai soar para seu chefe?\u003c/p\u003e","title":"Sendo um programador pragm√°tico"},{"content":"Tenho flertado com a arquitetura de software recentemente e esse livro caiu como uma luva. Como sempre, esse artigo √© mais para mim do que para qualquer outra pessoa.\nDetalhes Fazer um programa funcionar n√£o √© dif√≠cil, estudantes de ensino m√©dio ou fundamental fazem isso sem dificuldades. Mas fazer direito? Ah, isso sim √© dif√≠cil - √© como a diferen√ßa entre fazer um sandu√≠che e ser chef de um restaurante estrelado.\nO objetivo da arquitetura de software √© deixar o m√°ximo poss√≠vel de op√ß√µes abertas, pelo m√°ximo de tempo poss√≠vel. Quais op√ß√µes precisamos deixar em aberto? Detalhes que n√£o importam. √â como manter as portas abertas numa festa: voc√™ nunca sabe quando vai precisar de uma rota de fuga.\nTodo sistema de software pode ser decomposto em dois elementos principais: pol√≠tica e detalhes. O elemento pol√≠tico engloba todas as regras e procedimentos de neg√≥cios. A pol√≠tica √© onde est√° o verdadeiro valor do sistema - √© o cora√ß√£o que bombeia vida atrav√©s das art√©rias do c√≥digo.\nOs detalhes s√£o itens necess√°rios para que os seres humanos, outros sistemas e programadores se comuniquem com a pol√≠tica, mas que n√£o causam impacto algum sobre o comportamento da pol√≠tica (ou pelo menos n√£o deveriam). Eles incluem dispositivos de IO, banco de dados, sistemas web, servidores, frameworks, protocolos de comunica√ß√£o e assim por diante. S√£o como as roupas que vestimos: importantes para a intera√ß√£o social, mas n√£o definem quem somos por dentro.\nOs detalhes devem ser irrelevantes para a pol√≠tica. Isso permite que as decis√µes para esses detalhes sejam adiadas e deferidas - uma procrastina√ß√£o arquitetural produtiva, se voc√™ preferir.\nDeve haver um limite entre os detalhes e a pol√≠tica, sendo os detalhes algo como um plugin. Por exemplo, ao instalar um plugin no VS Code, nada que a equipe de desenvolvimento do plugin fa√ßa vai afetar o desenvolvimento do VSCode, mas a equipe de desenvolvimento do VSCode pode atrapalhar o desenvolvimento do plugin se quisesse. Queremos ter um relacionamento desse tipo nos nossos sistemas. Alguns m√≥dulos devem ser imunes a outros. N√£o queremos que uma mudan√ßa no schema do banco de dados interfira na regra de neg√≥cio, mas o contr√°rio pode acontecer. √â uma rela√ß√£o unilateral, como aquela amizade onde s√≥ uma pessoa pode cancelar os planos de √∫ltima hora.\nArquitetura Gritante Imagine olhando para a planta de um pr√©dio. Esse documento, preparado por um arquiteto, estabelece os planos para a constru√ß√£o de um pr√©dio. O que dizem esses planos?\nSe esses planos forem para uma resid√™ncia familiar, voc√™ provavelmente ver√° uma entrada frontal, uma sala e talvez uma sala de jantar. Provavelmente haver√° uma cozinha a uma curta dist√¢ncia, perto da sala de jantar. Talvez haja uma pequena √°rea para fazer refei√ß√µes pr√≥xima √† cozinha e, provavelmente, um quarto perto dela. Quando voc√™ observa esses planos, sem d√∫vida est√° vendo uma resid√™ncia familiar. A arquitetura grita: \u0026ldquo;CASA\u0026rdquo;.\nAgora suponha que voc√™ esteja olhando a arquitetura de uma biblioteca. Voc√™ provavelmente ver√° uma grande entrada, uma √°rea para empr√©stimo/devolu√ß√£o de livros, √°reas de leitura, pequenas salas de confer√™ncia e uma sequ√™ncia de galerias, com capacidade para reunir estantes com todos os livros da biblioteca. Essa arquitetura grita: \u0026ldquo;BIBLIOTECA\u0026rdquo;.\nEnt√£o, o que grita a arquitetura da sua aplica√ß√£o? Quando voc√™ olha a estrutura de diret√≥rios de n√≠vel mais alto e os arquivos-fonte no pacote de n√≠vel mais alto, eles gritam \u0026ldquo;Sistema de Sa√∫de\u0026rdquo;, \u0026ldquo;Sistema de Contabilidade\u0026rdquo; ou \u0026ldquo;Sistema de Gest√£o de Invent√°rio\u0026rdquo;? Ou gritam \u0026ldquo;Rails\u0026rdquo;, \u0026ldquo;Laravel\u0026rdquo; ou \u0026ldquo;ASP\u0026rdquo;? Se sua aplica√ß√£o grita o nome de um framework, talvez seja hora de repensar suas prioridades arquiteturais - √© como ter uma casa que grita \u0026ldquo;IKEA\u0026rdquo; em vez de \u0026ldquo;LAR\u0026rdquo;.\nArquiteturas n√£o se resumem a frameworks. Arquiteturas n√£o devem ser estabelecidas por frameworks. Os frameworks s√£o ferramentas √† nossa disposi√ß√£o e n√£o arquiteturas a que devemos nos resignar. Se a sua arquitetura √© baseada em frameworks, ela n√£o pode ser baseada em casos de uso.\nBoas arquiteturas devem ser centradas em casos de uso para que os arquitetos possam descrever com seguran√ßa as estruturas que suportam esses casos de uso, sem se comprometerem com frameworks, ferramentas e ambientes. Novamente, considere os planos de uma casa. A primeira preocupa√ß√£o de um arquiteto √© garantir que a casa seja us√°vel e n√£o garantir que a casa seja feita de tijolos. Afinal, ningu√©m quer morar numa \u0026ldquo;casa de tijolos\u0026rdquo; quando o que realmente importa √© ter um lar funcional.\nArquitetura Limpa Independente da arquitetura escolhida, uma boa arquitetura deve produzir um sistema com as seguintes caracter√≠sticas:\nIndependente de framework - Frameworks v√™m e v√£o como modas; sua arquitetura deve ser mais atemporal que uma pe√ßa cl√°ssica do guarda-roupa Test√°vel - As regras de neg√≥cio podem ser testadas sem UI, banco de dados, servidor web ou qualquer outro elemento externo Independente de UI - Uma UI web pode ser substitu√≠da por uma UI de console, por exemplo, sem alterar as regras de neg√≥cio Independente de banco de dados - MySQL hoje, PostgreSQL amanh√£, quem sabe NoSQL depois de amanh√£ Independente de qualquer fator externo - Suas regras de neg√≥cio n√£o sabem nada sobre as interfaces do mundo externo Com isso em mente, Uncle Bob chegou no seguinte diagrama: A regra primordial dessa arquitetura √© a regra da depend√™ncia:\nAs depend√™ncias de c√≥digo-fonte devem apontar apenas para dentro, na dire√ß√£o das pol√≠ticas de mais alto n√≠vel\nOs elementos de um c√≠rculo interno n√£o podem saber nada sobre os elementos de um c√≠rculo externo. √â como uma hierarquia social bem definida, mas no mundo do c√≥digo.\nEntidades Re√∫nem as Regras Cruciais de Neg√≥cios (regras que geram receita ou diminuem custos, independente de sistema). Uma entidade pode ser um objeto com m√©todos ou um conjunto de estrutura de dados e fun√ß√µes. S√£o as joias da coroa do seu sistema - protegidas no cofre mais interno da arquitetura.\nCasos de Uso Cont√©m as regras de neg√≥cio espec√≠ficas da aplica√ß√£o. Ele re√∫ne e implementa todos os casos de uso do sistema. Esses casos de uso orquestram o fluxo de dados para e a partir das entidades e orientam essas entidades na aplica√ß√£o das Regras Cruciais de Neg√≥cios a fim de atingir os objetivos do caso de uso. S√£o como maestros de uma orquestra, coordenando as entidades para criar uma sinfonia de funcionalidades.\nAdaptadores de Interface Essa camada consiste em um conjunto de adaptadores que convertem dados no formato que √© mais conveniente para os casos de uso e entidades, para o formato mais conveniente para algum agente externo como a base de dados ou a web. √â nessa camada que cont√©m o MVC. Os presenters, views e controllers pertencem √† camada de adaptadores de interface. As models provavelmente s√£o apenas estruturas de dados transmitidas dos controllers para os casos de uso, e ent√£o, dos casos de uso para os presenters e views.\nDa mesma forma, os dados dessa camada s√£o convertidos da forma mais conveniente para entidades e casos de uso para a forma mais conveniente para o framework de persist√™ncia em uso (por exemplo, o banco de dados). Nenhum c√≥digo interno desse c√≠rculo deve saber nada sobre o banco de dados. Se o banco for SQL, todo o SQL deve ser escrito nessa camada.\nTamb√©m deve ter outro adaptador nessa camada para converter dados de forma externa, como uma API, para a forma interna usada pelos casos de uso e entidades. √â a camada de tradu√ß√£o simult√¢nea do seu sistema.\nFrameworks e Drivers Em geral, voc√™ n√£o programa muita coisa nessa camada al√©m do c√≥digo de associa√ß√£o que estabelece uma comunica√ß√£o com o c√≠rculo interno seguinte. √â como a recep√ß√£o de um pr√©dio: importante para fazer as conex√µes, mas n√£o √© onde acontece o trabalho real.\nConclus√£o A Arquitetura Limpa n√£o √© apenas mais um padr√£o arquitetural da moda - √© uma filosofia de design que prioriza a longevidade e manutenibilidade do c√≥digo sobre a conveni√™ncia imediata. Ao separar claramente as responsabilidades e manter as depend√™ncias apontando sempre para dentro, criamos sistemas que s√£o resilientes a mudan√ßas e adapt√°veis √†s necessidades futuras.\nLembre-se: frameworks s√£o como relacionamentos - alguns podem durar para sempre, mas √© melhor estar preparado para mudan√ßas. Construa seu sistema pensando no longo prazo, mantenha suas regras de neg√≥cio protegidas no n√∫cleo da arquitetura e trate os detalhes t√©cnicos como o que eles realmente s√£o: detalhes substitu√≠veis.\nNo final das contas, uma boa arquitetura √© como uma boa piada: se voc√™ precisar explicar demais, provavelmente n√£o est√° funcionando. Sua arquitetura deve ser t√£o clara que qualquer desenvolvedor possa olhar para ela e imediatamente entender do que se trata o sistema. Porque se ap√≥s seis meses voc√™ mesmo n√£o conseguir entender o que estava pensando quando escreveu aquele c√≥digo, imagine um colega de equipe tentando decifrar seus hier√≥glifos arquiteturais.\nArquitetura de software √©, no fim, sobre tomar decis√µes pensando no futuro. E como diria qualquer arquiteto que se preze: √© melhor planejar duas vezes e construir uma vez, do que construir tr√™s vezes e chorar eternamente.\n","permalink":"https://blog.felpo.dev/posts/as-partes-importantes-de-clean-architecture-arquitetura-limpa/","summary":"\u003cp\u003eTenho flertado com a arquitetura de software recentemente e esse livro caiu como uma luva. Como sempre, esse artigo √© mais para mim do que para qualquer outra pessoa.\u003c/p\u003e\n\u003ch2 id=\"detalhes\"\u003eDetalhes\u003c/h2\u003e\n\u003cp\u003eFazer um programa funcionar n√£o √© dif√≠cil, estudantes de ensino m√©dio ou fundamental fazem isso sem dificuldades. Mas fazer direito? Ah, isso sim √© dif√≠cil - √© como a diferen√ßa entre fazer um sandu√≠che e ser chef de um restaurante estrelado.\u003c/p\u003e","title":"As partes importantes de Clean Architecture (Arquitetura Limpa)"},{"content":"Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o Princ√≠pio da Invers√£o de Depend√™ncia (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.\nO Drama Antes da Invers√£o Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:\nclass EmailService { public function send(string $message): void { echo \u0026#34;Enviando email: \u0026#34; . $message . \u0026#34;\\n\u0026#34;; } } class NotificationManager { private EmailService $emailService; public function __construct() { $this-\u0026gt;emailService = new EmailService(); // üö® Bandeira vermelha! } public function notify(string $message): void { $this-\u0026gt;emailService-\u0026gt;send($message); } } Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua NotificationManager est√° completamente dependente da EmailService. Quer trocar por SMS? Vai ter de refatorar a classe.\nO Princ√≠pio que Salva Vidas (e C√≥digos) O DIP nos diz duas coisas fundamentais:\nM√≥dulos de alto n√≠vel n√£o devem depender de m√≥dulos de baixo n√≠vel. Ambos devem depender de abstra√ß√µes. Abstra√ß√µes n√£o devem depender de detalhes. Detalhes devem depender de abstra√ß√µes. Traduzindo para portugu√™s humano: \u0026ldquo;Pare de casar com implementa√ß√µes espec√≠ficas. Prefira contratos (interfaces) que podem ser cumpridos por diferentes fornecedores.\u0026rdquo;\nA Reden√ß√£o Atrav√©s da Abstra√ß√£o Vamos refatorar nosso drama mexicano:\ninterface NotificationServiceInterface { public function send(string $message): void; } class EmailService implements NotificationServiceInterface { public function send(string $message): void { echo \u0026#34;üìß Enviando email: \u0026#34; . $message . \u0026#34;\\n\u0026#34;; } } class SmsService implements NotificationServiceInterface { public function send(string $message): void { echo \u0026#34;üì± Enviando SMS: \u0026#34; . $message . \u0026#34;\\n\u0026#34;; } } class SlackService implements NotificationServiceInterface { public function send(string $message): void { echo \u0026#34;üí¨ Postando no Slack: \u0026#34; . $message . \u0026#34;\\n\u0026#34;; } } class NotificationManager { private NotificationServiceInterface $notificationService; public function __construct(NotificationServiceInterface $notificationService) { $this-\u0026gt;notificationService = $notificationService; // ‚úÖ Agora sim! } public function notify(string $message): void { $this-\u0026gt;notificationService-\u0026gt;send($message); } } Agora sim! Sua NotificationManager n√£o sabe (nem quer saber) se est√° lidando com email, SMS ou pombo correio. Ela s√≥ sabe que precisa de algo que implemente NotificationServiceInterface.\nUsando o C√≥digo Libertado // Criando diferentes tipos de notifica√ß√£o $emailNotifier = new NotificationManager(new EmailService()); $smsNotifier = new NotificationManager(new SmsService()); $slackNotifier = new NotificationManager(new SlackService()); $message = \u0026#34;Seu pedido foi processado!\u0026#34;; $emailNotifier-\u0026gt;notify($message); // üìß Enviando email: Seu pedido foi processado! $smsNotifier-\u0026gt;notify($message); // üì± Enviando SMS: Seu pedido foi processado! $slackNotifier-\u0026gt;notify($message); // üí¨ Postando no Slack: Seu pedido foi processado! Um Exemplo Mais Realista: Sistema de Pagamento Vamos complicar um pouquinho com um cen√°rio mais pr√≥ximo da vida real:\ninterface PaymentGatewayInterface { public function processPayment(float $amount, array $paymentData): bool; public function getTransactionId(): string; } class PayPalGateway implements PaymentGatewayInterface { private string $transactionId; public function processPayment(float $amount, array $paymentData): bool { $this-\u0026gt;transactionId = \u0026#39;PAYPAL_\u0026#39; . uniqid(); echo \u0026#34;üí≥ Processando R$ {$amount} via PayPal\\n\u0026#34;; return true; // Simula sucesso } public function getTransactionId(): string { return $this-\u0026gt;transactionId; } } class StripeGateway implements PaymentGatewayInterface { private string $transactionId; public function processPayment(float $amount, array $paymentData): bool { $this-\u0026gt;transactionId = \u0026#39;STRIPE_\u0026#39; . uniqid(); echo \u0026#34;üí∞ Processando R$ {$amount} via Stripe\\n\u0026#34;; return true; // Simula sucesso } public function getTransactionId(): string { return $this-\u0026gt;transactionId; } } class PaymentProcessor { private PaymentGatewayInterface $gateway; public function __construct(PaymentGatewayInterface $gateway) { $this-\u0026gt;gateway = $gateway; } public function processOrder(float $amount, array $customerData): array { echo \u0026#34;üõí Processando pedido...\\n\u0026#34;; $success = $this-\u0026gt;gateway-\u0026gt;processPayment($amount, $customerData); if ($success) { return [ \u0026#39;status\u0026#39; =\u0026gt; \u0026#39;approved\u0026#39;, \u0026#39;transaction_id\u0026#39; =\u0026gt; $this-\u0026gt;gateway-\u0026gt;getTransactionId(), \u0026#39;amount\u0026#39; =\u0026gt; $amount ]; } return [\u0026#39;status\u0026#39; =\u0026gt; \u0026#39;failed\u0026#39;]; } } // Uso flex√≠vel $paypalProcessor = new PaymentProcessor(new PayPalGateway()); $stripeProcessor = new PaymentProcessor(new StripeGateway()); $customerData = [\u0026#39;email\u0026#39; =\u0026gt; \u0026#39;cliente@exemplo.com\u0026#39;]; $result1 = $paypalProcessor-\u0026gt;processOrder(99.90, $customerData); $result2 = $stripeProcessor-\u0026gt;processOrder(149.90, $customerData); print_r($result1); print_r($result2); Por Que Isso √© Genial? Flexibilidade: Quer trocar de PayPal para Stripe? S√≥ mudar na inje√ß√£o de depend√™ncia. Testabilidade: Pode criar mocks das interfaces para testes unit√°rios. Manutenibilidade: Mudan√ßas em uma implementa√ß√£o n√£o afetam o resto do sistema. Extensibilidade: Novo gateway? S√≥ implementar a interface. A Moral da Hist√≥ria O Princ√≠pio da Invers√£o de Depend√™ncia √© como ter um relacionamento maduro: voc√™ n√£o precisa controlar cada detalhe do outro, apenas estabelecer expectativas claras (interfaces) e confiar que ser√£o cumpridas.\nSeu c√≥digo fica mais flex√≠vel, seus testes ficam mais f√°ceis, e voc√™ dorme melhor sabendo que n√£o vai precisar reescrever meio sistema s√≥ porque o cliente decidiu trocar de fornecedor de pagamento.\nLembre-se: dependa de abstra√ß√µes, n√£o de implementa√ß√µes. Seu futuro eu (e seus colegas de equipe) v√£o agradecer!\n","permalink":"https://blog.felpo.dev/posts/solid-dependency-inversion-principle/","summary":"\u003cp\u003eVoc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o \u003cstrong\u003ePrinc√≠pio da Invers√£o de Depend√™ncia\u003c/strong\u003e (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.\u003c/p\u003e\n\u003ch2 id=\"o-drama-antes-da-invers√£o\"\u003eO Drama Antes da Invers√£o\u003c/h2\u003e\n\u003cp\u003eImagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-php\" data-lang=\"php\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEmailService\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esend\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003estring\u003c/span\u003e $message)\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evoid\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eecho\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Enviando email: \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e $message \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eNotificationManager\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eprivate\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEmailService\u003c/span\u003e $emailService;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e __construct()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $this\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eemailService\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEmailService\u003c/span\u003e(); \u003cspan style=\"color:#75715e\"\u003e// üö® Bandeira vermelha!\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003epublic\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003enotify\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003estring\u003c/span\u003e $message)\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evoid\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        $this\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eemailService\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003esend\u003c/span\u003e($message);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eParece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua \u003ccode\u003eNotificationManager\u003c/code\u003e est√° \u003cstrong\u003ecompletamente\u003c/strong\u003e dependente da \u003ccode\u003eEmailService\u003c/code\u003e. Quer trocar por SMS? Vai ter de refatorar a classe.\u003c/p\u003e","title":"SOLID Dependency Inversion Principle"},{"content":"O Princ√≠pio de Segrega√ß√£o de Interface, formulado por Robert C. Martin (tamb√©m conhecido como Uncle Bob), estabelece uma regra simples: nenhum cliente deve ser for√ßado a depender de m√©todos que n√£o utiliza.\nEm termos pr√°ticos, isso significa que √© melhor ter v√°rias interfaces pequenas e espec√≠ficas do que uma interface gigantesca que tenta resolver todos os problemas do universo. √â como tentar usar um √∫nico aplicativo para programar, editar imagens, gerenciar finan√ßas e tocar m√∫sica ‚Äî no fim, ele faz tudo de forma mediana ou mal feita. J√° ferramentas especializadas, como um editor de c√≥digo, um software de design e um app de contabilidade, cada uma focada em seu prop√≥sito, entregam muito mais valor.\nO Problema das Interfaces Gordas Imagine que voc√™ est√° desenvolvendo um sistema para uma biblioteca e cria uma interface chamada IFuncionario com os seguintes m√©todos:\n- catalogarLivros() - atenderClientes() - limparBanheiros() - fazerCafe() - programarSistema() - dirigirBibliotecaBus() - ensinarCriancas() √Ä primeira vista, pode parecer eficiente ter uma interface que cubra todas as responsabilidades poss√≠veis de um funcion√°rio. Afinal, economiza tempo de design, n√£o √© mesmo? Errado. Isso √© o equivalente program√°tico de pedir para um bibliotec√°rio tamb√©m ser faxineiro, barista, desenvolvedor de software, motorista e professor ‚Äî tudo ao mesmo tempo.\nO resultado √© que qualquer classe que implemente IFuncionario ser√° obrigada a implementar m√©todos que podem n√£o fazer sentido para seu contexto espec√≠fico. O bibliotec√°rio respons√°vel apenas pelo atendimento ao p√∫blico ter√° que implementar programarSistema() retornando uma exce√ß√£o ou, pior ainda, um m√©todo vazio que n√£o faz absolutamente nada ‚Äî o que √© o equivalente digital de um suspiro resignado.\nA Solu√ß√£o Elegante O ISP sugere quebrar essa interface monol√≠tica em v√°rias interfaces menores e mais espec√≠ficas:\n- IAtendente: atenderClientes() - ICatalogador: catalogarLivros() - ILimpeza: limparBanheiros() - IDesenvolvedor: programarSistema() - IMotorista: dirigirBibliotecaBus() Agora, cada classe pode implementar apenas as interfaces que fazem sentido para seu papel espec√≠fico. O atendente implementa IAtendente, o programador implementa IDesenvolvedor, e o funcion√°rio multitalentoso (que sempre existe em toda organiza√ß√£o) pode implementar m√∫ltiplas interfaces conforme necess√°rio.\nBenef√≠cios Pr√°ticos A aplica√ß√£o correta do ISP traz vantagens tang√≠veis que v√£o muito al√©m da satisfa√ß√£o est√©tica de ter c√≥digo bem organizado:\nManutenibilidade: Quando voc√™ precisa modificar um m√©todo relacionado ao atendimento ao cliente, apenas as classes que implementam IAtendente s√£o potencialmente afetadas. N√£o h√° risco de quebrar acidentalmente o sistema de cataloga√ß√£o porque algu√©m mudou uma assinatura de m√©todo.\nEfici√™ncia de Compila√ß√£o: Em linguagens compiladas como C++, Java ou C#, este benef√≠cio √© particularmente relevante. Quando voc√™ modifica apenas a interface IAtendente, o compilador precisa recompilar somente as classes que dependem dessa interface espec√≠fica. Com uma interface monol√≠tica como IFuncionario, uma mudan√ßa em qualquer m√©todo for√ßaria a recompila√ß√£o de todas as classes que implementam a interface, mesmo aquelas que n√£o utilizam o m√©todo modificado. Em projetos grandes, isso pode significar a diferen√ßa entre uma compila√ß√£o de 30 segundos e uma de 20 minutos ‚Äî tempo suficiente para fazer um caf√© e questionar suas escolhas de carreira.\nTestabilidade: Testes unit√°rios ficam mais simples e focados. Voc√™ pode testar especificamente as funcionalidades de atendimento sem se preocupar com a complexidade desnecess√°ria de m√©todos n√£o relacionados.\nFlexibilidade: Novas funcionalidades podem ser adicionadas atrav√©s de novas interfaces espec√≠ficas, sem impactar implementa√ß√µes existentes. √â como adicionar novos c√¥modos a uma casa sem precisar reformar a estrutura inteira.\nClareza de C√≥digo: Cada interface comunica claramente sua inten√ß√£o. Quando algu√©m v√™ uma classe implementando ICatalogador, imediatamente entende que essa classe tem responsabilidades relacionadas √† cataloga√ß√£o de livros.\nQuando Segregar (E Quando N√£o Segregar) Como todo princ√≠pio de engenharia de software, o ISP deve ser aplicado com bom senso. N√£o faz sentido criar uma interface separada para cada m√©todo individual ‚Äî isso seria como ter um funcion√°rio espec√≠fico para cada letra do alfabeto em uma biblioteca.\nA segrega√ß√£o deve ser baseada em responsabilidades coesas e comportamentos relacionados. Se dois m√©todos frequentemente s√£o utilizados juntos e raramente separados, provavelmente pertencem √† mesma interface.\nConclus√£o O Princ√≠pio de Segrega√ß√£o de Interface √©, essencialmente, uma aplica√ß√£o do bom senso organizacional ao mundo da programa√ß√£o. Assim como n√£o esperar√≠amos que um √∫nico funcion√°rio dominasse todas as habilidades poss√≠veis de uma organiza√ß√£o, n√£o devemos esperar que uma √∫nica interface cubra todas as responsabilidades poss√≠veis de um sistema.\nImplementar o ISP corretamente pode parecer mais trabalhoso inicialmente ‚Äî afinal, √© mais f√°cil jogar tudo em uma interface gigante do que pensar cuidadosamente sobre responsabilidades e segrega√ß√µes apropriadas. Por√©m, assim como investir tempo organizando sua casa evita horas procurando as chaves do carro, investir tempo em interfaces bem segregadas economiza dias de debugging e refatora√ß√£o no futuro.\nNo final das contas, o ISP nos lembra de que, no desenvolvimento de software, como na vida, especializa√ß√£o e foco geralmente produzem melhores resultados do que tentar ser especialista em tudo ao mesmo tempo. E isso, felizmente, √© uma li√ß√£o que n√£o requer uma interface para ser implementada.\n","permalink":"https://blog.felpo.dev/posts/solid-interface-segregation-principle/","summary":"\u003cp\u003eO Princ√≠pio de Segrega√ß√£o de Interface, formulado por Robert C. Martin (tamb√©m conhecido como Uncle Bob), estabelece uma regra simples: \u003cem\u003enenhum cliente deve ser for√ßado a depender de m√©todos que n√£o utiliza\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eEm termos pr√°ticos, isso significa que √© melhor ter v√°rias interfaces pequenas e espec√≠ficas do que uma interface gigantesca que tenta resolver todos os problemas do universo. √â como tentar usar um √∫nico aplicativo para programar, editar imagens, gerenciar finan√ßas e tocar m√∫sica ‚Äî no fim, ele faz tudo de forma mediana ou mal feita. J√° ferramentas especializadas, como um editor de c√≥digo, um software de design e um app de contabilidade, cada uma focada em seu prop√≥sito, entregam muito mais valor.\u003c/p\u003e","title":"SOLID Interface Segregation Principle"},{"content":"Se voc√™ j√° se perguntou por que √†s vezes sua hierarquia de classes parece mais bagun√ßada que uma gaveta de cabos, talvez seja hora de conhecer Barbara Liskov e seu famoso princ√≠pio.\nA Defini√ß√£o Formal (Ou: Como Falar Dif√≠cil Para Impressionar) Barbara Liskov, em 1987, definiu formalmente seu princ√≠pio da seguinte maneira:\nSe œÜ(x) √© uma propriedade demonstr√°vel dos objetos x de tipo T, ent√£o œÜ(y) deve ser verdadeiro para objetos y de tipo S, onde S √© um subtipo de T.\nTraduzindo para o portugu√™s humano: se voc√™ pode trocar um objeto pai por um objeto filho sem quebrar o programa, ent√£o voc√™ est√° seguindo o princ√≠pio corretamente. √â como dizer que todo filho deve conseguir fazer pelo menos o que o pai faz, sem birras ou surpresas desagrad√°veis.\nO Problema Cl√°ssico: Quadrado vs. Ret√¢ngulo Vamos ao exemplo que d√° arrepios em todo programador que j√° tentou modelar geometria: a rela√ß√£o entre quadrado e ret√¢ngulo.\n√Ä primeira vista, parece l√≥gico: matematicamente, um quadrado √© um ret√¢ngulo especial (onde largura = altura). Ent√£o, por que n√£o fazer heran√ßa?\n\u0026lt;?php class Retangulo { protected $largura; protected $altura; public function setLargura($largura) { $this-\u0026gt;largura = $largura; } public function setAltura($altura) { $this-\u0026gt;altura = $altura; } public function getLargura() { return $this-\u0026gt;largura; } public function getAltura() { return $this-\u0026gt;altura; } public function getArea() { return $this-\u0026gt;largura * $this-\u0026gt;altura; } } class Quadrado extends Retangulo { public function setLargura($largura) { $this-\u0026gt;largura = $largura; $this-\u0026gt;altura = $largura; // Opa! Alterando os dois } public function setAltura($altura) { $this-\u0026gt;altura = $altura; $this-\u0026gt;largura = $altura; // Opa! Alterando os dois } } Agora vem o problema. Considere este c√≥digo que funciona perfeitamente com um ret√¢ngulo:\nfunction testeRetangulo(Retangulo $retangulo) { $retangulo-\u0026gt;setLargura(5); $retangulo-\u0026gt;setAltura(4); // Esperamos √°rea = 20 echo \u0026#34;√Årea esperada: 20, √Årea real: \u0026#34; . $retangulo-\u0026gt;getArea() . \u0026#34;\\n\u0026#34;; // Esperamos largura = 5 echo \u0026#34;Largura esperada: 5, Largura real: \u0026#34; . $retangulo-\u0026gt;getLargura() . \u0026#34;\\n\u0026#34;; } // Com ret√¢ngulo funciona perfeitamente $retangulo = new Retangulo(); testeRetangulo($retangulo); // √Årea: 20, Largura: 5 // Com quadrado... ops! $quadrado = new Quadrado(); testeRetangulo($quadrado); // √Årea: 16, Largura: 4 üò± Boom! O princ√≠pio foi violado. O quadrado n√£o pode ser substitu√≠do transparentemente pelo ret√¢ngulo porque altera o comportamento esperado.\nUm Exemplo Mais Divertido: Patos e Suas Peculiaridades Vamos a um exemplo mais leve. Imagine que estamos modelando patos para um sistema de fazenda virtual:\n\u0026lt;?php abstract class Pato { abstract public function nadar(); abstract public function voar(); abstract public function grasnar(); } class PatoComum extends Pato { public function nadar() { return \u0026#34;Nadando graciosamente na lagoa\u0026#34;; } public function voar() { return \u0026#34;Voando baixo sobre a √°gua\u0026#34;; } public function grasnar() { return \u0026#34;Quack quack!\u0026#34;; } } class PatoDeBorracha extends Pato { public function nadar() { return \u0026#34;Flutuando na banheira\u0026#34;; } public function voar() { // Problema! Pato de borracha n√£o voa throw new Exception(\u0026#34;Patos de borracha n√£o voam, apenas em sonhos!\u0026#34;); } public function grasnar() { return \u0026#34;Squeak squeak!\u0026#34;; } } Agora temos um problema similar:\nfunction simularVidaDoPato(Pato $pato) { echo $pato-\u0026gt;nadar() . \u0026#34;\\n\u0026#34;; echo $pato-\u0026gt;voar() . \u0026#34;\\n\u0026#34;; // Vai quebrar com PatoDeBorracha! echo $pato-\u0026gt;grasnar() . \u0026#34;\\n\u0026#34;; } $patoComum = new PatoComum(); simularVidaDoPato($patoComum); // Funciona perfeitamente $patoBorracha = new PatoDeBorracha(); simularVidaDoPato($patoBorracha); // Exception! üí• A Solu√ß√£o: Repensando a Hierarquia Para resolver esses problemas, precisamos repensar nossa hierarquia. Uma abordagem seria usar composi√ß√£o ou interfaces mais espec√≠ficas:\n\u0026lt;?php interface Nadador { public function nadar(); } interface Voador { public function voar(); } interface Grasnador { public function grasnar(); } class PatoComum implements Nadador, Voador, Grasnador { public function nadar() { return \u0026#34;Nadando graciosamente na lagoa\u0026#34;; } public function voar() { return \u0026#34;Voando baixo sobre a √°gua\u0026#34;; } public function grasnar() { return \u0026#34;Quack quack!\u0026#34;; } } class PatoDeBorracha implements Nadador, Grasnador { public function nadar() { return \u0026#34;Flutuando na banheira\u0026#34;; } public function grasnar() { return \u0026#34;Squeak squeak!\u0026#34;; } } // Agora podemos ser mais espec√≠ficos sobre o que esperamos function fazerNadar(Nadador $nadador) { echo $nadador-\u0026gt;nadar() . \u0026#34;\\n\u0026#34;; } function fazerVoar(Voador $voador) { echo $voador-\u0026gt;voar() . \u0026#34;\\n\u0026#34;; } Para o Problema do Quadrado e Ret√¢ngulo \u0026lt;?php interface Forma { public function getArea(); } class Retangulo implements Forma { public function __construct(private int $largura, private int $altura) {} public function setDimensoes($largura, $altura) { $this-\u0026gt;largura = $largura; $this-\u0026gt;altura = $altura; } public function getArea() { return $this-\u0026gt;largura * $this-\u0026gt;altura; } public function getLargura() { return $this-\u0026gt;largura; } public function getAltura() { return $this-\u0026gt;altura; } } class Quadrado implements Forma { public function __construct(private int $lado) {} public function setLado($lado) { $this-\u0026gt;lado = $lado; } public function getArea() { return $this-\u0026gt;lado * $this-\u0026gt;lado; } public function getLado() { return $this-\u0026gt;lado; } } Conclus√£o: O Princ√≠pio em A√ß√£o O Princ√≠pio de Substitui√ß√£o de Liskov nos ensina que heran√ßa n√£o √© apenas sobre \u0026ldquo;√© um tipo de\u0026rdquo;, mas sobre comportamento consistente. Antes de criar uma hierarquia, pergunte-se:\nO objeto filho pode fazer tudo que o pai faz? O comportamento permanece consistente e previs√≠vel? N√£o h√° surpresas ou exce√ß√µes inesperadas? Se a resposta for n√£o para qualquer uma dessas perguntas, talvez seja hora de repensar sua abordagem. Lembre-se: nem todo relacionamento do mundo real deve ser modelado com heran√ßa no c√≥digo.\n","permalink":"https://blog.felpo.dev/posts/solid-liskov-substitution-principle/","summary":"\u003cp\u003eSe voc√™ j√° se perguntou por que √†s vezes sua hierarquia de classes parece mais bagun√ßada que uma gaveta de cabos, talvez seja hora de conhecer Barbara Liskov e seu famoso princ√≠pio.\u003c/p\u003e\n\u003ch2 id=\"a-defini√ß√£o-formal-ou-como-falar-dif√≠cil-para-impressionar\"\u003eA Defini√ß√£o Formal (Ou: Como Falar Dif√≠cil Para Impressionar)\u003c/h2\u003e\n\u003cp\u003eBarbara Liskov, em 1987, definiu formalmente seu princ√≠pio da seguinte maneira:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eSe œÜ(x) √© uma propriedade demonstr√°vel dos objetos x de tipo T, ent√£o œÜ(y) deve ser verdadeiro para objetos y de tipo S, onde S √© um subtipo de T.\u003c/strong\u003e\u003c/p\u003e","title":"SOLID Liskov Substitution Principle"},{"content":"Se voc√™ j√° trabalhou com c√≥digo por mais de cinco minutos, provavelmente j√° passou pela seguinte situa√ß√£o: voc√™ precisa adicionar uma nova funcionalidade e, de repente, percebe que vai ter que mexer em 47 arquivos diferentes, quebrar 23 testes e rezar para tr√™s santos diferentes para que tudo continue funcionando.\nBem-vindo ao mundo maravilhoso do c√≥digo que n√£o segue o Princ√≠pio Aberto/Fechado (Open/Closed Principle), a segunda letra do acr√¥nimo SOLID!\nO Que √â Esse Tal de Princ√≠pio Aberto/Fechado? O princ√≠pio √© bem simples de entender:\n\u0026ldquo;As entidades de software devem estar abertas para extens√£o, mas fechadas para modifica√ß√£o\u0026rdquo;\nTraduzindo para o portugu√™s brasileiro: seu c√≥digo deve ser como um jogo bem feito: voc√™ pode instalar novas expans√µes para adicionar mundos e personagens, sem precisar reescrever o jogo base. Voc√™ pode adicionar novas funcionalidades (extens√£o) sem precisar mexer no c√≥digo existente (modifica√ß√£o).\n√â como construir uma casa modular: voc√™ pode adicionar novos c√¥modos sem derrubar as paredes que j√° existem.\nO Exemplo Cl√°ssico: O Pesadelo do Calculador de √Åreas Vamos come√ßar com um exemplo que vai fazer voc√™ se identificar\nO C√≥digo Que Quebra Tudo \u0026lt;?php class Rectangle { public $width; public $height; public function __construct(public int $width, public int $height) { $this-\u0026gt;width = $width; $this-\u0026gt;height = $height; } } class Circle { public $radius; public function __construct($radius) { $this-\u0026gt;radius = $radius; } } class AreaCalculator { public function calculateArea($shape) { if ($shape instanceof Rectangle) { return $shape-\u0026gt;width * $shape-\u0026gt;height; } elseif ($shape instanceof Circle) { return pi() * $shape-\u0026gt;radius * $shape-\u0026gt;radius; } throw new InvalidArgumentException(\u0026#34;Forma n√£o suportada!\u0026#34;); } } // Uso $calculator = new AreaCalculator(); $rectangle = new Rectangle(5, 10); $circle = new Circle(3); echo $calculator-\u0026gt;calculateArea($rectangle); // 50 echo $calculator-\u0026gt;calculateArea($circle); // ~28.27 Parece inofensivo, n√©? Mas agora imagine que seu chefe chega na segunda-feira e fala: \u0026ldquo;Precisamos calcular a √°rea de tri√¢ngulos tamb√©m!\u0026rdquo;\nVoc√™ vai ter que:\nCriar a classe Triangle MODIFICAR a classe AreaCalculator (viola√ß√£o do princ√≠pio!) Adicionar mais um elseif Torcer para n√£o quebrar nada E quando ele pedir hex√°gonos? E dodec√°gonos? E pol√≠gonos de 47 lados que ele viu em um sonho? Seu m√©todo vai virar uma cadeia de if/elseif maior que a constitui√ß√£o brasileira!\nO C√≥digo Que Segue o Princ√≠pio \u0026lt;?php interface ShapeInterface { public function calculateArea(): float; } class Rectangle implements ShapeInterface { private $width; private $height; public function __construct(float $width, float $height) { $this-\u0026gt;width = $width; $this-\u0026gt;height = $height; } public function calculateArea(): float { return $this-\u0026gt;width * $this-\u0026gt;height; } } class Circle implements ShapeInterface { private $radius; public function __construct(float $radius) { $this-\u0026gt;radius = $radius; } public function calculateArea(): float { return pi() * $this-\u0026gt;radius * $this-\u0026gt;radius; } } class Triangle implements ShapeInterface { private $base; private $height; public function __construct(float $base, float $height) { $this-\u0026gt;base = $base; $this-\u0026gt;height = $height; } public function calculateArea(): float { return ($this-\u0026gt;base * $this-\u0026gt;height) / 2; } } class AreaCalculator { public function calculateArea(ShapeInterface $shape): float { return $shape-\u0026gt;calculateArea(); } } // Uso $calculator = new AreaCalculator(); $shapes = [ new Rectangle(5, 10), new Circle(3), new Triangle(4, 6) ]; foreach ($shapes as $shape) { echo \u0026#34;√Årea: \u0026#34; . $calculator-\u0026gt;calculateArea($shape) . \u0026#34;\\n\u0026#34;; } Viu a diferen√ßa? Agora quando seu chefe pedir para calcular a √°rea de um dodec√°gono, voc√™ s√≥ precisa criar a classe Dodecagon implementando ShapeInterface. A classe AreaCalculator continua intacta, feliz e funcionando perfeitamente!\nExemplo Real: Sistema de Notifica√ß√µes Vamos para um exemplo mais pr√≥ximo da vida real. Imagine um sistema de notifica√ß√µes.\nA Abordagem \u0026ldquo;Vou Quebrar Tudo\u0026rdquo; ‚ùå \u0026lt;?php class NotificationService { public function send($message, $type, $recipient) { switch ($type) { case \u0026#39;email\u0026#39;: $this-\u0026gt;sendEmail($message, $recipient); break; case \u0026#39;sms\u0026#39;: $this-\u0026gt;sendSMS($message, $recipient); break; case \u0026#39;push\u0026#39;: $this-\u0026gt;sendPushNotification($message, $recipient); break; default: throw new InvalidArgumentException(\u0026#34;Tipo de notifica√ß√£o inv√°lido!\u0026#34;); } } private function sendEmail($message, $recipient) { // L√≥gica para enviar email echo \u0026#34;Email enviado para: $recipient - $message\\n\u0026#34;; } private function sendSMS($message, $recipient) { // L√≥gica para enviar SMS echo \u0026#34;SMS enviado para: $recipient - $message\\n\u0026#34;; } private function sendPushNotification($message, $recipient) { // L√≥gica para enviar push notification echo \u0026#34;Push notification enviado para: $recipient - $message\\n\u0026#34;; } } Agora seu produto manager aparece e diz: \u0026ldquo;Precisamos integrar com WhatsApp, Telegram, Slack e Discord!\u0026rdquo;\nA Abordagem \u0026ldquo;Minha Sanidade Mental Agradece\u0026rdquo; ‚úÖ \u0026lt;?php interface NotificationInterface { public function send(string $message, string $recipient): bool; } class EmailNotification implements NotificationInterface { public function send(string $message, string $recipient): bool { // L√≥gica espec√≠fica para email echo \u0026#34;üìß Email enviado para: $recipient - $message\\n\u0026#34;; return true; } } class SMSNotification implements NotificationInterface { public function send(string $message, string $recipient): bool { // L√≥gica espec√≠fica para SMS echo \u0026#34;üì± SMS enviado para: $recipient - $message\\n\u0026#34;; return true; } } class WhatsAppNotification implements NotificationInterface { public function send(string $message, string $recipient): bool { // L√≥gica espec√≠fica para WhatsApp echo \u0026#34;üí¨ WhatsApp enviado para: $recipient - $message\\n\u0026#34;; return true; } } class SlackNotification implements NotificationInterface { public function send(string $message, string $recipient): bool { // L√≥gica espec√≠fica para Slack echo \u0026#34;üíº Slack enviado para: $recipient - $message\\n\u0026#34;; return true; } } class NotificationService { private $notifications = []; public function addNotificationMethod(NotificationInterface $notification) { $this-\u0026gt;notifications[] = $notification; } public function sendToAll(string $message, string $recipient) { foreach ($this-\u0026gt;notifications as $notification) { $notification-\u0026gt;send($message, $recipient); } } public function send(NotificationInterface $notification, string $message, string $recipient) { return $notification-\u0026gt;send($message, $recipient); } } // Uso $notificationService = new NotificationService(); // Configurando os m√©todos de notifica√ß√£o $notificationService-\u0026gt;addNotificationMethod(new EmailNotification()); $notificationService-\u0026gt;addNotificationMethod(new SMSNotification()); $notificationService-\u0026gt;addNotificationMethod(new WhatsAppNotification()); // Enviando notifica√ß√£o $notificationService-\u0026gt;sendToAll(\u0026#34;Seu pedido foi confirmado!\u0026#34;, \u0026#34;usuario@exemplo.com\u0026#34;); // Ou enviando por um canal espec√≠fico $notificationService-\u0026gt;send(new SlackNotification(), \u0026#34;Deploy realizado com sucesso!\u0026#34;, \u0026#34;#dev-team\u0026#34;); Agora quando precisar adicionar Discord, Telegram, pombo-correio ou sinais de fuma√ßa, voc√™ s√≥ cria uma nova classe. O NotificationService nem pisca!\nPor Que Isso √â T√£o Importante? 1. Manutenibilidade: Voc√™ n√£o quebra c√≥digo existente quando adiciona funcionalidades novas. √â como adicionar um novo sabor de pizza no card√°pio sem precisar reformar a cozinha inteira.\n2. Testabilidade: Cada classe tem sua responsabilidade espec√≠fica. Testar fica muito mais f√°cil.\n3. Reutiliza√ß√£o: Suas classes ficam modulares. Pode usar EmailNotification em qualquer lugar sem carregar toda a bagagem do sistema.\n4. Escalabilidade: Adicionar novas funcionalidades vira uma opera√ß√£o segura. Seu cora√ß√£o n√£o vai mais acelerar a cada deploy.\nDicas Pr√°ticas Para N√£o Pirar 1. Use Interfaces e Classes Abstratas Elas s√£o seus melhores amigos para definir contratos que suas classes devem seguir.\n2. Pense em Strategies (O design pattern) Quando voc√™ v√™ um switch/case ou uma cadeia de if/elseif gigante, geralmente √© sinal de que est√° violando o princ√≠pio.\n3. Dependency Injection √© amigo Injete depend√™ncias ao inv√©s de criar inst√¢ncias dentro das classes. Isso facilita a extens√£o.\n4. N√£o Exagere na Abstra√ß√£o N√£o tente prever todos os cen√°rios futuros. Refatore quando a necessidade real aparecer. YAGNI (You Ain\u0026rsquo;t Gonna Need It) √© real!\nConclus√£o: Seu Futuro Eu Vai Te Agradecer O Princ√≠pio Aberto/Fechado pode parecer trabalhoso no in√≠cio, mas √© um investimento na sua sanidade mental futura. √â a diferen√ßa entre ser aquele desenvolvedor que adiciona funcionalidades com confian√ßa e aquele que precisa de tr√™s caf√©s e uma reza antes de cada commit.\nLembre-se: c√≥digo bem estruturado √© como um bom relacionamento - voc√™ pode crescer juntos sem precisar mudar completamente quem voc√™s s√£o.\nE quando seu chefe vier com mais uma \u0026ldquo;pequena mudan√ßa\u0026rdquo;, voc√™ vai poder sorrir e dizer: \u0026ldquo;Sem problemas, s√≥ vou criar uma nova classe!\u0026rdquo;\nAgora pare de ler e v√° refatorar aquele switch gigante que voc√™ sabe que est√° l√° te julgando! üòÑ\n","permalink":"https://blog.felpo.dev/posts/solid-open-closed-principle/","summary":"\u003cp\u003eSe voc√™ j√° trabalhou com c√≥digo por mais de cinco minutos, provavelmente j√° passou pela seguinte situa√ß√£o: voc√™ precisa adicionar uma nova funcionalidade e, de repente, percebe que vai ter que mexer em 47 arquivos diferentes, quebrar 23 testes e rezar para tr√™s santos diferentes para que tudo continue funcionando.\u003c/p\u003e\n\u003cp\u003eBem-vindo ao mundo maravilhoso do c√≥digo que n√£o segue o \u003cstrong\u003ePrinc√≠pio Aberto/Fechado\u003c/strong\u003e (Open/Closed Principle), a segunda letra do acr√¥nimo SOLID!\u003c/p\u003e","title":"SOLID Open Closed Principle"},{"content":"De todos os princ√≠pios SOLID, o SRP provavelmente √© o mais conhecido e o menos compreendido. Isso se deve principalmente ao seu nome inadequado. Ao escutar esse nome, logo pensamos que os m√≥dulos devem fazer apenas uma coisa.\nO Que √â Esse Tal de SRP? O SRP diz basicamente: \u0026ldquo;Um m√≥dulo deve ter uma, e apenas uma, raz√£o para mudar\u0026rdquo;.\nO Problema: A Classe Canivete Su√≠√ßo Imagine que voc√™ est√° no escrit√≥rio e encontra esta belezinha no c√≥digo:\n\u0026lt;?php class Funcionario { private $nome; private $salario; public function calcularSalario() { // 50 linhas de l√≥gica complexa aqui } public function salvarNoBanco() { // Conex√£o com banco, SQL, transactions... } public function enviarEmail() { // SMTP, templates, valida√ß√µes... } public function gerarRelatorio() { // PDF, formata√ß√£o, headers... } public function validarCPF() { // Algoritmo de valida√ß√£o de CPF } } ?\u0026gt; Esta classe Funcionario est√° fazendo mais coisas que um estagi√°rio no primeiro dia: calculando sal√°rio, salvando no banco, enviando email, gerando relat√≥rio E validando CPF. √â o Batman do c√≥digo, mas sem a parte legal de ser her√≥i.\nPor Que Isso √â Um Problema? 1. O Pesadelo dos M√∫ltiplos Motivos Para Mudar Nossa classe Funcionario tem pelo menos 5 motivos diferentes para ser alterada:\nMudan√ßa nas regras de c√°lculo salarial ‚Üí mexe na classe Troca do banco de dados ‚Üí mexe na classe Novo template de email ‚Üí mexe na classe Mudan√ßa no formato do relat√≥rio ‚Üí mexe na classe Nova valida√ß√£o de CPF ‚Üí mexe na classe Quando a regra de neg√≥cio exige mudan√ßa no c√°lculo do vale-refei√ß√£o, voc√™ acaba mexendo em c√≥digo que envia email, e de repente os relat√≥rios param de funcionar.\n2. Teste Vira Pesadelo Tentar testar essa classe √© como tentar usar √≥culos de grau emprestado: tecnicamente funciona, mas voc√™ sai com dor de cabe√ßa. Voc√™ quer testar apenas o c√°lculo de sal√°rio, mas precisa mockar banco de dados, servidor de email e impressora PDF. √â mais setup que o Arch Linux.\n3. Reutiliza√ß√£o? Esquece! Quer usar s√≥ a valida√ß√£o de CPF em outro lugar? Paci√™ncia, meu amigo, voc√™ vai ter que carregar toda a bagagem da classe Funcionario nas costas, como quem viaja de √¥nibus com mala de rodinha quebrada.\nA Solu√ß√£o: Separar Para Conquistar Vamos aplicar o SRP e transformar nossa classe Frankenstein em algo mais civilizado:\n\u0026lt;?php // Apenas dados do funcion√°rio class Funcionario { public function __construct( private readonly string $nome, private readonly int $salario, ) {} } // Especialista em c√°lculos class CalculadoraSalario { public function calcular(Funcionario $funcionario) { // L√≥gica de c√°lculo aqui } } // Especialista em persist√™ncia class RepositorioFuncionario { public function salvar(Funcionario $funcionario) { // L√≥gica de banco aqui // PDO, Eloquent, ou o que preferir } } // Especialista em comunica√ß√£o class ServicoEmail { public function enviar($destinatario, $assunto, $corpo) { // L√≥gica de email aqui // PHPMailer, SwiftMailer, etc. } } // Especialista em relat√≥rios class GeradorRelatorio { public function gerar(array $funcionarios) { // L√≥gica de relat√≥rio aqui // TCPDF, DomPDF, etc. } } // Especialista em valida√ß√£o class ValidadorCPF { public function validar($cpf) { // L√≥gica de valida√ß√£o aqui } } ?\u0026gt; Agora sim! Cada classe tem sua especialidade, como um time de super-her√≥is onde cada um tem seu poder espec√≠fico, ao inv√©s de um Homem-Aranha que tamb√©m √© m√©dico, advogado e professor de culin√°ria.\nOs Benef√≠cios de Seguir o SRP 1. Manuten√ß√£o Mais F√°cil Precisa alterar como o sal√°rio √© calculado? Vai direto na CalculadoraSalario. Precisa mudar o template do email? ServicoEmail te espera. √â como ter uma caixa de ferramentas organizada, ao inv√©s de uma gaveta bagun√ßada.\n2. Testes Mais Simples Testar a CalculadoraSalario agora √© moleza: passa um Funcionario, chama o m√©todo, verifica o resultado. Sem mock de banco, sem configura√ß√£o de SMTP, sem dor de cabe√ßa.\n3. Reutiliza√ß√£o Real O ValidadorCPF pode ser usado em qualquer lugar que precise validar CPF: cadastro de clientes, fornecedores, ou at√© no seu projeto paralelo da loja de a√ßa√≠.\n4. Entendimento Mais R√°pido Quando algu√©m novo chega no time e precisa entender o c√≥digo, √© muito mais f√°cil explicar: \u0026ldquo;Essa classe calcula sal√°rio, essa salva no banco, essa envia email\u0026hellip;\u0026rdquo; do que \u0026ldquo;Essa classe faz\u0026hellip; bem\u0026hellip; tudo.\u0026rdquo;\nCuidado Com os Exageros Como tudo na vida, o SRP pode ser levado ao extremo. N√£o √© para criar uma classe para cada linha de c√≥digo:\n\u0026lt;?php // Isso aqui √© exagero, galera class SomadorDeUm { public function somar($numero) { return $numero + 1; } } ?\u0026gt; O segredo √© encontrar o equil√≠brio. Pense no SRP como uma dieta: o objetivo √© ser saud√°vel, n√£o passar fome.\nSinais de Que Voc√™ Est√° Violando o SRP Sua classe tem mais m√©todos p√∫blicos que um canivete su√≠√ßo tem ferramentas Voc√™ usa \u0026ldquo;E\u0026rdquo; frequentemente ao explicar o que a classe faz: \u0026ldquo;Ela calcula sal√°rio E envia email E gera relat√≥rio E\u0026hellip;\u0026rdquo; Suas classes t√™m nomes gen√©ricos demais: Manager, Handler, Utils, Helper (especialmente se elas fazem mais que gerenciar, manusear, ou ajudar) Quando voc√™ precisa alterar um requisito simples, acaba mexendo em 15 m√©todos diferentes da mesma classe Conclus√£o O Princ√≠pio da Responsabilidade √önica n√£o √© sobre criar milh√µes de classes min√∫sculas, mas sobre criar c√≥digo que fa√ßa sentido, seja f√°cil de manter e n√£o d√™ vontade de chorar toda vez que voc√™ precisa fazer uma altera√ß√£o.\nLembre-se: c√≥digo bom √© como uma boa piada - se voc√™ precisa explicar muito, provavelmente n√£o est√° t√£o bom assim. E se sua classe precisa de um manual de instru√ß√µes para ser entendida, talvez seja hora de aplicar um pouco de SRP na sua vida.\n","permalink":"https://blog.felpo.dev/posts/solid-single-responsability-principle/","summary":"\u003cp\u003eDe todos os princ√≠pios SOLID, o SRP provavelmente √© o mais conhecido e o menos compreendido. Isso se deve principalmente ao seu nome inadequado. Ao escutar esse nome, logo pensamos que os m√≥dulos devem fazer apenas uma coisa.\u003c/p\u003e\n\u003ch2 id=\"o-que-√©-esse-tal-de-srp\"\u003eO Que √â Esse Tal de SRP?\u003c/h2\u003e\n\u003cp\u003eO SRP diz basicamente: \u0026ldquo;Um m√≥dulo deve ter uma, e apenas uma, raz√£o para mudar\u0026rdquo;.\u003c/p\u003e\n\u003ch2 id=\"o-problema-a-classe-canivete-su√≠√ßo\"\u003eO Problema: A Classe Canivete Su√≠√ßo\u003c/h2\u003e\n\u003cp\u003eImagine que voc√™ est√° no escrit√≥rio e encontra esta belezinha no c√≥digo:\u003c/p\u003e","title":"SOLID Single Responsability Principle"},{"content":"Se voc√™ trabalha (ou quer trabalhar) com an√°lise de sistemas, desenvolvimento ou produto, entender esses tr√™s conceitos √© fundamental. Vamos l√°:\nüìå Regras de Neg√≥cio S√£o as diretrizes que a empresa segue, independentemente da exist√™ncia de um sistema. S√£o definidas pelo neg√≥cio, n√£o pela tecnologia.\nExemplo (Loja de Roupas):\nN√£o vende fiado S√≥ aceita trocas com produto em perfeito estado Aceita pagamento por boleto N√£o aceita pagamento por cheque Ou seja: se a empresa deixar de usar o sistema, essas regras continuam valendo.\n‚öôÔ∏è Requisitos Funcionais Descrevem o que o sistema precisa fazer. Envolvem a√ß√µes, intera√ß√µes e funcionalidades que atendem √†s necessidades do usu√°rio ou do processo.\nExemplos:\nO sistema deve permitir selecionar o motivo da troca (ex: defeito) O sistema deve gerar boletos para pagamento O sistema deve registrar o status do pedido Pense neles como o ‚Äúo que‚Äù o sistema precisa entregar na pr√°tica.\nüîß Requisitos N√£o Funcionais Definem como o sistema deve se comportar. S√£o atributos de qualidade, como desempenho, seguran√ßa e disponibilidade.\nExemplos:\nO sistema deve estar dispon√≠vel 24h por dia Deve funcionar em dispositivos com determinadas configura√ß√µes Deve ser hospedado em um provedor espec√≠fico Eles n√£o adicionam uma funcionalidade nova, mas impactam diretamente na experi√™ncia e confiabilidade do sistema.\n","permalink":"https://blog.felpo.dev/posts/entendendo-as-diferen%C3%A7as-entre-regras-de-neg%C3%B3cio-requisitos-funcionais-e-n%C3%A3o-funcionais/","summary":"\u003cp\u003eSe voc√™ trabalha (ou quer trabalhar) com an√°lise de sistemas, desenvolvimento ou produto, entender esses tr√™s conceitos √© fundamental. Vamos l√°:\u003c/p\u003e\n\u003ch3 id=\"-regras-de-neg√≥cio\"\u003eüìå Regras de Neg√≥cio\u003c/h3\u003e\n\u003cp\u003eS√£o as diretrizes que a empresa segue, independentemente da exist√™ncia de um sistema. S√£o definidas pelo neg√≥cio, n√£o pela tecnologia.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eExemplo (Loja de Roupas):\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eN√£o vende fiado\u003c/li\u003e\n\u003cli\u003eS√≥ aceita trocas com produto em perfeito estado\u003c/li\u003e\n\u003cli\u003eAceita pagamento por boleto\u003c/li\u003e\n\u003cli\u003eN√£o aceita pagamento por cheque\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cem\u003eOu seja: se a empresa deixar de usar o sistema, essas regras continuam valendo.\u003c/em\u003e\u003c/p\u003e","title":"Entendendo as Diferen√ßas entre Regras de Neg√≥cio, Requisitos Funcionais e N√£o Funcionais"},{"content":"Hoje vou fazer um dump de tudo que sei de NGINX, mostrando que n√£o √© dif√≠cil dar manuten√ß√£o nos arquivos de configura√ß√£o do seu servidor.\nDepois de ler esse post voc√™ vai poder:\nEntender os arquivos de configura√ß√£o do NGINX Configurar o NGINX como um servidor web Configurar o NGINX como um proxy reverso Configurar o NGINX como um load balancer √çndice Introdu√ß√£o ao NGINX Como instalar o NGINX Introdu√ß√£o √†s configura√ß√µes do NGINX Como configurar um servidor web b√°sico Escrevendo seu primeiro arquivo de configura√ß√£o Como validar e recarregar os arquivos de configura√ß√£o Como entender as diretivas e contextos no NGINX Como servir conte√∫do est√°tico usando NGINX Lidando com tipos de arquivo est√°tico no NGINX Como incluir arquivos de configura√ß√£o parciais Roteamento din√¢mico no NGINX Correspond√™ncia de localiza√ß√£o Vari√°veis no NGINX Redirecionamentos e reescritas Como tentar m√∫ltiplos arquivos Logs no NGINX Como usar o NGINX como um proxy reverso Node com NGINX Como usar o NGINX como um load balancer Como configurar processos worker e conex√µes worker Introdu√ß√£o ao NGINX Apesar de ser mais conhecido como um servidor web, o NGINX √© basicamente um servidor de proxy reverso.\nQuando uma request buscando conte√∫do est√°tico chega, o NGINX simplesmente responde com o arquivo, sem rodar nenhum processo adicional. Isso n√£o significa que o NGINX n√£o consegue lidar com requests que precisam de um processamento por uma linguagem de programa√ß√£o din√¢mica. Nesses casos, o NGINX simplesmente delega a tarefa para processos separados como o PHP-FPM, Node.js ou Python. Ent√£o, quando o processo termina, o NGINX faz a proxy de resposta de volta pra o cliente.\nComo instalar o NGINX Em sistemas baseados em Debian/Ubuntu normalmente √© apenas rodar:\nsudo apt install nginx Em caso de problemas voc√™ pode consultar a documenta√ß√£o oficial\nAp√≥s a instala√ß√£o, o NGINX deve estar registrado como um servi√ßo do systemd. Para checar, execute o seguinte comando:\nsudo systemctl status nginx Se o servi√ßo estiver rodando, voc√™ est√° pronto para come√ßar. Caso contr√°rio voc√™ pode iniciar o servi√ßo com o seguinte comando:\nsudo systemctl start nginx Por √∫ltimo, para um verifica√ß√£o visual de que tudo est√° rodando e funcionando como deveria, abra o localhost no seu navegador e voc√™ deve conseguir ver a tela inicial do NGINX\nNGINX normalmente √© instalado no diret√≥rio /etc/nginx e a maioria do nosso trabalho nas se√ß√µes que est√£o por vir v√£o ser feitas aqui.\nParab√©ns! Agora voc√™ tem um NGINX rodando na sua m√°quina. Agora √© hora de pular de cabe√ßa no NGINX.\nIntrodu√ß√£o as configura√ß√µes do NGINX Como um servidor web, o trabalho do NGINX √© servir conte√∫do est√°tico aos clientes. Mas como esse conte√∫do vai ser servido √© normalmente controlado por arquivos de configura√ß√£o.\nOs arquivos de configura√ß√£o do NGINX acabam com a extens√£o .conf e normalmente est√£o dentro da pasta /etc/nginx. Vamos come√ßar entrando nesse diret√≥rio e listando todos os arquivos:\ncd /etc/nginx ls -lh # drwxr-xr-x 1 root root 4.0K Feb 24 23:48 conf.d # -rw-r--r-- 1 root root 1007 Feb 5 11:06 fastcgi_params # -rw-r--r-- 1 root root 5.3K Feb 5 11:06 mime.types # lrwxrwxrwx 1 root root 22 Feb 5 14:26 modules -\u0026gt; /usr/lib/nginx/modules # -rw-r--r-- 1 root root 648 Feb 5 14:26 nginx.conf # -rw-r--r-- 1 root root 636 Feb 5 11:06 scgi_params # -rw-r--r-- 1 root root 664 Feb 5 11:06 uwsgi_params Entre esses arquivos, deve ter um chamado nginx.conf. Esse √© o arquivo de configura√ß√£o principal do NGINX. Voc√™ pode dar uma olhada no conte√∫do do arquivo com o cat:\ncat nginx.conf # user nginx; # worker_processes auto; # error_log /var/log/nginx/error.log notice; # pid /var/run/nginx.pid; # events { # worker_connections 1024; # } # http { # include /etc/nginx/mime.types; # default_type application/octet-stream; # log_format main \u0026#39;$remote_addr - $remote_user [$time_local] \u0026#34;$request\u0026#34; \u0026#39; # \u0026#39;$status $body_bytes_sent \u0026#34;$http_referer\u0026#34; \u0026#39; # \u0026#39;\u0026#34;$http_user_agent\u0026#34; \u0026#34;$http_x_forwarded_for\u0026#34;\u0026#39;; # access_log /var/log/nginx/access.log main; # sendfile on; # #tcp_nopush on; # keepalive_timeout 65; # #gzip on; # include /etc/nginx/conf.d/*.conf; # } Tentar entender esse arquivo nesse estado √© um pesadelo. Vamos renome√°-lo e criar um novo arquivo vazio:\n# renomeia o arquivo sudo mv nginx.conf nginx.conf.backup # cria um novo arquivo sudo touch nginx.conf N√£o √© recomendado editar o arquivo nginx.conf original a n√£o ser que voc√™ saiba exatamente o que voc√™ est√° fazendo. Para fins educativos, estamos renomeando, mas depois, voc√™ vai ver como deveria configurar um servidor em um caso real.\nComo configurar um servidor web b√°sico Nessa se√ß√£o, vamos colocar a m√£o na masse e configurar um simples servidor web est√°tico. O intuito dessa se√ß√£o √© introduzir voc√™ para a sintaxe fundamental dos conceitos dos arquivos de configura√ß√£o do NGINX.\nEscrevendo seu primeiro arquivo de configura√ß√£o Comece abrindo seu rec√©m criado nginx.conf usando seu editor de texto favorito, pra esse exemplo, vou usar o nano:\nsudo nano /etc/nginx/nginx.conf Depois de abrir o arquivo, atualize seu conte√∫do para que fique dessa forma:\nevents { } http { server { listen 80; server_name nginx.test; return 200 \u0026#34;Hello World!\\n\u0026#34;; } } Se voc√™ tem experi√™ncia na constru√ß√£o de API REST voc√™ deve ter deduzido da linha com return 200 \u0026quot;\u0026quot;Hello World!\\n\u0026quot;; que o servidor foi configurado para responder com status code de 200 e a mensagem \u0026ldquo;Hello World!\u0026rdquo;\nN√£o se preocupe se voc√™ n√£o entendeu nada al√©m disso nesse momento. Eu vou explicar esse arquivo linha a linha, mas primeiro, vamos ver essa configura√ß√£o em a√ß√£o.\nComo validar e recarregar os arquivos de configura√ß√£o Depois de escrever um novo arquivo de configura√ß√£o ou atualizar um antigo, a primeira coisa a se fazer √© checar se existe algum erro de sintaxe no arquivo. O bin√°rio do nginx inclui a op√ß√£o -t que faz exatamente isso\nsudo nginx -t # nginx: the configuration file /etc/nginx/nginx.conf syntax is ok # nginx: configuration file /etc/nginx/nginx.conf test is successful Se exite algum erro de sintaxe, o comando vai te alertar sobre ele, incluindo o n√∫mero da linha.\nApesar do arquivo de configura√ß√£o estar certo, o NGINX n√£o vai us√°-lo. Do jeito que o NGINX funciona ele l√™ o arquivo de configura√ß√£o uma vez e continua rodando baseado nessa primeira leitura.\nSe voc√™ atualizar o arquivo de configura√ß√£o, ent√£o voc√™ precisa instruir o NGINX explicitamente para recarregar o arquivo de configura√ß√£o. Existem duas formas de fazer isso:\nVoc√™ pode reiniciar o servi√ßo do NGINX executando o comando sudo systemctl restart nginx Voc√™ pode mandar um sinal de reload para o NGINX executando o comando sudo nginx -s reload O -s √© usado para enviar v√°rios sinais para o NGINX. O sinais dispon√≠veis s√£o stop, quit, reload, e reopen. Entre os dois jeitos de atualizar o arquivo, eu prefiro o segundo, simplesmente por que √© menos coisas para digitar.\numa ver que voc√™ tenha recarregado o arquivo de configura√ß√£o rodando o comando nginx -s reload, voc√™ pode ver isso em a√ß√£o fazendo uma request get para o servidor:\ncurl -i http://nginx.test # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Mon, 24 Feb 2025 23:56:44 GMT # Content-Type: text/plain # Content-Length: 13 # Connection: keep-alive # Hello World! O servidor est√° respondendo com um status code de 200 e a mensagem esperada. Parab√©ns por chegar t√£o longe! Agora √© hora de algumas explica√ß√µes.\nComo entender as diretivas e contextos no NGINX As poucas linhas de c√≥digo que voc√™ escreveu at√© agora, apesar de parecerem simples, introduzem duas das mais importantes terminologias dos arquivos de configura√ß√£o do NGINX. Elas s√£o diretivas e contextos.\nTecnicamente, tudo dentro de um arquivo de configura√ß√£o do NGINX √© uma diretiva. Diretivas s√£o de dois tipos:\nDiretivas simples Diretivas de bloco Uma diretiva simples consiste do nome da diretiva e os par√¢metros delimitados por espa√ßos, como listen, return e outros. Diretivas simples s√£o terminadas por ponto e v√≠rgula.\nDiretivas de bloco s√£o similares das diretivas simples, mas ao inv√©s de terminar com ponto e v√≠rgula, eles terminam com um par de chaves {} fechando instru√ß√µes adicionais.\nUma diretiva de bloco capaz de conter outras diretivas dentro √© chamada de contexto, que s√£o os events, http e por a√≠ vai. Existem quatro contextos principais no NGINX:\nevents {} - O contexto de events √© usado para definir a configura√ß√£o global de como o NGINX vai lidar com as requests de um modo geral. S√≥ pode existir um contexto de events em um arquivo de configura√ß√£o v√°lido. http {} - Evidente pelo nome, o contexto de http √© usado para definir a configura√ß√£o de como o servidor vai lidar com requests HTTP e HTTPS, especificamente. S√≥ pode existir um contexto http em um arquivo de configura√ß√£o v√°lido. server {} - O contexto de server √© aninhado dentro do contexto de http e usado para configurar servidores virtuais espec√≠ficos em apenas um host. Podem existir v√°rios contexto de server dentro de um contexto de http. Cada contexto de server √© considerado um host virtual. main - O contexto main √© o pr√≥prio arquivo de configura√ß√£o. Qualquer coisa escrita fora dos tr√™s contextos mencionados anteriormente est√° no contexto main. Voc√™ pode considerar contextos do NGINX como escopos em outras linguagens de programa√ß√£o. Existe tamb√©m uma certa forma de heran√ßa entre eles. Voc√™ pode encontrar um √≠ndice de diretivas em ordem alfab√©tica na documenta√ß√£o oficial.\nEu mencionei que podem existir m√∫ltiplos contextos de server no arquivo de configura√ß√£o. Mas quando a request chega no servidor, como o NGINX sabe qual dos contextos deve lidar com a request?\nA diretiva de listen √© um dos jeitos de identificar o contexto server correto na configura√ß√£o. Considere o seguinte cen√°rio:\nevents { } http { server { listen 80; server_name nginx.test; return 200 \u0026#34;resposta da porta 80!\\n\u0026#34;; } server { listen 8080; server_name nginx.test; return 200 \u0026#34;resposta da porta 8080!\\n\u0026#34;; } } Agora se voc√™ mandar uma request para http://nginx.test:80 voc√™ vai receber \u0026ldquo;resposta da porta 80!\u0026rdquo; como resposta. E se voc√™ mandar uma request para http://nginx.test:8080 voc√™ vai receber \u0026ldquo;resposta da porta 8080!\u0026rdquo; como uma resposta:\ncurl nginx.test:80 # resposta da porta 80! curl nginx.test:8080 # resposta da porta 8080! Esses dois blocos de server s√£o como duas pessoas com um telefone fixo, esperando para responder quando uma requisi√ß√£o chega nos seu n√∫mero. Seus n√∫meros s√£o indicados pelas diretivas listen.\nFora a diretiva listen, existe tamb√©m a diretiva server_name. Considere o seguinte cen√°rio de uma aplica√ß√£o imagin√°ria de administra√ß√£o de uma biblioteca:\nevents { } http { server { listen 80; server_name biblioteca.test; return 200 \u0026#34;sua biblioteca local!\\n\u0026#34;; } server { listen 80; server_name bibliotecario.biblioteca.test; return 200 \u0026#34;bem vindo bibliotec√°rio!\\n\u0026#34;; } } Esse √© um exemplo b√°sico de um host virtual. Voc√™ est√° rodando duas aplica√ß√µes separadas em diferentes server_name no mesmo servidor.\nSe voc√™ mandar a request para http://biblioteca.test voc√™ vai receber a resposta \u0026ldquo;sua biblioteca local!\u0026rdquo;. Se voc√™ mandar uma request para http://bibliotecario.biblioteca.test voc√™ vai receber \u0026ldquo;bem vindo bibliotec√°rio!\u0026rdquo; como resposta.\ncurl http://biblioteca.test # sua biblioteca local! curl http://bibliotecario.biblioteca.test # bem vindo bibliotec√°rio! Para fazer isso funcionar, voc√™ deve atualizar seu arquivo hosts para incluir esses dois dom√≠nios:\n192.168.0.100 biblioteca.test 192.168.0.100 bibliotecario.biblioteca.test Finalmente, a diretiva return √© respons√°vel por retornar uma resposta v√°lida para o usu√°rio. Essa diretiva recebe dois par√¢metros: o status code e a string da mensagem para ser retornada.\nComo servir conte√∫do est√°tico usando NGINX Agora que voc√™ tem um bom entendimento de como escrever um arquivo de configura√ß√£o b√°sico para o NGINX, vamos melhorar a configura√ß√£o para servir arquivos est√°ticos ao inv√©s de respostas de texto\nPara servir conte√∫do est√°tico, primeiro voc√™ deve armazen√°-lo em algum lugar no seu servidor. Se voc√™ listar os arquivos e diret√≥rios na raiz do seu servidor usando ls, voc√™ vai achar um diret√≥rio chamado /srv:\nls -lh / # lrwxrwxrwx 1 root root 7 Feb 3 00:00 bin -\u0026gt; usr/bin # drwxr-xr-x 2 root root 4.0K Dec 31 10:25 boot # drwxr-xr-x 5 root root 340 Feb 24 23:48 dev # drwxr-xr-x 1 root root 4.0K Feb 6 00:26 docker-entrypoint.d # -rwxr-xr-x 1 root root 1.6K Feb 6 00:26 docker-entrypoint.sh # drwxr-xr-x 1 root root 4.0K Feb 24 23:55 etc # drwxr-xr-x 2 root root 4.0K Dec 31 10:25 home # lrwxrwxrwx 1 root root 7 Feb 3 00:00 lib -\u0026gt; usr/lib # lrwxrwxrwx 1 root root 9 Feb 3 00:00 lib64 -\u0026gt; usr/lib64 # drwxr-xr-x 2 root root 4.0K Feb 3 00:00 media # drwxr-xr-x 2 root root 4.0K Feb 3 00:00 mnt # drwxr-xr-x 2 root root 4.0K Feb 3 00:00 opt # dr-xr-xr-x 297 root root 0 Feb 24 23:48 proc # drwx------ 1 root root 4.0K Feb 25 00:00 root # drwxr-xr-x 1 root root 4.0K Feb 24 23:48 run # lrwxrwxrwx 1 root root 8 Feb 3 00:00 sbin -\u0026gt; usr/sbin # drwxr-xr-x 2 root root 4.0K Feb 3 00:00 srv # dr-xr-xr-x 13 root root 0 Feb 24 23:48 sys # drwxrwxrwt 1 root root 4.0K Feb 24 23:55 tmp # drwxr-xr-x 1 root root 4.0K Feb 3 00:00 usr # drwxr-xr-x 1 root root 4.0K Feb 3 00:00 var Esse diret√≥rio /srv serve para armazenar conte√∫do que deve ser servido pelo sistema. Agora vamos entrar nesse diret√≥rio e clonar o c√≥digo do reposit√≥rio desse tutorial:\ncd /srv git clone https://github.com/felprangel/exemplos-nginx.git Dentro do diret√≥rio exemplos-nginx deve ter um diret√≥rio chamado static-demo contendo quatro arquivos no total:\nls -lh /srv/exemplos-nginx/static-demo # -rw-r--r-- 1 root root 878 Feb 25 00:44 index.html # -rw-r--r-- 1 root root 46K Feb 25 00:44 mini.min.css # -rw-r--r-- 1 root root 50K Feb 25 00:44 nginx.jpg # -rw-r--r-- 1 root root 884 Feb 25 00:44 sobre.html Agora que voc√™ tem o conte√∫do est√°tico para ser servido, atualize sua configura√ß√£o como a seguinte:\nevents { } http { server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; } } O c√≥digo √© quase o mesmo, mas a diretiva return foi substitu√≠da pela diretiva root. Essa diretiva √© usada para declarar o diret√≥rio raiz de um site.\nEscrevendo root /srv/exemplos-nginx/static-demo; voc√™ est√° dizendo para o NGINX para procurar por arquivos para servir dentro do diret√≥rio /srv/exemplos-nginx/static-demo se qualquer request chegar no servidor. Como o NGINX √© um servidor web, ele √© inteligente o suficiente para servir o arquivo index.html por padr√£o.\nVamos ver se isso funciona. Teste e recarregue o arquivo de configura√ß√£o atualizado e visite o servidor. Voc√™ deve ser recebido por um arquivo HTML quebrado:\nApesar do NGINX servir o arquivo index.html corretamente, julgando pela apar√™ncia dos 3 links de navega√ß√£o, parece que o c√≥digo CSS n√£o est√° funcionando.\nVoc√™ pode pensar que deve ter algo errado com o arquivo CSS. Mas na verdade, o problema est√° no arquivo de configura√ß√£o.\nLidando com tipo de arquivo est√°tico no NGINX Para debugar esse problema, envie uma request para o arquivo CSS no servidor:\ncurl -I http://nginx.test/mini.min.css # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Tue, 25 Feb 2025 00:47:08 GMT # Content-Type: text/plain # Content-Length: 46887 # Last-Modified: Tue, 25 Feb 2025 00:44:34 GMT # Connection: keep-alive # ETag: \u0026#34;67bd1272-b727\u0026#34; # Accept-Ranges: bytes Preste aten√ß√£o no Content-Type e veja como ele diz text/plain e n√£o text/css. Isso significa que o NGINX est√° servindo esse arquivo como um texto plano ao inv√©s de uma folha de estilos.\nApesar do NGINX ser esperto o suficiente para encontrar o arquivo index.html por padr√£o, ele pode ser bem bobinho quando o assunto √© interpretar tipos de arquivos. Para resolver esse problema, atualize seu arquivo de configura√ß√£o mais uma vez:\nevents { } http { types { text/html html; text/css css; } server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; } } A √∫nica mudan√ßa que fizemos no c√≥digo √© adicionar um novo contexto de types dentro do contexto de http. Como voc√™ deve ter adivinhado pelo nome, o contexto √© usado para configurar os tipos.\nEscrevendo text/html html nesse contexto voc√™ est√° dizendo ao NGINX interpretar como text/html qualquer arquivo que termina com a extens√£o html\nVoc√™ pode pensar que s√≥ configurar o tipo de arquivo CSS deve ser o suficiente, j√° que o HTML est√° sendo interpretado normalmente, mas n√£o.\nSe voc√™ adicionar um contexto types na configura√ß√£o, o NGINX fica ainda mais bobo e s√≥ interpreta os arquivos configurados por voc√™. Ent√£o se voc√™ s√≥ definir o text/css css nesse contexto, o NGINX vai interpretar o arquivo html apenas como texto plano.\nValide e recarregue a nova configura√ß√£o e visite o servidor novamente. Envie uma request para o arquivo CSS mais uma vez, e dessa vez o arquivo deve ser interpretado como um arquivo text/css\ncurl -I http://nginx.test/mini.min.css # Server: nginx/1.27.4 # Date: Tue, 25 Feb 2025 00:48:15 GMT # Content-Type: text/css # Content-Length: 46887 # Last-Modified: Tue, 25 Feb 2025 00:44:34 GMT # Connection: keep-alive # ETag: \u0026#34;67bd1272-b727\u0026#34; # Accept-Ranges: bytes Visite o servidor para uma verifica√ß√£o visual, e o site deve estar mais agrad√°vel aos olhos dessa vez:\nComo incluir arquivos de configura√ß√£o parciais Mapear os tipos de arquivo com o contexto types pode funcionar para projetos pequenos, mas para projetos grandes vira um pesadelo.\nO NGINX prov√™ uma solu√ß√£o para esse problema. Se voc√™ listar os arquivos dentro do diret√≥rio /etc/nginx novamente, voc√™ vai ver um arquivo chamado mime.types.\nVamos ver o conte√∫do desse arquivo:\ncat /etc/mime.types # types { # text/html html htm shtml; # text/css css; # text/xml xml; # image/gif gif; # image/jpeg jpeg jpg; # application/javascript js; # application/atom+xml atom; # application/rss+xml rss; # text/mathml mml; # text/plain txt; # text/vnd.sun.j2me.app-descriptor jad; # text/vnd.wap.wml wml; # text/x-component htc; # image/png png; # image/tiff tif tiff; # image/vnd.wap.wbmp wbmp; # image/x-icon ico; # image/x-jng jng; # image/x-ms-bmp bmp; # image/svg+xml svg svgz; # image/webp webp; # application/font-woff woff; # application/java-archive jar war ear; # application/json json; # application/mac-binhex40 hqx; # application/msword doc; # application/pdf pdf; # application/postscript ps eps ai; # application/rtf rtf; # application/vnd.apple.mpegurl m3u8; # application/vnd.ms-excel xls; # application/vnd.ms-fontobject eot; # application/vnd.ms-powerpoint ppt; # application/vnd.wap.wmlc wmlc; # application/vnd.google-earth.kml+xml kml; # application/vnd.google-earth.kmz kmz; # application/x-7z-compressed 7z; # application/x-cocoa cco; # application/x-java-archive-diff jardiff; # application/x-java-jnlp-file jnlp; # application/x-makeself run; # application/x-perl pl pm; # application/x-pilot prc pdb; # application/x-rar-compressed rar; # application/x-redhat-package-manager rpm; # application/x-sea sea; # application/x-shockwave-flash swf; # application/x-stuffit sit; # application/x-tcl tcl tk; # application/x-x509-ca-cert der pem crt; # application/x-xpinstall xpi; # application/xhtml+xml xhtml; # application/xspf+xml xspf; # application/zip zip; # application/octet-stream bin exe dll; # application/octet-stream deb; # application/octet-stream dmg; # application/octet-stream iso img; # application/octet-stream msi msp msm; # application/vnd.openxmlformats-officedocument.wordprocessingml.document docx; # application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx; # application/vnd.openxmlformats-officedocument.presentationml.presentation pptx; # audio/midi mid midi kar; # audio/mpeg mp3; # audio/ogg ogg; # audio/x-m4a m4a; # audio/x-realaudio ra; # video/3gpp 3gpp 3gp; # video/mp2t ts; # video/mp4 mp4; # video/mpeg mpeg mpg; # video/quicktime mov; # video/webm webm; # video/x-flv flv; # video/x-m4v m4v; # video/x-mng mng; # video/x-ms-asf asx asf; # video/x-ms-wmv wmv; # video/x-msvideo avi; # } O arquivo cont√©m uma longa lista de tipos de arquivo e suas extens√µes. Para usar esse arquivo dentro do seu arquivo de configura√ß√£o, atualize sua configura√ß√£o como a seguinte:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; } } O antigo contexto types agora foi substitu√≠do pela nova diretiva include. Como o nome sugere, essa diretiva permite que o conte√∫do de um arquivo seja incluso em outro.\nValide e recarregue o arquivo de configura√ß√£o e mande uma request para o arquivo mini.min.css novamente:\ncurl -I http://nginx.test/mini.min.css # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Tue, 25 Feb 2025 00:56:40 GMT # Content-Type: text/css # Content-Length: 46887 # Last-Modified: Tue, 25 Feb 2025 00:44:34 GMT # Connection: keep-alive # ETag: \u0026#34;67bd1272-b727\u0026#34; # Accept-Ranges: bytes Roteamento din√¢mico no NGINX O arquivo de configura√ß√£o que voc√™ escreveu na se√ß√£o passada foi uma configura√ß√£o muito simples de um servidor de conte√∫do est√°tico. Tudo que ele fazia era buscar o arquivo correspondente a URL que o cliente visita e retornar uma resposta.\nEnt√£o se o usu√°rio buscar por arquivos na raiz como index.html, sobre.html ou mini.min.css NGINX vai retornar o arquivo. Mas se voc√™ buscar uma rota como http://nginx.test/nada, ele vai responder com a p√°gina de 404 padr√£o:\nNessa se√ß√£o do post, voc√™ vai aprender sobre o contexto location, vari√°veis, redirecionamentos, reescritas e a diretiva try_files. V√£o ter novos projetos nessa se√ß√£o, mas os conceitos que voc√™ vai aprender aqui v√£o ser necess√°rios nas se√ß√µes seguintes\nO arquivo de configura√ß√£o vai mudar bastante nessa se√ß√£o, ent√£o n√£o esque√ßa de validar e recarregar o arquivo de configura√ß√£o a cada atualiza√ß√£o.\nCorrespond√™ncia de localiza√ß√£o O primeiro conceito que vamos discutir nessa se√ß√£o √© o contexto location. Atualize sua configura√ß√£o como a seguinte:\nevents { } http { server { listen 80; server_name nginx.test; location /machado { return 200 \u0026#34;Bentinho.\\nCapitolina.\\n\u0026#34;; } } } N√≥s substitu√≠mos a diretiva root com o novo contexto location. Esse contexto normalmente fica dentro de blocos de server. Podem existir m√∫ltiplos contextos location dentro de um contexto server.\nSe voc√™ enviar uma request para http://nginx.test/machado, voc√™ vai receber uma resposta 200 e uma lista de personagens do Machado de Assis.\ncurl -i http://nginx.test/machado # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Tue, 25 Feb 2025 02:07:58 GMT # Content-Type: text/plain # Content-Length: 22 # Connection: keep-alive # Bentinho. # Capitolina. Se voc√™ mandar uma request para http://nginx.test/machado-assis, voc√™ vai receber a mesma resposta:\ncurl -i http://nginx.test/machado-assis # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Tue, 25 Feb 2025 02:08:38 GMT # Content-Type: text/plain # Content-Length: 22 # Connection: keep-alive # Bentinho. # Capitolina. Isso acontece porque, escrevendo location /machado, voc√™ est√° dizendo para o NGINX para corresponder qualquer URI que comece com \u0026ldquo;machado\u0026rdquo;. Esse tipo de correspond√™ncia √© chamado de correspond√™ncia por prefixo ou prefix match\nPara performar uma correspond√™ncia exata, voc√™ pode atualizar o c√≥digo pelo seguinte:\nevents { } http { server { listen 80; server_name nginx.test; location = /machado { return 200 \u0026#34;Bentinho.\\nCapitolina.\\n\u0026#34;; } } } Adicionando uma sinal de igual = antes da URI vai instruir o NGINX para responder apenas a URL que tenha a correspond√™ncia exata. Agora se voc√™ mandar uma request para qualquer coisa que n√£o seja /machado, voc√™ vai ter uma resposta 404.\nOutro tipo de correspond√™ncia no NGINX √© a correspond√™ncia por regex. Usando esse tipo de correspond√™ncia voc√™ pode checar a URL com express√µes regulares.\nevents { } http { server { listen 80; server_name nginx.test; location ~ /machado[0-9] { return 200 \u0026#34;Bentinho.\\nCapitolina.\\n\u0026#34;; } } } Substituindo o antigo = por um ~, voc√™ est√° dizendo ao NGINX para fazer uma correspond√™ncia por express√£o regular. Fazendo essa config significar que o NGINX s√≥ vai responder se tiver um n√∫mero depois da palavra \u0026ldquo;machado\u0026rdquo;\nUma correspond√™ncia por regex √© case sensitive por padr√£o, o que significa que se voc√™ tornar uma letra mai√∫scula, o location n√£o vai funcionar\nPara tornar isso em case insensitive, voc√™ precisa adicionar um * depois do ~.\nevents { } http { server { listen 80; server_name nginx.test; location ~* /machado[0-9] { return 200 \u0026#34;Bentinho.\\nCapitolina.\\n\u0026#34;; } } } O NGINX coloca prioridades nessas correspond√™ncias, e uma correspond√™ncia por regex tem mais prioridade do que uma correspond√™ncia por prefixo.\nevents { } http { server { listen 80; server_name nginx.test; location /Machado8 { return 200 \u0026#34;correspondencia por prefixo.\\n\u0026#34;; } location ~* /machado[0-9] { return 200 \u0026#34;correspondencia por regex.\\n\u0026#34;; } } } Ao enviar uma request para http://nginx.test/Machado8, voc√™ vai receber a seguinte resposta:\ncurl -i http://nginx.test/Machado8 # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Tue, 25 Feb 2025 02:09:45 GMT # Content-Type: text/plain # Content-Length: 27 # Connection: keep-alive # correspondencia por regex. Mas essa prioridade pode ser alterada. A maior prioridade de correspond√™ncia no NGINX √© uma correspond√™ncia por prefixo preferencial. Para tornar uma correspond√™ncia por prefixo em um preferencial, voc√™ precisa adicionar o modificador ^~ antes da URI de localiza√ß√£o:\nevents { } http { server { listen 80; server_name nginx.test; location ^~ /Machado8 { return 200 \u0026#34;correspondencia por prefixo.\\n\u0026#34;; } location ~* /machado[0-9] { return 200 \u0026#34;correspondencia por regex.\\n\u0026#34;; } } } Agora se voc√™ mandar uma request para http://nginx.test/Machado8, voc√™ vai ter a seguinte resposta:\ncurl -i http://nginx.test/Machado8 # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Wed, 26 Feb 2025 01:09:12 GMT # Content-Type: text/plain # Content-Length: 29 # Connection: keep-alive # correspondencia por prefixo. Dessa vez, a correspond√™ncia por prefixo ganhou. Ent√£o a lista de correspond√™ncias tem a seguinte ordem de prioridade:\nCorrespond√™ncia Modificador Exata = Prefixo preferencial ^~ REGEX ~¬†ou¬†~* Prefixo Nenhum Vari√°veis no NGINX Vari√°veis no NGINX s√£o semelhantes a vari√°veis em outras linguagens de programa√ß√£o. A diretiva set pode ser usada para declarar novas vari√°veis em qualquer lugar no arquivo de configura√ß√£o:\nset $\u0026lt;nome_da_variavel\u0026gt; \u0026lt;valor_da_variavel\u0026gt;; # set nome \u0026#34;Felipe\u0026#34; # set idade 20 # set esta_trabalhando true Vari√°veis podem ser de tr√™s tipos:\nString Inteiro Booleano Fora as vari√°veis que voc√™ declara, existem vari√°veis embutidas nos m√≥dulos do NGINX. Um √≠ndice em ordem alfab√©tica dessas vari√°veis est√° dispon√≠vel na documenta√ß√£o oficial.\nPara ver as vari√°veis em a√ß√£o, atualize a configura√ß√£o como a seguinte:\nevents { } http { server { listen 80; server_name nginx.test; return 200 \u0026#34;Host - $host\\nURI - $uri\\nArgs - $args\\n\u0026#34;; } } Fazendo uma request para o servidor, voc√™ deve receber uma resposta como a seguinte:\ncurl -i \u0026#39;http://nginx.test/teste?parametro=valor\u0026#39; # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Wed, 26 Feb 2025 01:19:20 GMT # Content-Type: text/plain # Content-Length: 54 # Connection: keep-alive # Host - nginx.test # URI - /teste # Args - parametro=valor Como voc√™ pode ver, as vari√°veis $host e $uri tem o valor do endere√ßo base acessado e a URI relativa ao endere√ßo base, respectivamente. A vari√°vel $args, como pode ver, cont√©m todos os query params.\nAo inv√©s de printar a string literal dos query params, voc√™ pode acessar os valores individuais usando a vari√°vel $arg.\nevents { } http { server { listen 80; server_name nginx.test; set $nome $arg_nome; # $arg_\u0026lt;query param nome\u0026gt; return 200 \u0026#34;Nome - $nome\\n\u0026#34;; } } Agora a resposta do servidor vai ser como o seguinte:\ncurl -i \u0026#39;http://nginx.test?nome=felipe\u0026#39; Nome - felipe Redirecionamentos e Reescritas Um redirecionamento no NGINX √© o mesmo de redirecionar em qualquer outra plataforma. Para demonstrar como os redirecionamentos funcionam, atualize sua configura√ß√£o para ser algo como o seguinte:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; location = /pagina_index { return 307 /index.html; } location = /pagina_sobre { return 307 /sobre.html; } } } Agora se voc√™ mandar uma request para http://nginx.test/pagina_sobre, voc√™ vai ser redirecionado para http://nginx.test/sobre.html:\ncurl -I http://nginx.test/pagina_sobre # HTTP/1.1 307 Temporary Redirect # Server: nginx/1.27.4 # Date: Sun, 02 Mar 2025 00:22:15 GMT # Content-Type: text/html # Content-Length: 171 # Location: http://nginx.test/sobre.html # Connection: keep-alive Como pode ver, o servidor respondeu com um status code de 307 e o location indica a url http://nginx.test/sobre.html. Se voc√™ visitar http://nginx.test/pagina_sobre, voc√™ vai ver que a URL vai automaticamente mudar para http://nginx.test/sobre.html.\nUma diretiva rewrite, no entanto, funciona um pouco diferente. Ela muda a URI internamente, sem deixar o usu√°rio saber. Para v√™-lo em a√ß√£o, atualize sua configura√ß√£o como o seguinte:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; rewrite /pagina_index /index.html; rewrite /pagina_sobre /sobre.html; } } Agora se voc√™ mandar uma request para http://nginx.test/pagina_sobre, voc√™ vai ter uma resposta 200 e o c√≥digo HTML para a p√°gina sobre.html na resposta:\ncurl -i http://nginx.test/pagina_sobre # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Sun, 02 Mar 2025 00:41:29 GMT # Content-Type: text/html # Content-Length: 884 # Last-Modified: Tue, 25 Feb 2025 00:44:34 GMT # Connection: keep-alive # ETag: \u0026#34;67bd1272-374\u0026#34; # Accept-Ranges: bytes # \u0026lt;!DOCTYPE html\u0026gt; # \u0026lt;html lang=\u0026#34;pt-br\u0026#34;\u0026gt; # \u0026lt;head\u0026gt; # \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; # \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;IE=edge\u0026#34;\u0026gt; # \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34;\u0026gt; # \u0026lt;title\u0026gt;Exemplo site est√°tico\u0026lt;/title\u0026gt; # \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;mini.min.css\u0026#34;\u0026gt; # \u0026lt;style\u0026gt; # .container { # max-width: 1024px; # margin-left: auto; # margin-right: auto; # } # # h1 { # text-align: center; # } # \u0026lt;/style\u0026gt; # \u0026lt;/head\u0026gt; # \u0026lt;body class=\u0026#34;container\u0026#34;\u0026gt; # \u0026lt;header\u0026gt; # \u0026lt;a class=\u0026#34;button\u0026#34; href=\u0026#34;index.html\u0026#34;\u0026gt;Index\u0026lt;/a\u0026gt; # \u0026lt;a class=\u0026#34;button\u0026#34; href=\u0026#34;sobre.html\u0026#34;\u0026gt;Sobre\u0026lt;/a\u0026gt; # \u0026lt;a class=\u0026#34;button\u0026#34; href=\u0026#34;nada\u0026#34;\u0026gt;Nada\u0026lt;/a\u0026gt; # \u0026lt;/header\u0026gt; # \u0026lt;img src=\u0026#34;./nginx.jpg\u0026#34; alt=\u0026#34;Logo do NGINX\u0026#34;\u0026gt; # \u0026lt;div class=\u0026#34;card fluid\u0026#34;\u0026gt; # \u0026lt;h1\u0026gt;esse √© o arquivo de \u0026lt;strong\u0026gt;sobre.html\u0026lt;/strong\u0026gt;\u0026lt;/h1\u0026gt; # \u0026lt;/div\u0026gt; # \u0026lt;/body\u0026gt; # \u0026lt;/html\u0026gt; Agora se voc√™ visitar essa URI no browser, voc√™ vai ver a p√°gina sobre.html enquanto a URI n√£o √© alterada\nFora a parte de como se lida com a mudan√ßa de URI, tem outra diferen√ßa entre o redirecionamento e a reescrita. Quando uma reescrita acontece, o contexto server √© recalculada pelo NGINX. Ent√£o uma reescrita √© mais pesada do que um redirecionamento.\nComo tentar por m√∫ltiplos arquivos O conceito final que vou mostrar nessa se√ß√£o √© a diretiva try_files. Ao inv√©s de responder com um √∫nico arquivo, a diretiva try_files permite voc√™ checar a exist√™ncia de m√∫ltiplos arquivos.\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; try_files /nginx.jpg /nao_encontrado; location /nao_encontrado { return 404 \u0026#34;Infelizmente n√£o encontramos o que voc√™ pediu!\\n\u0026#34;; } } } Como pode ver, uma nova diretiva try_files foi adicionada. Adicionando try_files /nginx.jpg /nao_encontrado; voc√™ est√° instruindo o NGINX para procurar por um arquivo chamado nginx.jpg na raiz sempre que uma request chegar. Se n√£o existir, v√° para a URI /not_found.\nO problema em escrever uma diretiva try_files dessa forma √© que n√£o importa qual URL voc√™ visite, contanto que a request seja recebida pelo servidor e a imagem nginx.jpg for encontrada no disco, NGINX vai retornarn√°-la.\nE √© por isso que try_files √© comumente utilizada com a vari√°vel $uri\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; try_files $uri /nao_encontrado; location /nao_encontrado { return 404 \u0026#34;Infelizmente n√£o encontramos o que voc√™ pediu!\\n\u0026#34;; } } } Escrevendo try_files $uri /nao_encontrado; voc√™ est√° instruindo o NGINX para tentar pela URI requisitada pelo cliente primeiro. Se ele n√£o encontrar o primeiro, ele vai tentar o pr√≥ximo.\nAgora se voc√™ visitar http://nginx.test/index.html voc√™ deve receber a p√°gina index.html normalmente. O mesmo valo para a p√°gina sobre.html mas se voc√™ requisitar um arquivo que n√£o existe, voc√™ via receber a resposta da rota /not_found\nUma coisa que talvez voc√™ j√° tenha percebido √© que se voc√™ visitar a raiz do servidot http://nginx.test voc√™ vai receber a resposta 404.\nIsso acontece porque quando voc√™ est√° requisitando pela raiz do servidor, a vari√°vel $uri n√£o corresponde a nenhum arquivo existente ent√£o o NGINX serve a URI de fallback. Se voc√™ quer consertar esse problema, atualize sua configura√ß√£o como o seguinte:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; root /srv/exemplos-nginx/static-demo; try_files $uri $uri/ /nao_encontrado; location /nao_encontrado { return 404 \u0026#34;Infelizmente n√£o encontramos o que voc√™ pediu!\\n\u0026#34;; } } } Ao escrever try_files $uri $uri/ /nao_encontrado; voc√™ est√° instruindo o NGINX para tentar pela URI requisitada primeiro. Se isso n√£o funcionar ent√£o tentar a URI requisitada como um diret√≥rio, e quando o NGINX procurar por um diret√≥rio ele automaticamente come√ßa a procurar por um arquivo index.html.\nO try_files √© o tipo de diretiva que pode ser usada em um n√∫mero de varia√ß√µes. Nas pr√≥ximas se√ß√µes voc√™ vai encontrar outras varia√ß√µes mas eu sugiro que voc√™ fa√ßa alguma pesquisa na internet sobre os diferentes usos da diretiva.\nLogs no NGINX Por padr√£o, os arquivos de log do NGINX s√£o localizados dentro da pasta /var/log/nginx. Se voc√™ listar o conte√∫do deste diret√≥rio, voc√™ via ver algo como o seguinte:\nls -lh /var/log/nginx/ # lrwxrwxrwx 1 root root 11 Feb 6 00:26 access.log -\u0026gt; /dev/stdout # lrwxrwxrwx 1 root root 11 Feb 6 00:26 error.log -\u0026gt; /dev/stderr Vamos come√ßar limpando os dois arquivos\n# deleta os arquivos antigos sudo rm /var/log/nginx/access.log /var/log/nginx/error.log # criar os novos arquivos sudo touch /var/log/nginx/access.log /var/log/nginx/error.log # reabrir os arquivos de log sudo nginx -s reopen Se voc√™ n√£o disparar um sinal de reopen pro NGINX, ele vai continuar escrevendo logs para as stream de logs antigas e os novos arquivos v√£o continuar vazios.\nAgora para fazer uma entrada no access log, mande uma request para o servidor.\ncurl -I http://nginx.test # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Mon, 03 Mar 2025 21:29:35 GMT # Content-Type: text/html # Content-Length: 878 # Last-Modified: Tue, 25 Feb 2025 00:44:34 GMT # Connection: keep-alive # ETag: \u0026#34;67bd1272-36e\u0026#34; # Accept-Ranges: bytes sudo cat /var/log/nginx/access.log # 192.168.100.86 - - [03/Mar/2025:21:29:35 +0000] \u0026#34;HEAD / HTTP/1.1\u0026#34; 200 0 \u0026#34;-\u0026#34; \u0026#34;curl/8.12.1\u0026#34; Como pode ver, uma nova entrada foi adicionada no arquivo access.log. Qualquer request para o servidor vai ser logado nesse arquivo por padr√£o. Mas podemos mudar isso usando a diretiva access_log.\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; location / { return 200 \u0026#34;Isso vai ser logado no arquivo padr√£o.\\n\u0026#34;; } location = /admin { access_log /var/logs/nginx/admin.log; return 200 \u0026#34;Isso vai ser logado em um arquivo separado.\\n\u0026#34;; } location = /sem_log { access_log off; return 200 \u0026#34;Isso n√£o vai ser logado.\\n\u0026#34;; } } } O primeiro access_log dentro do bloco location /admin instrui o NGINX para escrever qualquer access log dessa URI para o arquivo /var/logs/nginx/admin.log. O segundo dentro do location /sem_log desliga o access_log para essa location completamente.\nValide e recarregue a configura√ß√£o. Agora se voc√™ enviar requests para essas URIs e inspecionar os arquivos de log, eles v√£o estar de acordo com o que foi configurado.\nO arquivo error.log, por outro lado, armazena os logs de falha. Para fazer uma entrada no error.log, voc√™ ter√° que fazer o NGINX crashar. Para faz√™-lo, atualize sua configura√ß√£o como a seguinte:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; return 200 \u0026#34;...\u0026#34; \u0026#34;...\u0026#34;; } } Como voc√™ sabe, a diretiva return s√≥ recebe dois par√¢metros, mas aqui n√≥s passamos tr√™s. Tente recarregar a configura√ß√£o e voc√™ deve ser apresentado com uma mensagem de erro:\nsudo nginx -s reload # nginx: [emerg] invalid number of arguments in \u0026#34;return\u0026#34; directive in /etc/nginx/nginx.conf:14 Cheque o conte√∫do do log de erro e a mensagem deve estar presente l√° tamb√©m:\nsudo cat /var/log/nginx/error.log # 2025/03/03 21:49:10 [emerg] 106#106: invalid number of arguments in \u0026#34;return\u0026#34; directive in /etc/nginx/nginx.conf:14 Mensagens de erro tem n√≠veis. Uma entrada notice no log de erro √© inofensivo, mas um emerg ou entrada de emerg√™ncia deve ser resolvida logo.\nExistem oito n√≠veis de mensagem de erro:\ndebug - Informa√ß√µes √∫teis de debug para determinar onde est√° o problema info - Mensagens informativas que n√£o s√£o necess√°rias de ler, mas s√£o boas de se saber notice - Algor normal aconteceu e n√£o vale basicamente nada warn - Algo inesperado aconteceu, mas n√£o deve ser algo preocupante error - Alguma coisa n√£o foi bem sucedida crit - Existem problemas cr√≠ticos no funcionamento do servidor alert - Alguma a√ß√£o √© necess√°ria emerg - O sistema est√° inutiliz√°vel e requer aten√ß√£o imediata Por padr√£o, o NGINX grava todos os n√≠veis de mensagem. Voc√™ pode sobrescrever esse comportamento usando a diretiva error_log. Se voc√™ quer determinar que o n√≠vel m√≠nimo de erro deve ser warn, atualize sua configura√ß√£o como a seguinte:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; error_log /var/log/error.log warn; return 200 \u0026#34;...\u0026#34; \u0026#34;...\u0026#34;; } } Para a maioria dos projetos, deixar a configura√ß√£o de erro como est√° deve ser o suficiente. A √∫nica sugest√£o √© setar o log m√≠nimo de erro para o warn. Dessa forma voc√™ n√£o tem de ver entradas desnecess√°rias no log de erro.\nDe toda forma, se quiser aprender mais sobre customizar os logs no NGINX, consulte a documenta√ß√£o oficial\nComo usar o NGINX como uma proxy reversa Quando configurado como uma proxy reversa, o NGINX fica entre o client e o servidor backend. O client manda requests para o NGINX, e ent√£o o NGINX passa a request para o backend.\nUma vez que o servidor backend terminar de processar a request, ele manda de volta para o NGINX. Ent√£o, o NGINX retorna a response para o client.\nDurante todo o processo, o client n√£o tem ideia de quem est√° realmente processando a request. Parece complicado na hora de explicar, mas uma vez que voc√™ fizer, ver√° o qu√£o f√°cil √© fazer isso com o NGINX.\nVamos ver uma configura√ß√£o b√°sica e n√£o muito pr√°tica de uma proxy reversa:\nevents { } http { include /etc/nginx/mime.types; server { listen 80; server_name nginx.test; location / { proxy_pass \u0026#34;http://nginx.org/\u0026#34;; } } } Agora se voc√™ visitar http://nginx.test, voc√™ vai ser recebido pelo nginx.org original, mesmo a URL estando inalterada.\nVoc√™ tamb√©m deve conseguir navegar pelo site, acessando cada p√°gina da documenta√ß√£o.\nComo pode ver, em um n√≠vel b√°sico, a diretiva proxy_pass simplesmente passa a request do client para um servidor de terceiros e faz a proxy reversa da resposta pro client.\nNode com NGINX Agora voc√™ sabe como configurar um servidor b√°sico de proxy reverso, voc√™ pode servir uma aplica√ß√£o node usando o NGINX. Eu adicionei uma aplica√ß√£o demo dentro do reposit√≥rio que vem com esse artigo.\nEstou pressupondo que voc√™ tem experi√™ncia com Node.js e sabe como iniciar uma aplica√ß√£o usando o PM2.\nSe voc√™ j√° clonou o reposit√≥rio dentro do /srv/exemplos-nginx ent√£o o projeto node-js-demo deve estar dispon√≠vel no diret√≥rio\nPara essa demo funcionar voc√™ vai precisar instalar o Node.js no seu servidor. Voc√™ pode fazer isso seguindo as instru√ß√µes da documenta√ß√£o oficial\nEssa aplica√ß√£o de demonstra√ß√£o √© um servidor HTTP simples que responde com um status 200 e um payload JSON. Voc√™ pode iniciar a aplica√ß√£o simplesmente executando node app.js mas uma maneira melhor de fazer isso √© usando PM2.\nPara quem n√£o sabe, PM2 √© um gerenciador de projetos usado amplamente em projetos node em produ√ß√£o. Se quiser saber mais, esse link pode ajudar.\nInstale PM2 globalmente executando sudo npm install -g pm2. Depois da instala√ß√£o, execute o seguinte comando dentro do diret√≥rio `/srv/exemplos-nginx/node-js-demo:\npm2 start app.js # [PM2] Spawning PM2 daemon with pm2_home=/root/.pm2 # [PM2] PM2 Successfully daemonized # [PM2] Starting /srv/exemplos-nginx/node-js-demo/app.js in fork_mode (1 instance) # [PM2] Done. # ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê # ‚îÇ id ‚îÇ name ‚îÇ mode ‚îÇ ‚Ü∫ ‚îÇ status ‚îÇ cpu ‚îÇ memory ‚îÇ # ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ # ‚îÇ 0 ‚îÇ app ‚îÇ fork ‚îÇ 0 ‚îÇ online ‚îÇ 0% ‚îÇ 37.4mb ‚îÇ # ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò Voc√™ pode parar a aplica√ß√£o rodando o comando pm2 stop app\nA aplica√ß√£o deve estar rodando agora, mas n√£o deve ser acess√≠vel do lado de fora do servidor. Para verificar se a aplica√ß√£o est√° rodando, envie uma request para o http://localhost:3000 de dentro do seu servidor:\ncurl -i localhost:3000 # HTTP/1.1 200 OK # Content-Type: application/json # Date: Sun, 30 Mar 2025 12:57:28 GMT # Connection: keep-alive # Keep-Alive: timeout=5 # Transfer-Encoding: chunked # { \u0026#34;status\u0026#34;: \u0026#34;success\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Voc√™ est√° aprendendo NGINX!\u0026#34; } Se voc√™ recebeu uma resposta 200, ent√£o o servidor est√° funcionando normalmente. Para configurar o NGINX como uma proxy reversa, abra seu arquivo de configura√ß√£o e atualize o conte√∫do como o seguinte:\nevents { } http { server { listen 80; server_name nginx.test; location / { proxy_pass http://localhost:3000; } } } Nada novo para explicar aqui. Voc√™ s√≥ est√° passando a requisi√ß√£o recebido para o aplica√ß√£o Node.js rodando na porta 3000. Agora se voc√™ enviar uma request para o servidor do lado de fora voc√™ vai receber uma resposta da seguinte forma:\ncurl -i http://nginx.test # HTTP/1.1 200 OK # Server: nginx/1.27.4 # Date: Sun, 30 Mar 2025 13:35:37 GMT # Content-Type: application/json # Transfer-Encoding: chunked # Connection: keep-alive # { \u0026#34;status\u0026#34;: \u0026#34;success\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Voc√™ est√° aprendendo NGIN\u0026#34; } Apesar disso funcionar para um servidor b√°sico como esse, voc√™ pode ter que adicionar mais algumas diretivas para fazer isso funcionar em um cen√°rio do mundo real dependendo dos requisitos da sua aplica√ß√£o.\nPor exemplo, se sua aplica√ß√£o lida com conex√µes de websocket, ent√£o voc√™ deve atualizar sua configura√ß√£o como a seguinte:\nevents { } http { server { listen 80; server_name nginx.test; location / { proxy_pass http://localhost:3000; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#39;upgrade\u0026#39;; } } } A diretiva proxy_http_version define a vers√£o do HTTP do servidor. Por padr√£o √© 1.0, mas para usar websocket √© necess√°rio que seja pelo menos 1.1. A diretiva proxy_set_header √© usada por definir um header no servidor. A sintaxe para essa diretiva √© algo como:\nproxy_set_header \u0026lt;nome do header\u0026gt; \u0026lt;valor do header\u0026gt; Escrevendo proxy_set_header Upgrade $http_upgrade; voc√™ est√° instruindo NGINX para passar o valor da vari√°vel $http_upgrade como header chamado Upgrade, o mesmo pelo header Connection\nSe quiser saber mais sobre proxy de websocket, esse link da documenta√ß√£o oficial pode ajudar.\nDependendo dos headers que sua aplica√ß√£o precisa, voc√™ pode ter que definir mais deles. Mas a configura√ß√£o acima √© comumente utilizada para servir aplica√ß√µes Node.js\nComo usar o NGINX como um load balancer Gra√ßas ao design de proxy reversa do NGINX, voc√™ pode facilmente configurar ele como um load balancer.\nNo diret√≥rio /srv/exemplos-nginx/load-balancer-demo voc√™ deve encontrar uma demonstra√ß√£o que vamos utilizar nessa parte. Caso n√£o tenha clonado o reposit√≥rio nessa pasta ainda, agora √© um bom momento para faz√™-lo.\nNum cen√°rio real, fazer um balanceamento de cargo √© necess√°rio em projetos de larga escala distribu√≠dos em m√∫ltiplos servidores. Mas para essa simples demonstra√ß√£o, eu criei 3 servidores node simples que respondem como o n√∫mero do servidor e o status code 200.\nPara essa demo funcionar voc√™ vai precisar instalar o Node.js no seu servidor. Voc√™ pode fazer isso seguindo as instru√ß√µes da documenta√ß√£o oficial\nAl√©m disso, voc√™ tamb√©m vai precisar do PM2 para rodar os servidores dessa demo.\nSe voc√™ n√£o fez isso ainda, instale o PM2 com o comando npm install -g pm2. Depois da instala√ß√£o acabar, execute o seguinte comando para executar os 3 servidores:\npm2 start /srv/exemplos-nginx/load-balancer-demo/server-1.js pm2 start /srv/exemplos-nginx/load-balancer-demo/server-2.js pm2 start /srv/exemplos-nginx/load-balancer-demo/server-3.js pm2 list # ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê # ‚îÇ id ‚îÇ name ‚îÇ mode ‚îÇ ‚Ü∫ ‚îÇ status ‚îÇ cpu ‚îÇ memory ‚îÇ # ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ # ‚îÇ 0 ‚îÇ server-1 ‚îÇ fork ‚îÇ 0 ‚îÇ online ‚îÇ 0% ‚îÇ 37.4mb ‚îÇ # ‚îÇ 1 ‚îÇ server-2 ‚îÇ fork ‚îÇ 0 ‚îÇ online ‚îÇ 0% ‚îÇ 37.2mb ‚îÇ # ‚îÇ 2 ‚îÇ server-3 ‚îÇ fork ‚îÇ 0 ‚îÇ online ‚îÇ 0% ‚îÇ 37.1mb ‚îÇ # ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò Tr√™s servidores Node.js devem estar rodando em localhost:3001, localhost:3002, localhost:3003 respectivamente.\nAgora atualize sua configura√ß√£o como a seguinte:\nevents { } http { upstream backend_servers { server localhost:3001; server localhost:3002; server localhost:3003; } server { listen 80; server_name nginx.test; location / { proxy_pass http://backend_servers; } } } A configura√ß√£o dentro do contexto de server √© o mesmo que j√° vimos antes. Mas o contexto upstream √© novo. Um upstream no NGINX √© uma cole√ß√£o de servidores que pode ser tratado como apenas um backend.\nEnt√£o os tr√™s servidores que inciamos usando PM2 pode ser colocado dentro de apenas um upstream e voc√™ deixar que o NGINX fa√ßa o balanceamento de carga entre eles.\nPara testar a configura√ß√£o, voc√™ vai ter que mandar mais de uma request para o servidor. Voc√™ pode automatizar o processo usando um loop while em bash:\nwhile sleep 0.5; do curl http://nginx.test; done # resposta do servidor - 2. # resposta do servidor - 3. # resposta do servidor - 1. # resposta do servidor - 3. # resposta do servidor - 1. # resposta do servidor - 2. # resposta do servidor - 2. # resposta do servidor - 3. # resposta do servidor - 1. Voc√™ pode cancelar o loop pressionando Ctrl + C no seu teclado. Como pode ver das respostas do servidor, o NGINX faz o balanceamento de carga automaticamente.\nClaro, dependendo da escala do projeto, balancear a carga pode ser muito mais complicado que isso. Mas o objetivo desse artigo √© te dar uma base. Voc√™ pode parar os servidores node executando pm2 stop all\nComo configurar processos worker e conex√µes worker Como mencionei em se√ß√µes anteriores, o NGINX pode iniciar m√∫ltiplos processos worker, capazes de lidar com milhares de requests cada um.\nsudo systemctl status nginx # ‚óè nginx.service - A high performance web server and a reverse proxy server # Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) # Active: active (running) since Sun 2025-03-23 08:33:11 UTC; 5h 45min ago # Docs: man:nginx(8) # Main PID: 3904 (nginx) # Tasks: 2 (limit: 1136) # Memory: 3.2M # CGroup: /system.slice/nginx.service # ‚îú‚îÄ 3904 nginx: master process /usr/sbin/nginx -g daemon on; master_process on; # ‚îî‚îÄ16443 nginx: worker process Como pode ver, agora tem apenas um processo worker do NGINX no sistema. Entretanto, esse n√∫mero pode ser alterado fazendo uma pequena mudan√ßa no arquivo de configura√ß√£o.\nworker_processes 2; events { } http { server { listen 80; server_name nginx.test; return 200 \u0026#34;Hello World :)\u0026#34;; } } A diretiva worker_process escrita no contexto main √© respons√°vel por definir o n√∫mero de processos worker para iniciar. Agora cheque o servi√ßo do NGINX novamente e voc√™ deve ver dois processos worker:\nsudo systemctl status nginx # ‚óè nginx.service - A high performance web server and a reverse proxy server # Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) # Active: active (running) since Sun 2025-03-23 08:33:11 UTC; 5h 54min ago # Docs: man:nginx(8) # Process: 22610 ExecReload=/usr/sbin/nginx -g daemon on; master_process on; -s reload (code=exited, status=0/SUCCESS) # Main PID: 3904 (nginx) # Tasks: 3 (limit: 1136) # Memory: 3.7M # CGroup: /system.slice/nginx.service # ‚îú‚îÄ 3904 nginx: master process /usr/sbin/nginx -g daemon on; master_process on; # ‚îú‚îÄ22611 nginx: worker process # ‚îî‚îÄ22612 nginx: worker process Definindo o n√∫mero de processos worker √© f√°cil, mas determinar o n√∫mero ideal de processos worker d√° um pouco mais de trabalho.\nOs processos worker tem natureza ass√≠ncrona. Isso significa que eles v√£o processar as requests que chegam o mais r√°pido que o hardware pode.\nAgora considere que seu servidor rode em um processador com um core de processamento. Se voc√™ definir o n√∫mero de processos worker para 1, aquele √∫nico processo vai utilizar 100% da capacidade do processador. Mas se voc√™ definir como 2, os 2 processos v√£o ser capazes de utilizar 50% do processador cada um. Ent√£o aumentar o n√∫mero de processos worker n√£o significa uma performance melhor.\nUma boa regra a se seguir √© determinar o n√∫mero de processos worker como o n√∫mero de cores do seu processador.\nDeterminar o n√∫mero de cores do processador no seu servidor √© muito f√°cil no Linux.\nnproc # 1 Eu estou em uma m√°quina virtual de apenas um core, ent√£o o nproc identifica que tem apenas um core. Agora que voc√™ sabe o n√∫mero de cores, tudo que resta fazer √© definir o n√∫mero na configura√ß√£o.\nAt√© a√≠ tudo bem, mas toda vez que voc√™ fizer upgrade no processador do servidor, vai ter de alterar a configura√ß√£o manualmente.\nO NGINX prov√™ uma forma melhor de lidar com esse problema. Voc√™ pode simplesmente definir o n√∫mero de processos como auto e o NGINX vai definir o n√∫mero de processos baseado no n√∫mero de cores do processador automaticamente.\nworker_processes auto; events { } http { server { listen 80; server_name nginx.test; return 200 \u0026#34;Hello World :)\u0026#34;; } } Inspecione o processo do NGINX novamente:\nsudo systemctl status nginx # ‚óè nginx.service - A high performance web server and a reverse proxy server # Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled) # Active: active (running) since Sun 2025-03-23 08:33:11 UTC; 6h ago # Docs: man:nginx(8) # Process: 22610 ExecReload=/usr/sbin/nginx -g daemon on; master_process on; -s reload (code=exited, status=0/SUCCESS) # Main PID: 3904 (nginx) # Tasks: 2 (limit: 1136) # Memory: 3.2M # CGroup: /system.slice/nginx.service # ‚îú‚îÄ 3904 nginx: master process /usr/sbin/nginx -g daemon on; master_process on; # ‚îî‚îÄ23659 nginx: worker process O n√∫mero de processos worker est√° de volta em 1, isso porque esse √© o mais otimizado nesse servidor.\nAl√©m dos processos worker tamb√©m existem as conex√µes worker, indicando o n√∫mero m√°ximo de conex√µes que um √∫nico worker pode processar.\nAssim como o n√∫mero de processos worker, esse n√∫mero tamb√©m est√° relacionado ao processador e ao n√∫mero de arquivos que seu sistema operacional pode abrir por core.\nEncontrar esse n√∫mero √© bem f√°cil no Linux:\nulimit -n # 1024 Agora que temos esse n√∫mero, tudo que nos resta √© definir isso na configura√ß√£o:\nworker_processes auto; events { worker_connections 1024; } http { server { listen 80; server_name nginx.test; return 200 \u0026#34;Hello World :)\u0026#34;; } } A diretiva worker_connections √© respons√°vel por definir o n√∫mero de conex√µes worker em uma configura√ß√£o. Essa tamb√©m √© a primeira vez que voc√™ est√° alterando o contexto events.\nEm uma se√ß√£o anterior, eu mencionei que esse contexto √© utilizado para definir valores usados pelo NGINX √© um n√≠vel geral. A configura√ß√£o de conex√µes worker √© um exemplo desse tipo de configura√ß√£o.\n","permalink":"https://blog.felpo.dev/posts/guia-b%C3%A1sico-de-nginx/","summary":"\u003cp\u003eHoje vou fazer um dump de tudo que sei de NGINX, mostrando que n√£o √© dif√≠cil dar manuten√ß√£o nos arquivos de configura√ß√£o do seu servidor.\u003c/p\u003e\n\u003cp\u003eDepois de ler esse post voc√™ vai poder:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEntender os arquivos de configura√ß√£o do NGINX\u003c/li\u003e\n\u003cli\u003eConfigurar o NGINX como um servidor web\u003c/li\u003e\n\u003cli\u003eConfigurar o NGINX como um proxy reverso\u003c/li\u003e\n\u003cli\u003eConfigurar o NGINX como um load balancer\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"√≠ndice\"\u003e√çndice\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#introdu%C3%A7%C3%A3o-ao-nginx\"\u003eIntrodu√ß√£o ao NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-instalar-o-nginx\"\u003eComo instalar o NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#introdu%C3%A7%C3%A3o-%C3%A0s-configura%C3%A7%C3%B5es-do-nginx\"\u003eIntrodu√ß√£o √†s configura√ß√µes do NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-configurar-um-servidor-web-b%C3%A1sico\"\u003eComo configurar um servidor web b√°sico\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#escrevendo-seu-primeiro-arquivo-de-configura%C3%A7%C3%A3o\"\u003eEscrevendo seu primeiro arquivo de configura√ß√£o\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-validar-e-recarregar-os-arquivos-de-configura%C3%A7%C3%A3o\"\u003eComo validar e recarregar os arquivos de configura√ß√£o\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-entender-as-diretivas-e-contextos-no-nginx\"\u003eComo entender as diretivas e contextos no NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-servir-conte%C3%BAdo-est%C3%A1tico-usando-nginx\"\u003eComo servir conte√∫do est√°tico usando NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#lidando-com-tipos-de-arquivo-est%C3%A1tico-no-nginx\"\u003eLidando com tipos de arquivo est√°tico no NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-incluir-arquivos-de-configura%C3%A7%C3%A3o-parciais\"\u003eComo incluir arquivos de configura√ß√£o parciais\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#roteamento-din%C3%A2mico-no-nginx\"\u003eRoteamento din√¢mico no NGINX\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#correspond%C3%AAncia-de-localiza%C3%A7%C3%A3o\"\u003eCorrespond√™ncia de localiza√ß√£o\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#vari%C3%A1veis-no-nginx\"\u003eVari√°veis no NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#redirecionamentos-e-reescritas\"\u003eRedirecionamentos e reescritas\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-tentar-m%C3%BAltiplos-arquivos\"\u003eComo tentar m√∫ltiplos arquivos\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#logs-no-nginx\"\u003eLogs no NGINX\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-usar-o-nginx-como-um-proxy-reverso\"\u003eComo usar o NGINX como um proxy reverso\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#node-com-nginx\"\u003eNode com NGINX\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-usar-o-nginx-como-um-load-balancer\"\u003eComo usar o NGINX como um load balancer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#como-configurar-processos-worker-e-conex%C3%B5es-worker\"\u003eComo configurar processos worker e conex√µes worker\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"introdu√ß√£o-ao-nginx\"\u003eIntrodu√ß√£o ao NGINX\u003c/h2\u003e\n\u003cp\u003eApesar de ser mais conhecido como um servidor web, o NGINX √© basicamente um servidor de \u003ca href=\"https://pt.wikipedia.org/wiki/Proxy_reverso\"\u003eproxy reverso\u003c/a\u003e.\u003c/p\u003e","title":"Guia b√°sico de NGINX"},{"content":"Para ser sincero, estou escrevendo este post mais para minhas consultas futuras do que por qualquer outro motivo, mas sei que pode ser √∫til para outras pessoas. Dito isso, tentei explicar com minhas palavras os pontos mais importantes do livro em cada cap√≠tulo.\nLembre-se: nada aqui √© regra absoluta. Tudo pode e deve ser questionado. Agora, sem mais delongas, vamos aos cap√≠tulos!\nProfissionalismo Profissionalismo = Responsabilidade N√£o cause danos ao funcionamento [\u0026hellip;] Software √© muito complexo para ser criado sem bugs. Mas infelizmente, isso n√£o o exime de sua responsabilidade. O corpo humano √© muito complexo para ser entendido plenamente, mas os m√©dicos ainda fazem um juramento para n√£o danific√°-lo. Se eles n√£o se eximem da responsabilidade, por que n√≥s dever√≠amos?\nSe voc√™ faz um estrago no sistema, n√£o pode simplesmente dar de ombros e dizer: \u0026ldquo;Ah, tecnologia √© assim mesmo\u0026rdquo;. Responsabilidade √© chave.\nO QA n√£o deve encontrar nada Se voc√™ envia um c√≥digo para QA esperando que eles encontrem bugs, parab√©ns, voc√™ est√° sendo pregui√ßoso e anti-profissional.\nSempre que um QA (ou pior, um usu√°rio) encontra um bug, voc√™ deve ficar surpreso, desapontado e disposto a evitar que isso aconte√ßa novamente. A ideia √© que QA seja a √∫ltima linha de defesa, n√£o a primeira.\nTodo c√≥digo deve ser testado Voc√™ precisa ter certeza que o c√≥digo funciona, e como voc√™ sabe isso? Testando ele!\nEstou sugerindo 100% de cobertura de testes? N√£o estou sugerindo isso. Estou exigindo. Toda linha de c√≥digo que voc√™ escreve precisa ser testada. Ponto final.\nSe n√£o est√° testado, est√° quebrado. Simples assim.\nN√£o cause danos a estrutura Todo c√≥digo deve ser f√°cil de ser alterado e dar manuten√ß√£o. Se a facilidade da manuten√ß√£o for sacrificada em troca de rapidez no curto prazo, vai ser criado um lama√ßal no c√≥digo, que atrasa todo mundo que entra nele.\nA √∫nica maneira de provar que o software √© f√°cil de alterar √© alterando ele.\nCada vez que olha para um m√≥dulo voc√™ faz pequenas e leves mudan√ßas para melhorar a estrutura. Sempre que ler o c√≥digo, ajuste a estrutura. [\u0026hellip;] Fa√ßa algumas a√ß√µes aleat√≥rias sutis em um c√≥digo, sempre que o ver\nA pol√™mica das 60 horas semanais Robert diz que um programador profissional deve se dedicar 60 horas semanais: 40 para o empregador e 20 para si mesmo. E se voc√™ n√£o pode se comprometer com isso? Bom, segundo ele, voc√™ n√£o √© um profissional.\nConcordo que estudar 20 horas semanais pode te tornar um profissional melhor, mas achar que quem n√£o consegue fazer isso n√£o √© profissional √© absurdo. Pessoas t√™m fam√≠lias, deslocamentos longos, vida fora do trabalho. N√£o √© t√£o simples assim.\nConhecer o seu campo Se voc√™ quer ser um profissional de verdade, precisa conhecer seu territ√≥rio. Isso inclui design patterns, princ√≠pios como SOLID, metodologias como Agile e Scrum, disciplinas como TDD e orienta√ß√£o a objetos, al√©m de artefatos como diagramas UML. Sim, parece muita coisa, mas acredite: entender essas bases vai te poupar muitas dores de cabe√ßa no futuro.\nComo diz o ditado: \u0026ldquo;Aquele que n√£o conhece o passado est√° fadado a repeti-lo\u0026rdquo;. E, no mundo da programa√ß√£o, isso significa reinventar a roda quadrada.\nAprender sobre a √°rea e os princ√≠pios de c√≥digo √© essencial. Afinal, esses conhecimentos atemporais v√™m sendo refinados desde os anos 70, e se ainda est√£o por a√≠, √© porque fazem sentido. Ent√£o, antes de sair digitando como um man√≠aco, vale a pena dar uma olhada no que os mestres do passado j√° descobriram.\nDizendo n√£o Aprender a dizer \u0026ldquo;n√£o\u0026rdquo; pode salvar sua sanidade. Como dizia um ex-chefe meu:\n\u0026ldquo;√â melhor amarelar agora do que envermelhar depois.\u0026rdquo;\nSe seu gerente pergunta se a tela de login fica pronta at√© amanh√£ e voc√™ sabe que √© imposs√≠vel, diga n√£o. N√£o existe \u0026ldquo;eu vou tentar\u0026rdquo;. Ou voc√™ sabe que consegue ou sabe que n√£o consegue.\nDizendo sim Comprometimento significa:\nVoc√™ diz que vai fazer. Voc√™ √© honesto. Voc√™ faz. Nada de \u0026ldquo;eu possivelmente termino na ter√ßa\u0026rdquo;. Se voc√™ se compromete, voc√™ vai terminar na ter√ßa.\nCaso ocorra um imprevisto, avise cedo. Ningu√©m gosta de surpresas de √∫ltima hora.\nCodificando Se voc√™ est√° cansado ou distra√≠do, n√£o codifique. S√©rio, s√≥ vai piorar as coisas.\nMuitas solu√ß√µes surgem no banho ou no caminho de volta pra casa.\nE lembre-se: fazer horas extras para cumprir prazos pode ser contraproducente. C√≥digo ruim escrito √†s 2 da manh√£ vai precisar ser refeito de qualquer forma.\nO livro tamb√©m alerta sobre a \u0026ldquo;falsa entrega\u0026rdquo;‚Äîaquele truque de marcar algo como conclu√≠do sem realmente terminar, apenas para cumprir o prazo. Spoiler: o tempo para arrumar isso depois nunca aparece, e o c√≥digo fica para sempre incompleto.\nOutro ponto crucial: ajudar e ser ajudado. Quando algu√©m pedir sua ajuda, d√™ aten√ß√£o. Quando precisar de ajuda, pe√ßa. N√£o faz sentido passar o dia inteiro travado em um problema quando algu√©m poderia resolver em minutos.\nTest Driven Development (TDD) As tr√™s leis do TDD N√£o escreva c√≥digo de produ√ß√£o sem antes ter um teste que falha. N√£o escreva mais de um teste do que o necess√°rio. N√£o escreva mais c√≥digo do que o necess√°rio para passar no teste. Coragem Por que voc√™ n√£o corrige o c√≥digo ruim quando o v√™? Sua primeira rea√ß√£o ao ver uma fun√ß√£o bagun√ßada √© \u0026ldquo;Isso est√° uma zona, precisa ser limpo\u0026rdquo;. Sua segunda rea√ß√£o √© \u0026ldquo;N√£o vou colocar a m√£o nisso aqui!\u0026rdquo;. Por qu√™? Porque sabe que se tocar corre o risco de quebrar, e se quebrar, a responsabilidade passa a ser sua.\nNovamente, o livro ressalta a import√¢ncia dos testes automatizados e como eles fazem maravilhas pelo seu c√≥digo. Afinal, n√£o h√° nada melhor do que mexer no c√≥digo, rodar os testes e ter a certeza de que nada quebrou‚Äîdesde que os testes sejam bem escritos, claro! Como bem coloca o livro, testes automatizados transformam seu c√≥digo em argila, pronta para ser moldada em estruturas simples e elegantes, sem medo de desmoronar.\nAl√©m disso, o TDD traz outras vantagens, como documenta√ß√£o e design. Um bom teste automatizado serve como uma documenta√ß√£o viva: ele mostra exatamente como cada classe e fun√ß√£o devem ser usadas, sendo muitas vezes mais √∫til do que longos documentos escritos que ningu√©m l√™.\nJ√° no quesito design, o TDD \u0026ldquo;obriga\u0026rdquo; voc√™ a escrever um c√≥digo f√°cil de testar e, como efeito colateral positivo, esse c√≥digo se torna mais leg√≠vel, compreens√≠vel e f√°cil de manter. Escrever o teste antes do c√≥digo √© uma abordagem ofensiva‚Äîo teste molda o c√≥digo. Escrever o teste depois √© defensivo‚Äîvoc√™ protege o c√≥digo com testes. Ambos os estilos t√™m seus m√©ritos, e saber quando usar cada um √© o que separa um profissional experiente de um programador teimoso.\nPor fim, vale lembrar que TDD n√£o √© uma religi√£o nem uma f√≥rmula m√°gica. Existem situa√ß√µes em que ele pode mais atrapalhar do que ajudar, e um desenvolvedor profissional sabe reconhecer quando √© hora de abrir m√£o da ferramenta em prol da produtividade.\nEstrat√©gias de Teste Pulando alguns cap√≠tulos menos relevantes, aqui o livro fala sobre a famosa Pir√¢mide de Testes:\n100% do c√≥digo deve ser coberto por testes de unidade 50% do c√≥digo deve ser coberto por testes de componentes 25% do c√≥digo deve ser coberto por testes de integra√ß√£o 10% do c√≥digo deve ser coberto por testes de sistema 5% do c√≥digo deve ser coberto por testes explorat√≥rios manuais Agora, vamos entender o que isso significa na pr√°tica.\nTestes de Unidade Testes de unidade s√£o os mais b√°sicos e devem cobrir 100% do c√≥digo. Eles testam pequenas partes isoladas do sistema, como fun√ß√µes e m√©todos, garantindo que cada pe√ßa individual funciona como esperado.\nTestes de Componentes Na minha interpreta√ß√£o, testes de componentes verificam pequenos conjuntos do sistema funcionando juntos. Um teste de unidade pode validar uma fun√ß√£o isolada de um repository, enquanto um teste de componente verificaria a integra√ß√£o entre o controller, a model e o repository. Esses testes focam no \u0026ldquo;caminho feliz\u0026rdquo;, garantindo que tudo funcione quando n√£o h√° falhas. J√° os cen√°rios problem√°ticos devem ser cobertos pelos testes de unidade.\nTestes de Integra√ß√£o Os testes de integra√ß√£o aumentam a escala, verificando se v√°rios componentes conseguem trabalhar juntos. Eles s√£o coreografados e n√£o testam a l√≥gica de neg√≥cio, mas sim se os diferentes m√≥dulos do sistema conseguem se comunicar corretamente. Um exemplo pr√°tico seria testar se um controller consegue chamar corretamente um repository, interagir com os models e ainda enviar um e-mail via uma fila de mensagens.\nTestes de Sistema Segundo o livro, esses s√£o os testes end-to-end (E2E), que validam o funcionamento do sistema como um todo. Eles s√£o mais demorados e custosos, pois envolvem intera√ß√µes reais entre os diversos servi√ßos, bancos de dados e APIs externas.\nTestes Explorat√≥rios Manuais Aqui entra a parte \u0026ldquo;humana\u0026rdquo; da pir√¢mide. Testadores (ou desenvolvedores destemidos) exploram o sistema buscando falhas, testando edge cases e tentando encontrar exce√ß√µes que possam ter passado despercebidas pelos testes automatizados. Afinal, sempre existe aquele cen√°rio bizarro que s√≥ um usu√°rio real conseguiria descobrir.\nGerenciamento de Tempo Discuss√µes \u0026amp; Discord√¢ncias \u0026ldquo;Qualquer discuss√£o que n√£o puder ser resolvida em cinco minutos n√£o pode ser resolvida pela discuss√£o.\u0026rdquo;\nSe uma discuss√£o se arrasta por mais de cinco minutos, √© um sinal claro de que n√£o existem evid√™ncias concretas sustentando nenhum dos lados. Nesse caso, o debate deixou de ser t√©cnico e virou algo quase \u0026ldquo;religioso\u0026rdquo;, baseado apenas em opini√µes e cren√ßas.\nSem dados, discuss√µes longas raramente levam a um consenso. O que fazer, ent√£o? Simples: pare de argumentar e v√° atr√°s de mais informa√ß√µes. Teste, simule, fa√ßa experimentos! Em alguns casos, quando os dois lados parecem igualmente vi√°veis, talvez seja mais produtivo jogar uma moeda do que continuar debatendo eternamente.\nMas aten√ß√£o! Se voc√™ aceitou uma decis√£o, entre no barco de verdade. Nada de \u0026ldquo;concordar\u0026rdquo; s√≥ para encerrar a conversa e depois ficar no modo passivo-agressivo, esperando algo dar errado para soltar um \u0026ldquo;eu j√° sabia que isso n√£o ia dar certo\u0026rdquo;. Se voc√™ concordou, os acertos s√£o seus, e os erros tamb√©m.\nAtoleiros, Lama√ßais e P√¢ntanos Sabe o que √© pior do que um beco sem sa√≠da? Um lama√ßal. Pelo menos no beco sem sa√≠da voc√™ logo percebe que precisa dar meia-volta. No lama√ßal, voc√™ v√™ a luz no fim do t√∫nel e acredita que seguir em frente ser√° mais r√°pido do que voltar‚Äîmas, surpresa! N√£o √©.\nEsse tipo de armadilha come√ßa quando voc√™ percebe que tomou uma decis√£o errada (seja de design, estrutura, arquitetura\u0026hellip;) e, ao inv√©s de refazer o caminho, escolhe seguir em frente na esperan√ßa de que \u0026ldquo;vai dar tudo certo\u0026rdquo;. Spoiler: n√£o vai.\nO pensamento que prende as pessoas no lama√ßal √© o cl√°ssico \u0026ldquo;J√° investi muito tempo nisso, ent√£o √© melhor continuar do que refazer do zero.\u0026rdquo; Mas essa √© uma ilus√£o perigosa. O momento certo para parar e mudar de rumo √© exatamente quando voc√™ percebe que tomou a decis√£o errada. Insistir no erro s√≥ te afunda mais.\nPior ainda, continuar seguindo em frente n√£o √© s√≥ mentir para si mesmo‚Äî√© enganar sua equipe, sua empresa e seus clientes. Voc√™ pode at√© dizer \u0026ldquo;Vai ficar tudo bem!\u0026rdquo;, mas, no fundo, sabe que est√° acelerando em dire√ß√£o ao desastre.\nO segredo para evitar lama√ßais? Saber a hora de dizer: \u0026ldquo;Chega, vamos voltar e fazer direito.\u0026rdquo;\nEstimativa Empresas tratam estimativas como comprometimentos. Desenvolvedores as tratam como palpites.\nUma estimativa √© uma distribui√ß√£o, n√£o um n√∫mero m√°gico. Para melhorar suas previs√µes, o m√©todo PERT sugere calcular tr√™s estimativas:\nOtimista (O): Se tudo der certo. Nominal (N): A estimativa mais prov√°vel. Pessimista (P): Se tudo der errado. F√≥rmula da previs√£o:\n$\\frac{O + 4N + P}{6}$ O resultado vai ser a dura√ß√£o da tarefa. Tendo as seguintes estimativas: O: 1, N: 3, P: 12. Ter√≠amos (1 + 12 + 12) / 6 ou em trono de 4,2 dias.\nPara sabermos a diverg√™ncia padr√£o, podemos usar o seguinte c√°lculo:\n$\\frac{P - O}{6}$ Quando o resultado da diverg√™ncia √© grande, a incerteza tamb√©m √©. No exemplo de antes, a diverg√™ncia √© de (12 -1)/6 ou por volta de 1,8 dias\nPress√£o N√£o sucumba √† tenta√ß√£o de \u0026ldquo;codar sujo\u0026rdquo; para ser r√°pido. R√°pido e sujo s√£o paradoxos.\n\u0026ldquo;Voc√™ descobre no que realmente acredita quando a press√£o bate. Se voc√™ abandona TDD ou c√≥digo limpo na crise, nunca acreditou neles de verdade.\u0026rdquo;\nSe voc√™ acredita que boas pr√°ticas funcionam, siga-as especialmente quando as coisas apertam.\nE assim encerramos. Espero que esse resumo seja √∫til para voc√™ (e para o eu do futuro que vai reler isso).\n","permalink":"https://blog.felpo.dev/posts/as-partes-importantes-de-clean-coder-o-codificador-limpo/","summary":"\u003cp\u003ePara ser sincero, estou escrevendo este post mais para minhas consultas futuras do que por qualquer outro motivo, mas sei que pode ser √∫til para outras pessoas. Dito isso, tentei explicar com minhas palavras os pontos mais importantes do livro em cada cap√≠tulo.\u003c/p\u003e\n\u003cp\u003eLembre-se: nada aqui √© regra absoluta. Tudo pode e deve ser questionado. Agora, sem mais delongas, vamos aos cap√≠tulos!\u003c/p\u003e\n\u003ch2 id=\"profissionalismo\"\u003eProfissionalismo\u003c/h2\u003e\n\u003ch3 id=\"profissionalismo--responsabilidade\"\u003eProfissionalismo = Responsabilidade\u003c/h3\u003e\n\u003ch4 id=\"n√£o-cause-danos-ao-funcionamento\"\u003eN√£o cause danos ao funcionamento\u003c/h4\u003e\n\u003cblockquote\u003e\n\u003cp\u003e[\u0026hellip;] Software √© muito complexo para ser criado sem bugs. Mas infelizmente, isso n√£o o exime de sua responsabilidade. O corpo humano √© muito complexo para ser entendido plenamente, mas os m√©dicos ainda fazem um juramento para n√£o danific√°-lo. Se eles n√£o se eximem da responsabilidade, por que n√≥s dever√≠amos?\u003c/p\u003e","title":"As partes importantes de Clean Coder (O Codificador Limpo)"},{"content":"Parab√©ns! Se voc√™ est√° lendo isso, √© porque conseguiu atravessar o deserto do instalador do Arch Linux. Sobreviveu ao particionamento de disco, configurou o GRUB sem chorar (ou pelo menos escondeu bem), e agora est√° diante de um sistema operacional cru, pronto para ser moldado √† sua imagem e semelhan√ßa.\nMas\u0026hellip; e agora? O que fazer depois de instalar o Arch Linux? Relaxa, aqui est√° o seu mapa do tesouro:\n1. Ferramentas B√°sicas: Git, Navegador e Vim Antes de sair por a√≠ configurando o mundo, vamos garantir que voc√™ tem o b√°sico:\nsudo pacman -S git firefox vim Se j√° tiver algum deles instalado, o pacman vai te avisar. Caso contr√°rio, parab√©ns, agora voc√™ tem um navegador para googlar solu√ß√µes quando algo quebrar.\n2. Deixando o Pacman Mais Charmoso O pacman √© incr√≠vel, mas ele pode ficar ainda melhor. Abra o arquivo de configura√ß√£o:\nsudo vim /etc/pacman.conf Agora:\nDescomente a linha #Color para dar aquele toque de arco-√≠ris ao terminal. Ative downloads paralelos mudando #ParallelDownloads = 5 para ParallelDownloads = 10. Porque esperar √© para os fracos. (Opcional) Adicione a linha ILoveCandy para transformar o progresso do pacman em uma divertida anima√ß√£o. Quem disse que o terminal n√£o pode ser divertido? 3. Atualize o Sistema Nada de andar com software desatualizado. Mantenha tudo fresquinho:\nsudo pacman -Syu Assim voc√™ garante que at√© o kernel est√° na vers√£o mais recente.\n4. Seguran√ßa em Primeiro Lugar: Instale um Firewall Para n√£o deixar portas abertas para visitas indesejadas:\nsudo pacman -S gufw O gufw tem uma interface gr√°fica amig√°vel, perfeita para quem n√£o quer decorar comandos complexos.\n5. Codecs de V√≠deo: Porque Ningu√©m Vive S√≥ de Terminal Quer assistir seus v√≠deos favoritos sem problemas de compatibilidade?\nsudo pacman -S ffmpeg gst-plugins-ugly gst-plugins-bad gst-plugins-good gst-plugins-base gst-libav gstreamer Agora sim, pode dar play sem medo!\n6. Mantenha o Firmware em Dia Atualizar o firmware pode evitar dores de cabe√ßa no futuro:\nsudo pacman -S fwupd sudo fwupdmgr refresh sudo fwupdmgr get-updates Simples e eficiente.\n7. Bluetooth, Ativar! Se o seu dispositivo tem suporte a Bluetooth, √© hora de ligar:\nsudo systemctl start bluetooth.service --now Agora √© s√≥ emparelhar seus dispositivos.\n8. (Opcional) Flatpak: Mais Apps, Mais Divers√£o Quer acessar uma infinidade de aplicativos com facilidade?\nsudo pacman -S flatpak 9. Yay! O AUR √© Todo Seu O AUR (Arch User Repository) √© onde a m√°gia acontece. Para acessar essa maravilha:\nsudo pacman -S --needed base-devel git clone https://aur.archlinux.org/yay-bin.git cd yay-bin makepkg -si Agora voc√™ pode instalar pacotes do AUR com facilidade:\nyay -S pacote-legal E Agora? Agora √© com voc√™! Personalize, experimente, quebre (e conserte) o sistema. Esse √© o esp√≠rito do Arch Linux. Se voc√™ chegou at√© aqui, j√° est√° pronto para dominar o seu PC ‚Äî e quem sabe, o mundo.\n","permalink":"https://blog.felpo.dev/posts/o-que-fazer-depois-de-instalar-o-arch-linux/","summary":"\u003cp\u003eParab√©ns! Se voc√™ est√° lendo isso, √© porque conseguiu atravessar o deserto do instalador do Arch Linux. Sobreviveu ao particionamento de disco, configurou o GRUB sem chorar (ou pelo menos escondeu bem), e agora est√° diante de um sistema operacional cru, pronto para ser moldado √† sua imagem e semelhan√ßa.\u003c/p\u003e\n\u003cp\u003eMas\u0026hellip; e agora? O que fazer depois de instalar o Arch Linux? Relaxa, aqui est√° o seu mapa do tesouro:\u003c/p\u003e","title":"O que fazer depois de instalar o Arch Linux: o Guia para Dominar o Universo (ou pelo menos o seu PC)"},{"content":"Se tem uma coisa que a gente aprende com o tempo, √© que passar horas no terminal pode ser uma experi√™ncia dolorosa ou uma jornada digna de um mestre Jedi. Em 2025, um bom ambiente de desenvolvimento n√£o √© s√≥ um capricho, √© um passaporte para a produtividade! Vamos configurar um terminal que √© r√°pido, bonito e cheio de recursos. Aqui est√£o os passos para transformar seu Ubuntu em uma verdadeira nave espacial da codifica√ß√£o.\nAntes de tudo Tenho um reposit√≥rio com meus arquivos de configura√ß√£o que foram copiados criados com muito suor. √â recomendado que tenha esses arquivos baixados para facilitar as coisas\nLink do repo\nInstalando o Zsh (E se livrando do Bash monocrom√°tico) Vamos instalar o Zsh, porque um terminal sem Zsh √© igual a um anjo sem asas:\nsudo apt update \u0026amp;\u0026amp; sudo apt install zsh -y Agora que temos o Zsh instalado, vamos torn√°-lo o padr√£o:\nchsh -s $(which zsh) Fa√ßa logout e entre novamente para ver a m√°gica acontecer.\nOpcional Adicionar o script baixado do meu reposit√≥rio de arquivos de configura√ß√£o no final do arquivo ~/.zshrc\nAtivando o Autocomplete do Zsh (E economizando digita√ß√µes) Agora que temos o Zsh, queremos que ele complete nossos comandos como um verdadeiro assistente de intelig√™ncia artificial. Vamos instalar o zsh-autosuggestions e o zsh-syntax-highlighting:\ngit clone https://github.com/zsh-users/zsh-autosuggestions ~/.zsh/zsh-autosuggestions echo \u0026#39;source ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh\u0026#39; \u0026gt;\u0026gt; ~/.zshrc # Para ter cores no terminal: git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.zsh/zsh-syntax-highlighting echo \u0026#39;source ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\u0026#39; \u0026gt;\u0026gt; ~/.zshrc Reinicie seu terminal ou rode:\nsource ~/.zshrc Agora seu terminal prev√™ comandos como um m√°gico!\nInstalando uma Nerd Font Pessoalmente eu gosto bastante da fonte Fira Code, segue os passos para baix√°-la e us√°-la\nmkdir ~/.local/share/fonts/ wget -P ~/.local/share/fonts/ \u0026#39;https://github.com/ryanoasis/nerd-fonts/releases/download/v3.3.0/FiraCode.zip\u0026#39; unzip ~/.local/share/fonts/FiraCode.zip -d ~/.local/share/fonts/ Instalando Starship (Deixando o terminal nutella) Para \u0026ldquo;aviadar\u0026rdquo; ainda mais o terminal, siga as instru√ß√µes de instala√ß√£o e configur√ß√£o do Starship\nInstalando o Alacritty (O terminal que voa baixo) O Alacritty √© um dos terminais mais r√°pidos e bonitos que voc√™ pode ter. Para instalar, siga os passos da documenta√ß√£o oficial\nE pronto, temos um terminal de respeito!\nOpcional Copiar os arquivos de configura√ß√£o do meu reposit√≥rio e colar na pasta ~/.config/alacritty, que j√° vai prover um tema bonito para o terminal\nMudando o Terminal Padr√£o do Ubuntu Agora que temos o Alacritty, queremos que ele seja o terminal padr√£o. Para isso rode o seguinte comando para saber onde o Alacritty est√° instalado:\nwhich alacritty Agora rode o comando:\nsudo update-alternatives --install /usr/bin/x-terminal-emulator x-terminal-emulator /caminho/para/alacritty 50 Alterando /caminho/para/alacritty pelo caminho retornado no comando which alacritty\nPor √∫ltimo, rode o seguinte comando para escolher o terminal padr√£o:\nsudo update-alternatives --config x-terminal-emulator Escolha o n√∫mero correspondente ao Alacritty e pronto!\nMudando o Terminal Padr√£o do Nautilus O Nautilus (o gerenciador de arquivos do Ubuntu) ainda pode estar abrindo o terminal antigo. Para corrigir isso instalaremos o seguinte pacote:\nNautilus Open Any Terminal\nAgora, ao abrir o terminal pelo Nautilus, voc√™ estar√° dentro do Alacritty!\nInstalando o tmux (Para multitarefa de verdade) O tmux permite dividir sua tela e gerenciar m√∫ltiplas sess√µes sem perder nada. Para instalar:\nsudo apt install tmux -y Depois de instalado, basta rodar:\ntmux Agora voc√™ tem um terminal turbo com divis√£o de janelas!\nOpcional Baixar o arquivo de configura√ß√£o do tmux e colar na pasta home, tendo atalhos melhores e um tema bonito para o tmux tamb√©m\nInstalando o bat e o eza (Porque cat e ls s√£o do s√©culo passado) Substituir o cat pelo bat e o ls pelo eza faz seu terminal parecer um painel de controle da NASA. Para instal√°-los siga a documenta√ß√£o oficial de cada um\nConclus√£o Agora voc√™ tem um terminal bonito, funcional e r√°pido. Seu ambiente de desenvolvimento est√° preparado para 2025 e al√©m! Agora s√≥ falta escrever c√≥digo de qualidade\u0026hellip; mas isso j√° √© outra hist√≥ria.\n","permalink":"https://blog.felpo.dev/posts/meu-ambiente-de-desenvolvimento-2025/","summary":"\u003cp\u003eSe tem uma coisa que a gente aprende com o tempo, √© que passar horas no terminal pode ser uma experi√™ncia dolorosa ou uma jornada digna de um mestre Jedi. Em 2025, um bom ambiente de desenvolvimento n√£o √© s√≥ um capricho, √© um passaporte para a produtividade! Vamos configurar um terminal que √© r√°pido, bonito e cheio de recursos. Aqui est√£o os passos para transformar seu Ubuntu em uma verdadeira nave espacial da codifica√ß√£o.\u003c/p\u003e","title":"Meu ambiente de desenvolvimento 2025"}]