<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SOLID Dependency Inversion Principle | Felpo Blog</title>
<meta name=keywords content><meta name=description content='Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o Princ√≠pio da Invers√£o de Depend√™ncia (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.
O Drama Antes da Invers√£o
Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:
class EmailService
{
    public function send(string $message): void
    {
        echo "Enviando email: " . $message . "\n";
    }
}

class NotificationManager
{
    private EmailService $emailService;

    public function __construct()
    {
        $this->emailService = new EmailService(); // üö® Bandeira vermelha!
    }

    public function notify(string $message): void
    {
        $this->emailService->send($message);
    }
}
Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua NotificationManager est√° completamente dependente da EmailService. Quer trocar por SMS? Vai ter de refatorar a classe.'><meta name=author content><link rel=canonical href=https://blog.felpo.dev/posts/solid-dependency-inversion-principle/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.felpo.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.felpo.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.felpo.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.felpo.dev/apple-touch-icon.png><link rel=mask-icon href=https://blog.felpo.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.felpo.dev/posts/solid-dependency-inversion-principle/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.felpo.dev/posts/solid-dependency-inversion-principle/"><meta property="og:site_name" content="Felpo Blog"><meta property="og:title" content="SOLID Dependency Inversion Principle"><meta property="og:description" content='Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o Princ√≠pio da Invers√£o de Depend√™ncia (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.
O Drama Antes da Invers√£o Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:
class EmailService { public function send(string $message): void { echo "Enviando email: " . $message . "\n"; } } class NotificationManager { private EmailService $emailService; public function __construct() { $this->emailService = new EmailService(); // üö® Bandeira vermelha! } public function notify(string $message): void { $this->emailService->send($message); } } Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua NotificationManager est√° completamente dependente da EmailService. Quer trocar por SMS? Vai ter de refatorar a classe.'><meta property="og:locale" content="pt-br"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-09T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-09T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SOLID Dependency Inversion Principle"><meta name=twitter:description content='Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o Princ√≠pio da Invers√£o de Depend√™ncia (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.
O Drama Antes da Invers√£o
Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:
class EmailService
{
    public function send(string $message): void
    {
        echo "Enviando email: " . $message . "\n";
    }
}

class NotificationManager
{
    private EmailService $emailService;

    public function __construct()
    {
        $this->emailService = new EmailService(); // üö® Bandeira vermelha!
    }

    public function notify(string $message): void
    {
        $this->emailService->send($message);
    }
}
Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua NotificationManager est√° completamente dependente da EmailService. Quer trocar por SMS? Vai ter de refatorar a classe.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.felpo.dev/posts/"},{"@type":"ListItem","position":2,"name":"SOLID Dependency Inversion Principle","item":"https://blog.felpo.dev/posts/solid-dependency-inversion-principle/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SOLID Dependency Inversion Principle","name":"SOLID Dependency Inversion Principle","description":"Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o Princ√≠pio da Invers√£o de Depend√™ncia (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.\nO Drama Antes da Invers√£o Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:\nclass EmailService { public function send(string $message): void { echo \u0026#34;Enviando email: \u0026#34; . $message . \u0026#34;\\n\u0026#34;; } } class NotificationManager { private EmailService $emailService; public function __construct() { $this-\u0026gt;emailService = new EmailService(); // üö® Bandeira vermelha! } public function notify(string $message): void { $this-\u0026gt;emailService-\u0026gt;send($message); } } Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua NotificationManager est√° completamente dependente da EmailService. Quer trocar por SMS? Vai ter de refatorar a classe.\n","keywords":[],"articleBody":"Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o Princ√≠pio da Invers√£o de Depend√™ncia (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.\nO Drama Antes da Invers√£o Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:\nclass EmailService { public function send(string $message): void { echo \"Enviando email: \" . $message . \"\\n\"; } } class NotificationManager { private EmailService $emailService; public function __construct() { $this-\u003eemailService = new EmailService(); // üö® Bandeira vermelha! } public function notify(string $message): void { $this-\u003eemailService-\u003esend($message); } } Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua NotificationManager est√° completamente dependente da EmailService. Quer trocar por SMS? Vai ter de refatorar a classe.\nO Princ√≠pio que Salva Vidas (e C√≥digos) O DIP nos diz duas coisas fundamentais:\nM√≥dulos de alto n√≠vel n√£o devem depender de m√≥dulos de baixo n√≠vel. Ambos devem depender de abstra√ß√µes. Abstra√ß√µes n√£o devem depender de detalhes. Detalhes devem depender de abstra√ß√µes. Traduzindo para portugu√™s humano: ‚ÄúPare de casar com implementa√ß√µes espec√≠ficas. Prefira contratos (interfaces) que podem ser cumpridos por diferentes fornecedores.‚Äù\nA Reden√ß√£o Atrav√©s da Abstra√ß√£o Vamos refatorar nosso drama mexicano:\ninterface NotificationServiceInterface { public function send(string $message): void; } class EmailService implements NotificationServiceInterface { public function send(string $message): void { echo \"üìß Enviando email: \" . $message . \"\\n\"; } } class SmsService implements NotificationServiceInterface { public function send(string $message): void { echo \"üì± Enviando SMS: \" . $message . \"\\n\"; } } class SlackService implements NotificationServiceInterface { public function send(string $message): void { echo \"üí¨ Postando no Slack: \" . $message . \"\\n\"; } } class NotificationManager { private NotificationServiceInterface $notificationService; public function __construct(NotificationServiceInterface $notificationService) { $this-\u003enotificationService = $notificationService; // ‚úÖ Agora sim! } public function notify(string $message): void { $this-\u003enotificationService-\u003esend($message); } } Agora sim! Sua NotificationManager n√£o sabe (nem quer saber) se est√° lidando com email, SMS ou pombo correio. Ela s√≥ sabe que precisa de algo que implemente NotificationServiceInterface.\nUsando o C√≥digo Libertado // Criando diferentes tipos de notifica√ß√£o $emailNotifier = new NotificationManager(new EmailService()); $smsNotifier = new NotificationManager(new SmsService()); $slackNotifier = new NotificationManager(new SlackService()); $message = \"Seu pedido foi processado!\"; $emailNotifier-\u003enotify($message); // üìß Enviando email: Seu pedido foi processado! $smsNotifier-\u003enotify($message); // üì± Enviando SMS: Seu pedido foi processado! $slackNotifier-\u003enotify($message); // üí¨ Postando no Slack: Seu pedido foi processado! Um Exemplo Mais Realista: Sistema de Pagamento Vamos complicar um pouquinho com um cen√°rio mais pr√≥ximo da vida real:\ninterface PaymentGatewayInterface { public function processPayment(float $amount, array $paymentData): bool; public function getTransactionId(): string; } class PayPalGateway implements PaymentGatewayInterface { private string $transactionId; public function processPayment(float $amount, array $paymentData): bool { $this-\u003etransactionId = 'PAYPAL_' . uniqid(); echo \"üí≥ Processando R$ {$amount} via PayPal\\n\"; return true; // Simula sucesso } public function getTransactionId(): string { return $this-\u003etransactionId; } } class StripeGateway implements PaymentGatewayInterface { private string $transactionId; public function processPayment(float $amount, array $paymentData): bool { $this-\u003etransactionId = 'STRIPE_' . uniqid(); echo \"üí∞ Processando R$ {$amount} via Stripe\\n\"; return true; // Simula sucesso } public function getTransactionId(): string { return $this-\u003etransactionId; } } class PaymentProcessor { private PaymentGatewayInterface $gateway; public function __construct(PaymentGatewayInterface $gateway) { $this-\u003egateway = $gateway; } public function processOrder(float $amount, array $customerData): array { echo \"üõí Processando pedido...\\n\"; $success = $this-\u003egateway-\u003eprocessPayment($amount, $customerData); if ($success) { return [ 'status' =\u003e 'approved', 'transaction_id' =\u003e $this-\u003egateway-\u003egetTransactionId(), 'amount' =\u003e $amount ]; } return ['status' =\u003e 'failed']; } } // Uso flex√≠vel $paypalProcessor = new PaymentProcessor(new PayPalGateway()); $stripeProcessor = new PaymentProcessor(new StripeGateway()); $customerData = ['email' =\u003e 'cliente@exemplo.com']; $result1 = $paypalProcessor-\u003eprocessOrder(99.90, $customerData); $result2 = $stripeProcessor-\u003eprocessOrder(149.90, $customerData); print_r($result1); print_r($result2); Por Que Isso √© Genial? Flexibilidade: Quer trocar de PayPal para Stripe? S√≥ mudar na inje√ß√£o de depend√™ncia. Testabilidade: Pode criar mocks das interfaces para testes unit√°rios. Manutenibilidade: Mudan√ßas em uma implementa√ß√£o n√£o afetam o resto do sistema. Extensibilidade: Novo gateway? S√≥ implementar a interface. A Moral da Hist√≥ria O Princ√≠pio da Invers√£o de Depend√™ncia √© como ter um relacionamento maduro: voc√™ n√£o precisa controlar cada detalhe do outro, apenas estabelecer expectativas claras (interfaces) e confiar que ser√£o cumpridas.\nSeu c√≥digo fica mais flex√≠vel, seus testes ficam mais f√°ceis, e voc√™ dorme melhor sabendo que n√£o vai precisar reescrever meio sistema s√≥ porque o cliente decidiu trocar de fornecedor de pagamento.\nLembre-se: dependa de abstra√ß√µes, n√£o de implementa√ß√µes. Seu futuro eu (e seus colegas de equipe) v√£o agradecer!\n","wordCount":"742","inLanguage":"en","datePublished":"2025-06-09T00:00:00Z","dateModified":"2025-06-09T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.felpo.dev/posts/solid-dependency-inversion-principle/"},"publisher":{"@type":"Organization","name":"Felpo Blog","logo":{"@type":"ImageObject","url":"https://blog.felpo.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.felpo.dev/ accesskey=h title="Felpo Blog (Alt + H)">Felpo Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">SOLID Dependency Inversion Principle</h1><div class=post-meta><span title='2025-06-09 00:00:00 +0000 UTC'>June 9, 2025</span></div></header><div class=post-content><p>Voc√™ j√° assistiu aquelas novelas onde todo mundo depende de todo mundo e no final vira aquela bagun√ßa √©pica? Pois √©, seu c√≥digo tamb√©m pode virar isso se voc√™ n√£o entender o <strong>Princ√≠pio da Invers√£o de Depend√™ncia</strong> (Dependency Inversion Principle - DIP), a √∫ltima letra do famoso SOLID.</p><h2 id=o-drama-antes-da-invers√£o>O Drama Antes da Invers√£o<a hidden class=anchor aria-hidden=true href=#o-drama-antes-da-invers√£o>#</a></h2><p>Imagine que voc√™ est√° desenvolvendo um sistema de notifica√ß√µes. Seu primeiro instinto pode ser algo assim:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmailService</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;Enviando email: &#34;</span> <span style=color:#f92672>.</span> $message <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationManager</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>EmailService</span> $emailService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>emailService</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>EmailService</span>(); <span style=color:#75715e>// üö® Bandeira vermelha!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>notify</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>emailService</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>send</span>($message);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Parece inofensivo, n√©? Mas na verdade voc√™ acabou de criar o equivalente tecnol√≥gico de um relacionamento t√≥xico. Sua <code>NotificationManager</code> est√° <strong>completamente</strong> dependente da <code>EmailService</code>. Quer trocar por SMS? Vai ter de refatorar a classe.</p><h2 id=o-princ√≠pio-que-salva-vidas-e-c√≥digos>O Princ√≠pio que Salva Vidas (e C√≥digos)<a hidden class=anchor aria-hidden=true href=#o-princ√≠pio-que-salva-vidas-e-c√≥digos>#</a></h2><p>O DIP nos diz duas coisas fundamentais:</p><ol><li><strong>M√≥dulos de alto n√≠vel n√£o devem depender de m√≥dulos de baixo n√≠vel.</strong> Ambos devem depender de abstra√ß√µes.</li><li><strong>Abstra√ß√µes n√£o devem depender de detalhes.</strong> Detalhes devem depender de abstra√ß√µes.</li></ol><p>Traduzindo para portugu√™s humano: &ldquo;Pare de casar com implementa√ß√µes espec√≠ficas. Prefira contratos (interfaces) que podem ser cumpridos por diferentes fornecedores.&rdquo;</p><h2 id=a-reden√ß√£o-atrav√©s-da-abstra√ß√£o>A Reden√ß√£o Atrav√©s da Abstra√ß√£o<a hidden class=anchor aria-hidden=true href=#a-reden√ß√£o-atrav√©s-da-abstra√ß√£o>#</a></h2><p>Vamos refatorar nosso drama mexicano:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>NotificationServiceInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmailService</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>NotificationServiceInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;üìß Enviando email: &#34;</span> <span style=color:#f92672>.</span> $message <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SmsService</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>NotificationServiceInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;üì± Enviando SMS: &#34;</span> <span style=color:#f92672>.</span> $message <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SlackService</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>NotificationServiceInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;üí¨ Postando no Slack: &#34;</span> <span style=color:#f92672>.</span> $message <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationManager</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>NotificationServiceInterface</span> $notificationService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct(<span style=color:#a6e22e>NotificationServiceInterface</span> $notificationService)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>notificationService</span> <span style=color:#f92672>=</span> $notificationService; <span style=color:#75715e>// ‚úÖ Agora sim!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>notify</span>(<span style=color:#a6e22e>string</span> $message)<span style=color:#f92672>:</span> <span style=color:#a6e22e>void</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>notificationService</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>send</span>($message);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Agora sim! Sua <code>NotificationManager</code> n√£o sabe (nem quer saber) se est√° lidando com email, SMS ou pombo correio. Ela s√≥ sabe que precisa de algo que implemente <code>NotificationServiceInterface</code>.</p><h2 id=usando-o-c√≥digo-libertado>Usando o C√≥digo Libertado<a hidden class=anchor aria-hidden=true href=#usando-o-c√≥digo-libertado>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>// Criando diferentes tipos de notifica√ß√£o
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$emailNotifier <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NotificationManager</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>EmailService</span>());
</span></span><span style=display:flex><span>$smsNotifier <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NotificationManager</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SmsService</span>());
</span></span><span style=display:flex><span>$slackNotifier <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NotificationManager</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SlackService</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Seu pedido foi processado!&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$emailNotifier<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>notify</span>($message);  <span style=color:#75715e>// üìß Enviando email: Seu pedido foi processado!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$smsNotifier<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>notify</span>($message);    <span style=color:#75715e>// üì± Enviando SMS: Seu pedido foi processado!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$slackNotifier<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>notify</span>($message);  <span style=color:#75715e>// üí¨ Postando no Slack: Seu pedido foi processado!
</span></span></span></code></pre></div><h2 id=um-exemplo-mais-realista-sistema-de-pagamento>Um Exemplo Mais Realista: Sistema de Pagamento<a hidden class=anchor aria-hidden=true href=#um-exemplo-mais-realista-sistema-de-pagamento>#</a></h2><p>Vamos complicar um pouquinho com um cen√°rio mais pr√≥ximo da vida real:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>PaymentGatewayInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processPayment</span>(<span style=color:#a6e22e>float</span> $amount, <span style=color:#66d9ef>array</span> $paymentData)<span style=color:#f92672>:</span> <span style=color:#a6e22e>bool</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getTransactionId</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PayPalGateway</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>PaymentGatewayInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>string</span> $transactionId;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processPayment</span>(<span style=color:#a6e22e>float</span> $amount, <span style=color:#66d9ef>array</span> $paymentData)<span style=color:#f92672>:</span> <span style=color:#a6e22e>bool</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>transactionId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;PAYPAL_&#39;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>uniqid</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;üí≥ Processando R$ </span><span style=color:#e6db74>{</span>$amount<span style=color:#e6db74>}</span><span style=color:#e6db74> via PayPal</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// Simula sucesso
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getTransactionId</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>transactionId</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StripeGateway</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>PaymentGatewayInterface</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>string</span> $transactionId;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processPayment</span>(<span style=color:#a6e22e>float</span> $amount, <span style=color:#66d9ef>array</span> $paymentData)<span style=color:#f92672>:</span> <span style=color:#a6e22e>bool</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>transactionId</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;STRIPE_&#39;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>uniqid</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;üí∞ Processando R$ </span><span style=color:#e6db74>{</span>$amount<span style=color:#e6db74>}</span><span style=color:#e6db74> via Stripe</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// Simula sucesso
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getTransactionId</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>transactionId</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PaymentProcessor</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>PaymentGatewayInterface</span> $gateway;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> __construct(<span style=color:#a6e22e>PaymentGatewayInterface</span> $gateway)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>gateway</span> <span style=color:#f92672>=</span> $gateway;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processOrder</span>(<span style=color:#a6e22e>float</span> $amount, <span style=color:#66d9ef>array</span> $customerData)<span style=color:#f92672>:</span> <span style=color:#66d9ef>array</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;üõí Processando pedido...</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        $success <span style=color:#f92672>=</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>gateway</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>processPayment</span>($amount, $customerData);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> ($success) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> [
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;status&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;approved&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;transaction_id&#39;</span> <span style=color:#f92672>=&gt;</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>gateway</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getTransactionId</span>(),
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;amount&#39;</span> <span style=color:#f92672>=&gt;</span> $amount
</span></span><span style=display:flex><span>            ];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [<span style=color:#e6db74>&#39;status&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;failed&#39;</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Uso flex√≠vel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$paypalProcessor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PaymentProcessor</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PayPalGateway</span>());
</span></span><span style=display:flex><span>$stripeProcessor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>PaymentProcessor</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>StripeGateway</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$customerData <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;email&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;cliente@exemplo.com&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$result1 <span style=color:#f92672>=</span> $paypalProcessor<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>processOrder</span>(<span style=color:#ae81ff>99.90</span>, $customerData);
</span></span><span style=display:flex><span>$result2 <span style=color:#f92672>=</span> $stripeProcessor<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>processOrder</span>(<span style=color:#ae81ff>149.90</span>, $customerData);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>print_r</span>($result1);
</span></span><span style=display:flex><span><span style=color:#a6e22e>print_r</span>($result2);
</span></span></code></pre></div><h2 id=por-que-isso-√©-genial>Por Que Isso √© Genial?<a hidden class=anchor aria-hidden=true href=#por-que-isso-√©-genial>#</a></h2><ol><li><strong>Flexibilidade</strong>: Quer trocar de PayPal para Stripe? S√≥ mudar na inje√ß√£o de depend√™ncia.</li><li><strong>Testabilidade</strong>: Pode criar mocks das interfaces para testes unit√°rios.</li><li><strong>Manutenibilidade</strong>: Mudan√ßas em uma implementa√ß√£o n√£o afetam o resto do sistema.</li><li><strong>Extensibilidade</strong>: Novo gateway? S√≥ implementar a interface.</li></ol><h2 id=a-moral-da-hist√≥ria>A Moral da Hist√≥ria<a hidden class=anchor aria-hidden=true href=#a-moral-da-hist√≥ria>#</a></h2><p>O Princ√≠pio da Invers√£o de Depend√™ncia √© como ter um relacionamento maduro: voc√™ n√£o precisa controlar cada detalhe do outro, apenas estabelecer expectativas claras (interfaces) e confiar que ser√£o cumpridas.</p><p>Seu c√≥digo fica mais flex√≠vel, seus testes ficam mais f√°ceis, e voc√™ dorme melhor sabendo que n√£o vai precisar reescrever meio sistema s√≥ porque o cliente decidiu trocar de fornecedor de pagamento.</p><p>Lembre-se: <strong>dependa de abstra√ß√µes, n√£o de implementa√ß√µes</strong>. Seu futuro eu (e seus colegas de equipe) v√£o agradecer!</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.felpo.dev/>Felpo Blog</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>